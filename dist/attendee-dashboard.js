var M=(m,t,v)=>new Promise((o,T)=>{var p=n=>{try{g(v.next(n))}catch(w){T(w)}},a=n=>{try{g(v.throw(n))}catch(w){T(w)}},g=n=>n.done?o(n.value):Promise.resolve(n.value).then(p,a);g((v=v.apply(m,t)).next())});import{_ as ie,i as re,r as k,a as z,c as pe,w as G,o as de,f as ce,b as c,d as i,e,g as te,h as _,n as S,t as d,j as R,k as C,v as oe,l as K,F as V,m as F,p as we,q as se,P as xe,s as ne,u as ae,x as le,y as ke,z as Te,A as D,B as P,C as E,D as Me,E as Se}from"./style-DDuYs_LQ.js";const Ce={name:"RescheduleModal",props:{booking:{type:Object,default:null}},emits:["close","save"],setup(m,{emit:t}){const v=re("toast"),o=k(!1),T=k(!1),p=k([]),a=z({new_date:"",new_time:"",duration:30,timezone:"America/New_York",reason:"",notify_host:!0,send_confirmation:!0}),g=z({}),n=z({show:!1,type:"",message:""}),w=[{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"Europe/London",label:"Greenwich Mean Time (GMT)"},{value:"Europe/Paris",label:"Central European Time (CET)"},{value:"Asia/Tokyo",label:"Japan Standard Time (JST)"},{value:"Asia/Shanghai",label:"China Standard Time (CST)"},{value:"Asia/Kolkata",label:"India Standard Time (IST)"},{value:"Australia/Sydney",label:"Australian Eastern Time (AET)"}],j=pe(()=>{const u=new Date;return u.setDate(u.getDate()+1),u.toISOString().split("T")[0]}),A=(u,x)=>{v?v.showAlert(u,x):(n.show=!0,n.type=`alert-${u}`,n.message=x,setTimeout(()=>{n.show=!1},5e3))},B=()=>{const u=[];for(let x=9;x<=17;x++)for(let L=0;L<60;L+=30){const H=`${x.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`,J=new Date(`2000-01-01T${H}`).toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0});u.push({value:H,label:J,available:!0})}return u},I=()=>M(this,null,function*(){if(!a.new_date){p.value=[];return}T.value=!0;try{const u=B();yield new Promise(x=>setTimeout(x,500)),p.value=u}catch(u){A("error","Failed to load available time slots"),p.value=B()}finally{T.value=!1}}),U=()=>{if(Object.keys(g).forEach(u=>delete g[u]),!a.new_date)g.new_date="New date is required";else{const u=new Date(a.new_date),x=new Date;x.setHours(0,0,0,0),u<=x&&(g.new_date="Please select a future date")}return a.new_time||(g.new_time="New time is required"),(!a.duration||a.duration<15)&&(g.duration="Duration must be at least 15 minutes"),Object.keys(g).length===0},b=()=>M(this,null,function*(){if(!U()){A("error","Please fix the errors below");return}o.value=!0;try{const u={booking_id:m.booking.id,new_date:a.new_date,new_time:a.new_time,duration:a.duration,timezone:a.timezone,reason:a.reason,notify_host:a.notify_host,send_confirmation:a.send_confirmation};t("save",u)}catch(u){A("error","Failed to reschedule booking")}finally{o.value=!1}}),O=()=>{m.booking&&(a.duration=m.booking.duration||30,a.timezone=m.booking.timezone||"America/New_York")};return G(()=>a.new_date,I),G(()=>m.booking,O,{immediate:!0}),de(()=>{O(),p.value=B()}),{isSubmitting:o,loadingSlots:T,availableTimeSlots:p,form:a,errors:g,alert:n,timezones:w,minDate:j,showAlert:A,validateForm:U,handleSubmit:b,formatDateTime:ce}}},Ae={class:"modal-header"},Be={class:"modal-body"},De={key:1,class:"bg-gray-50 p-4 rounded-lg mb-6"},Pe={class:"text-sm text-gray-600"},Le={key:0},ze={class:"space-y-6"},je=["min"],Ne={key:0,class:"form-error"},Ee=["value","disabled"],Re={key:0,class:"form-error"},Ve={key:0,class:"form-error"},Fe=["value"],Ue={key:0,class:"form-error"},Oe={key:0,class:"form-error"},He={class:"border-t pt-4"},Ie={class:"space-y-2"},Je={class:"flex items-center"},qe={class:"flex items-center"},We={key:0,class:"text-center py-4"},Ye={class:"modal-footer"},Ke=["disabled"],Ge={key:0,class:"loading-spinner-sm mr-2"};function Qe(m,t,v,o,T,p){return i(),c("div",{class:"modal-overlay",onClick:t[11]||(t[11]=a=>m.$emit("close"))},[e("div",{class:"modal-content",onClick:t[10]||(t[10]=te(()=>{},["stop"]))},[e("div",Ae,[t[13]||(t[13]=e("h3",{class:"modal-title"},"Reschedule Booking",-1)),e("button",{onClick:t[0]||(t[0]=a=>m.$emit("close")),class:"modal-close"},t[12]||(t[12]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:t[9]||(t[9]=te((...a)=>o.handleSubmit&&o.handleSubmit(...a),["prevent"]))},[e("div",Be,[o.alert.show?(i(),c("div",{key:0,class:S([o.alert.type,"mb-4"])},d(o.alert.message),3)):_("",!0),v.booking?(i(),c("div",De,[t[17]||(t[17]=e("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Current Booking",-1)),e("div",Pe,[e("p",null,[t[14]||(t[14]=e("strong",null,"Date:",-1)),R(" "+d(o.formatDateTime(v.booking.date_time)),1)]),e("p",null,[t[15]||(t[15]=e("strong",null,"Duration:",-1)),R(" "+d(v.booking.duration)+" minutes",1)]),v.booking.host_name?(i(),c("p",Le,[t[16]||(t[16]=e("strong",null,"Host:",-1)),R(" "+d(v.booking.host_name),1)])):_("",!0)])])):_("",!0),e("div",ze,[e("div",null,[t[18]||(t[18]=e("label",{for:"new_date",class:"form-label"},"New Date *",-1)),C(e("input",{id:"new_date","onUpdate:modelValue":t[1]||(t[1]=a=>o.form.new_date=a),type:"date",class:S(["form-input",{"border-red-500":o.errors.new_date}]),min:o.minDate,required:""},null,10,je),[[oe,o.form.new_date]]),o.errors.new_date?(i(),c("p",Ne,d(o.errors.new_date),1)):_("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{for:"new_time",class:"form-label"},"New Time *",-1)),C(e("select",{id:"new_time","onUpdate:modelValue":t[2]||(t[2]=a=>o.form.new_time=a),class:S(["form-input",{"border-red-500":o.errors.new_time}]),required:""},[t[19]||(t[19]=e("option",{value:""},"Select Time",-1)),(i(!0),c(V,null,F(o.availableTimeSlots,a=>(i(),c("option",{key:a.value,value:a.value,disabled:!a.available},d(a.label)+" "+d(a.available?"":"(Unavailable)"),9,Ee))),128))],2),[[K,o.form.new_time]]),o.errors.new_time?(i(),c("p",Re,d(o.errors.new_time),1)):_("",!0)]),e("div",null,[t[22]||(t[22]=e("label",{for:"duration",class:"form-label"},"Duration (minutes)",-1)),C(e("select",{id:"duration","onUpdate:modelValue":t[3]||(t[3]=a=>o.form.duration=a),class:S(["form-input",{"border-red-500":o.errors.duration}])},t[21]||(t[21]=[we('<option value="15">15 minutes</option><option value="30">30 minutes</option><option value="45">45 minutes</option><option value="60">1 hour</option><option value="90">1.5 hours</option><option value="120">2 hours</option>',6)]),2),[[K,o.form.duration]]),o.errors.duration?(i(),c("p",Ve,d(o.errors.duration),1)):_("",!0)]),e("div",null,[t[23]||(t[23]=e("label",{for:"timezone",class:"form-label"},"Timezone",-1)),C(e("select",{id:"timezone","onUpdate:modelValue":t[4]||(t[4]=a=>o.form.timezone=a),class:S(["form-input",{"border-red-500":o.errors.timezone}])},[(i(!0),c(V,null,F(o.timezones,a=>(i(),c("option",{key:a.value,value:a.value},d(a.label),9,Fe))),128))],2),[[K,o.form.timezone]]),o.errors.timezone?(i(),c("p",Ue,d(o.errors.timezone),1)):_("",!0)]),e("div",null,[t[24]||(t[24]=e("label",{for:"reason",class:"form-label"},"Reason for Rescheduling",-1)),C(e("textarea",{id:"reason","onUpdate:modelValue":t[5]||(t[5]=a=>o.form.reason=a),rows:"3",class:S(["form-input",{"border-red-500":o.errors.reason}]),placeholder:"Please provide a reason for rescheduling (optional)"},null,2),[[oe,o.form.reason]]),o.errors.reason?(i(),c("p",Oe,d(o.errors.reason),1)):_("",!0)]),e("div",He,[t[27]||(t[27]=e("h4",{class:"text-lg font-medium text-gray-900 mb-3"},"Notifications",-1)),e("div",Ie,[e("label",Je,[C(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>o.form.notify_host=a),type:"checkbox",class:"form-checkbox"},null,512),[[se,o.form.notify_host]]),t[25]||(t[25]=e("span",{class:"ml-2 text-sm text-gray-700"},"Notify host about rescheduling",-1))]),e("label",qe,[C(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>o.form.send_confirmation=a),type:"checkbox",class:"form-checkbox"},null,512),[[se,o.form.send_confirmation]]),t[26]||(t[26]=e("span",{class:"ml-2 text-sm text-gray-700"},"Send confirmation email",-1))])])]),o.loadingSlots?(i(),c("div",We,t[28]||(t[28]=[e("div",{class:"loading-spinner mx-auto mb-2"},null,-1),e("p",{class:"text-sm text-gray-600"},"Loading available time slots...",-1)]))):_("",!0)])]),e("div",Ye,[e("button",{type:"button",onClick:t[8]||(t[8]=a=>m.$emit("close")),class:"btn-secondary"}," Cancel "),e("button",{type:"submit",class:"btn-primary",disabled:o.isSubmitting||o.loadingSlots},[o.isSubmitting?(i(),c("div",Ge)):_("",!0),R(" "+d(o.isSubmitting?"Rescheduling...":"Reschedule Booking"),1)],8,Ke)])],32)])])}const Xe=ie(Ce,[["render",Qe]]),Ze={name:"AttendeeDashboard",components:{ProfileModal:xe,RescheduleModal:Xe},setup(){var $;const m=re("toast"),t=k(!1),v=k("bookings"),o=k("upcoming"),T=k([]);k([]);const p=z({}),a=z({}),g=z({show:!1,type:"",message:""}),n=k((($=window.hbcAttendeeData)==null?void 0:$.logoutUrl)||"/wp-login.php?action=logout"),w=k(!1),j=k(!1),A=k(null),B=k(new Set),I=[{id:"bookings",name:"My Bookings"},{id:"profile",name:"Profile"}],U=[{id:"upcoming",name:"Upcoming"},{id:"completed",name:"Completed"},{id:"cancelled",name:"Cancelled"}],b=(s,l)=>{m?m.showAlert(s,l):(g.show=!0,g.type=`alert-${s}`,g.message=l,setTimeout(()=>{g.show=!1},5e3))},O=()=>{g.show=!1},u=()=>M(this,null,function*(){try{t.value=!0;let l=(yield P.getBookings("all")).bookings||[];const r=new Date().toISOString().split("T")[0],y=new Date;o.value==="upcoming"?l=l.filter(f=>{const N=f.meeting_dates,W=new Date(N+" "+(f.start_time||"00:00:00")),h=f.attendee_status==="confirmed"||f.booking_status==="confirmed",Y=f.attendee_status!=="completed"&&f.booking_status!=="completed",ee=f.attendee_status!=="cancelled"&&f.attendee_status!=="canceled"&&f.booking_status!=="cancelled"&&f.booking_status!=="canceled";return W>y&&h&&Y&&ee}):o.value==="completed"?l=l.filter(f=>f.attendee_status==="completed"||f.booking_status==="completed"):o.value==="cancelled"&&(l=l.filter(f=>f.attendee_status==="cancelled"||f.attendee_status==="canceled"||f.booking_status==="cancelled"||f.booking_status==="canceled")),T.value=l}catch(s){b("error",E(s))}finally{t.value=!1}}),x=()=>M(this,null,function*(){try{const s=yield P.getProfile();s&&Object.assign(p,{first_name:s.first_name||"",last_name:s.last_name||"",email:s.email||"",display_name:s.name||"",phone:s.phone||"",timezone:s.timezone||""})}catch(s){console.error("Failed to load profile:",s),b("error",E(s))}}),L=()=>M(this,null,function*(){try{const l=(yield P.getBookings("all")).bookings||[],r=new Date,y=l.length,f=l.filter(h=>{const Y=h.meeting_dates;return new Date(Y+" "+(h.start_time||"00:00:00"))>r&&(h.attendee_status==="confirmed"||h.attendee_status==="pending"||h.booking_status==="confirmed"||h.booking_status==="pending")}).length,N=l.filter(h=>h.attendee_status==="completed"||h.booking_status==="completed").length,W=l.filter(h=>h.attendee_status==="cancelled"||h.attendee_status==="canceled"||h.booking_status==="cancelled"||h.booking_status==="canceled").length;Object.assign(a,{total_bookings:y,upcoming_bookings:f,completed_bookings:N,cancelled_bookings:W})}catch(s){console.error("Failed to load stats:",s),b("error","Failed to load statistics")}}),H=s=>M(this,null,function*(){if(confirm("Are you sure you want to cancel this booking?"))try{t.value=!0,yield P.cancelBooking(s),b("success","Booking cancelled successfully"),yield u(),yield L()}catch(l){b("error",E(l))}finally{t.value=!1}}),J=()=>{w.value=!0},me=s=>M(this,null,function*(){try{t.value=!0,yield P.updateProfile(s),Object.assign(p,s),w.value=!1,b("success","Profile updated successfully")}catch(l){b("error",E(l))}finally{t.value=!1}}),ue=s=>{A.value=s,j.value=!0},fe=s=>M(this,null,function*(){try{t.value=!0,yield P.rescheduleBooking(s.bookingId,s.newDate,s.newTime),j.value=!1,b("success","Booking rescheduled successfully"),yield u()}catch(l){b("error",E(l))}finally{t.value=!1}}),X=s=>{if(!s)return!1;try{const l=typeof s=="string"?JSON.parse(s):s;if(!l||typeof l!="object")return!1;const r=Object.keys(l);if(r.length===0)return!1;const y=l[r[0]];return!!(y.join_url||y.meeting_url)}catch(l){return!1}},Z=s=>{if(!s)return null;try{const l=typeof s=="string"?JSON.parse(s):s;if(!l||typeof l!="object")return null;const r=Object.keys(l);if(r.length===0)return null;const y=l[r[0]];return y.join_url||y.meeting_url||null}catch(l){return null}},ge=s=>D(s)?s.status==="confirmed"||s.booking_status==="confirmed":(s.status==="confirmed"||s.booking_status==="confirmed")&&(X(s.meeting_locations)||s.meeting_id),q=s=>{if(D(s))return!0;const l=new Date,r=new Date(s.meeting_dates+" "+s.start_time),y=new Date(s.meeting_dates+" "+s.end_time),f=new Date(r.getTime()-5*60*1e3);return l>=f&&l<=y},ve=s=>{if(D(s))return"btn-success animate-pulse";if(!q(s))return"btn-secondary opacity-50 cursor-not-allowed";const l=new Date,r=new Date(s.meeting_dates+" "+s.start_time),y=new Date(s.meeting_dates+" "+s.end_time);return l>=r&&l<=y?"btn-success animate-pulse":"btn-primary"},be=s=>{if(D(s))return"Start Meeting";if(!q(s))return"Scheduled";const r=new Date,y=new Date(s.meeting_dates+" "+s.start_time),f=new Date(s.meeting_dates+" "+s.end_time);return r>=y&&r<=f?"Start Meeting":`Available in ${Math.ceil((y.getTime()-r.getTime())/6e4)}m`},_e=s=>M(this,null,function*(){if(!B.value.has(s.id||s.booking_id))try{B.value.add(s.id||s.booking_id);const l=yield P.getMeetingLink(s.id||s.booking_id);if(console.log("API Response:",l),console.log("Response status:",l.status),console.log("Response meeting_url:",l.meeting_url),l.status&&l.meeting_url){let r=l.meeting_url.toString().trim();r.startsWith('"')&&r.endsWith('"')&&(r=r.slice(1,-1)),r.startsWith("'")&&r.endsWith("'")&&(r=r.slice(1,-1)),console.log("Cleaned URL:",r),console.log("About to navigate to:",r),window.location.href=r}else{const r=Z(s.meeting_locations);r?(window.open(r,"_blank","noopener,noreferrer"),b("success","Meeting opened in new tab")):D(s)?b("info","Test mode: Meeting link would be available here in production."):b("error","Meeting link not available. Please contact support.")}}catch(l){console.error("Error getting meeting link:",l),D(s)?b("info","Test mode: Meeting access would be available here in production."):b("error","Failed to get meeting link. Please try again.")}finally{B.value.delete(s.id||s.booking_id)}}),ye=()=>M(this,null,function*(){t.value=!0;try{yield Promise.all([u(),x(),L()])}catch(s){b("error","Failed to load dashboard data")}finally{t.value=!1}});G(v,s=>{s==="bookings"&&u()});const he=()=>M(this,null,function*(){if(confirm("Are you sure you want to logout?"))try{const l=yield(yield fetch(window.hbcAttendeeData.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`action=hbc_logout&nonce=${window.hbcAttendeeData.logoutNonce}`})).json();l.success?window.location.href=l.data.login_url:b("error","Logout failed. Please try again.")}catch(s){console.error("Error:",s),b("error","Logout failed. Please try again.")}});return de(ye),{isLoading:t,activeTab:v,currentFilter:o,bookings:T,profile:p,stats:a,alert:g,showProfileModal:w,showRescheduleModal:j,selectedBooking:A,tabs:I,bookingFilters:U,logoutUrl:n,showAlert:b,clearAlert:O,loadBookings:u,cancelBooking:H,openProfileModal:J,updateProfile:me,openRescheduleModal:ue,handleLogout:he,rescheduleBooking:fe,hasJoinLink:X,getJoinLink:Z,canShowMeetingButton:ge,isMeetingAvailable:q,getMeetingButtonClass:ve,getMeetingButtonText:be,handleMeetingAction:_e,isTestModeActiveForBooking:D,formatDateTime:ce,getStatusClass:Te,getStatusText:ke}}},$e={class:"min-h-screen bg-gray-50 py-8"},et={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},tt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ot={class:"mb-8 hbc-dashboard-header"},st={class:"hbc-header-content"},nt={class:"hbc-header-actions"},at={class:"flex justify-between items-center"},lt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},it={class:"card"},rt={class:"card-body"},dt={class:"flex items-center"},ct={class:"ml-4"},mt={class:"text-2xl font-semibold text-gray-900"},ut={class:"card"},ft={class:"card-body"},gt={class:"flex items-center"},vt={class:"ml-4"},bt={class:"text-2xl font-semibold text-gray-900"},_t={class:"card"},yt={class:"card-body"},ht={class:"flex items-center"},pt={class:"ml-4"},wt={class:"text-2xl font-semibold text-gray-900"},xt={class:"card"},kt={class:"card-body"},Tt={class:"flex items-center"},Mt={class:"ml-4"},St={class:"text-2xl font-semibold text-gray-900"},Ct={class:"tab-nav mb-6"},At={class:"flex space-x-8"},Bt=["onClick"],Dt={key:1,class:"mb-6"},Pt={class:"flex space-x-4"},Lt=["onClick"],zt={class:"bg-white rounded-lg shadow"},jt={class:"p-6"},Nt={class:"flex justify-between items-center mb-6"},Et={key:0,class:"text-center py-12"},Rt={key:1,class:"space-y-4"},Vt={class:"flex justify-between items-start mb-4"},Ft={class:"text-lg font-semibold text-gray-900"},Ut={class:"text-sm text-gray-600 mt-1"},Ot={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Ht={class:"text-sm text-gray-600"},It={class:"text-sm text-gray-600"},Jt={class:"flex space-x-3"},qt=["onClick","disabled"],Wt=["onClick"],Yt=["onClick"],Kt={class:"p-6"},Gt={class:"flex justify-between items-center mb-6"},Qt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Xt={class:"text-gray-700"},Zt={class:"text-gray-700"},$t={class:"text-gray-700"},eo={class:"text-gray-700"},to={class:"md:col-span-2"},oo={class:"text-gray-700"};function so(m,t,v,o,T,p){const a=ne("ProfileModal"),g=ne("RescheduleModal");return i(),c("div",$e,[o.isLoading?(i(),c("div",et,t[6]||(t[6]=[e("div",{class:"bg-white p-6 rounded-lg shadow-lg"},[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"loading-spinner"}),e("span",{class:"text-gray-700"},"Loading...")])],-1)]))):_("",!0),e("div",tt,[e("div",ot,[e("div",st,[t[7]||(t[7]=e("div",{class:"hbc-header-text"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Attendee Dashboard"),e("p",{class:"mt-2 text-gray-600"},"Manage your bookings and profile")],-1)),e("div",nt,[e("button",{onClick:t[0]||(t[0]=(...n)=>o.handleLogout&&o.handleLogout(...n)),class:"hbc-logout-btn"},"Logout")])])]),o.alert.show?(i(),c("div",{key:0,class:S([o.alert.type,"mb-6 animate-fade-in"])},[e("div",at,[e("span",null,d(o.alert.message),1),e("button",{onClick:t[1]||(t[1]=(...n)=>o.clearAlert&&o.clearAlert(...n)),class:"text-lg leading-none hover:opacity-75"},"Ã—")])],2)):_("",!0),e("div",lt,[e("div",it,[e("div",rt,[e("div",dt,[t[9]||(t[9]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})])])],-1)),e("div",ct,[e("p",mt,d(o.stats.total_bookings||0),1),t[8]||(t[8]=e("p",{class:"text-sm text-gray-600"},"Total Bookings",-1))])])])]),e("div",ut,[e("div",ft,[e("div",gt,[t[11]||(t[11]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-success-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-success-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])])],-1)),e("div",vt,[e("p",bt,d(o.stats.upcoming_bookings||0),1),t[10]||(t[10]=e("p",{class:"text-sm text-gray-600"},"Upcoming",-1))])])])]),e("div",_t,[e("div",yt,[e("div",ht,[t[13]||(t[13]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-warning-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-warning-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})])])],-1)),e("div",pt,[e("p",wt,d(o.stats.completed_bookings||0),1),t[12]||(t[12]=e("p",{class:"text-sm text-gray-600"},"Completed",-1))])])])]),e("div",xt,[e("div",kt,[e("div",Tt,[t[15]||(t[15]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})])])],-1)),e("div",Mt,[e("p",St,d(o.stats.cancelled_bookings||0),1),t[14]||(t[14]=e("p",{class:"text-sm text-gray-600"},"Cancelled",-1))])])])])]),e("div",Ct,[e("nav",At,[(i(!0),c(V,null,F(o.tabs,n=>(i(),c("button",{key:n.id,onClick:w=>o.activeTab=n.id,class:S(["py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200",o.activeTab===n.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},d(n.name),11,Bt))),128))])]),o.activeTab==="bookings"?(i(),c("div",Dt,[e("div",Pt,[(i(!0),c(V,null,F(o.bookingFilters,n=>(i(),c("button",{key:n.id,onClick:w=>{o.currentFilter=n.id,o.loadBookings()},class:S(["px-4 py-2 rounded-lg font-medium text-sm transition-colors duration-200",o.currentFilter===n.id?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},d(n.name),11,Lt))),128))])])):_("",!0),e("div",zt,[C(e("div",jt,[e("div",Nt,[t[17]||(t[17]=e("h3",{class:"text-lg font-medium text-gray-900"},"My Bookings",-1)),e("button",{onClick:t[2]||(t[2]=(...n)=>o.loadBookings&&o.loadBookings(...n)),class:"btn-primary"},t[16]||(t[16]=[e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1),R(" Refresh ",-1)]))]),o.bookings.length===0?(i(),c("div",Et,t[18]||(t[18]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a1 1 0 011-1h6a1 1 0 011 1v4m-6 0h6m-6 0V7a1 1 0 00-1 1v9a2 2 0 002 2h6a2 2 0 002-2V8a1 1 0 00-1-1V7"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No bookings",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"You don't have any bookings yet.",-1)]))):(i(),c("div",Rt,[(i(!0),c(V,null,F(o.bookings,n=>(i(),c("div",{key:n.id||n.booking_id,class:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow duration-200"},[e("div",Vt,[e("div",null,[e("h4",Ft,d(n.title||n.meeting_title),1),e("p",Ut,d(n.meeting_description),1)]),e("span",{class:S([o.getStatusClass(n.status||n.booking_status),"badge"])},d(o.getStatusText(n.status||n.booking_status)),3)]),e("div",Ot,[e("div",null,[t[19]||(t[19]=e("p",{class:"text-sm font-medium text-gray-700"},"Date & Time",-1)),e("p",Ht,d(o.formatDateTime(n.meeting_dates,n.start_time)),1)]),e("div",null,[t[20]||(t[20]=e("p",{class:"text-sm font-medium text-gray-700"},"Duration",-1)),e("p",It,d(n.duration||"N/A"),1)])]),e("div",Jt,[o.canShowMeetingButton(n)?(i(),c("button",{key:0,onClick:w=>o.handleMeetingAction(n),class:S(o.getMeetingButtonClass(n)),disabled:!o.isMeetingAvailable(n)&&!o.isTestModeActiveForBooking(n)},d(o.getMeetingButtonText(n)),11,qt)):_("",!0),(n.status||n.booking_status)==="pending"||(n.status||n.booking_status)==="confirmed"?(i(),c("button",{key:1,onClick:w=>o.cancelBooking(n.id||n.booking_id),class:"btn-danger"}," Cancel Booking ",8,Wt)):_("",!0),(n.status||n.booking_status)==="confirmed"?(i(),c("button",{key:2,onClick:w=>o.openRescheduleModal(n),class:"btn-secondary"}," Reschedule ",8,Yt)):_("",!0)])]))),128))]))],512),[[le,o.activeTab==="bookings"]]),C(e("div",Kt,[e("div",Gt,[t[21]||(t[21]=e("h3",{class:"text-lg font-medium text-gray-900"},"Profile Settings",-1)),e("button",{onClick:t[3]||(t[3]=(...n)=>o.openProfileModal&&o.openProfileModal(...n)),class:"btn-primary"}," Edit Profile ")]),e("div",Qt,[e("div",null,[t[22]||(t[22]=e("label",{class:"form-label"},"First Name",-1)),e("p",Xt,d(o.profile.first_name||"Not set"),1)]),e("div",null,[t[23]||(t[23]=e("label",{class:"form-label"},"Last Name",-1)),e("p",Zt,d(o.profile.last_name||"Not set"),1)]),e("div",null,[t[24]||(t[24]=e("label",{class:"form-label"},"Email",-1)),e("p",$t,d(o.profile.email||"Not set"),1)]),e("div",null,[t[25]||(t[25]=e("label",{class:"form-label"},"Phone",-1)),e("p",eo,d(o.profile.phone||"Not set"),1)]),e("div",to,[t[26]||(t[26]=e("label",{class:"form-label"},"Timezone",-1)),e("p",oo,d(o.profile.timezone||"Not set"),1)])])],512),[[le,o.activeTab==="profile"]])])]),o.showProfileModal?(i(),ae(a,{key:1,profile:o.profile,onClose:t[4]||(t[4]=n=>o.showProfileModal=!1),onSave:o.updateProfile},null,8,["profile","onSave"])):_("",!0),o.showRescheduleModal?(i(),ae(g,{key:2,booking:o.selectedBooking,onClose:t[5]||(t[5]=n=>o.showRescheduleModal=!1),onSave:o.rescheduleBooking},null,8,["booking","onSave"])):_("",!0)])}const no=ie(Ze,[["render",so]]);function Q(){const m=document.getElementById("attendee-dashboard-app");if(m&&!m.__vue_app__)try{const t=Me(no);t.use(Se),t.config.errorHandler=(o,T,p)=>{console.error("Vue Attendee Dashboard error:",o,p),m.innerHTML=`
          <div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px; color: #c33;">
            <h3>Dashboard Error</h3>
            <p>There was an error loading the dashboard. Please refresh the page or contact support.</p>
            <details style="margin-top: 10px;">
              <summary>Error Details</summary>
              <pre style="margin-top: 10px; font-size: 12px;">${o.message}</pre>
            </details>
          </div>
        `},t.mount(m),m.__vue_app__=t,m.style.display="block";const v=document.getElementById("hbc-loading-state");v&&(v.style.display="none")}catch(t){console.error("Failed to mount Attendee Dashboard:",t),m.innerHTML=`
        <div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px; color: #c33;">
          <h3>Dashboard Unavailable</h3>
          <p>The dashboard could not be loaded. Please refresh the page or contact support.</p>
          <button onclick="location.reload()" style="margin-top: 10px; padding: 8px 16px; background: #007cba; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Refresh Page
          </button>
        </div>
      `}else m&&m.__vue_app__||console.error("Attendee Dashboard container not found")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Q):Q();setTimeout(Q,100);
