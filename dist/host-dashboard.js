var L=(g,t,d)=>new Promise((s,M)=>{var c=v=>{try{a(d.next(v))}catch(T){M(T)}},o=v=>{try{a(d.throw(v))}catch(T){M(T)}},a=v=>v.done?s(v.value):Promise.resolve(v.value).then(c,o);a((d=d.apply(g,t)).next())});import{_ as oe,C as he,g as N,l as te,s as O,m as ue,p as ge,q as ne,r as Y,c as r,o as l,b as e,t as n,F as J,e as P,a as _,n as D,y as ae,B as z,u as ke,D as _e,f as U,j as se,E as ce,i as ve,h as Z,G as pe,k as xe,w as C,H as we,I as Q,J as X,K as re,P as Ce,d as de,v as ie,x as K,z as Me,A as Le}from"./style-BLrjfZNT.js";const Ae={name:"BookingsList",components:{CountdownTimer:he},props:{bookings:{type:Array,default:()=>[]},showActions:{type:Boolean,default:!1},showAttendeeActions:{type:Boolean,default:!1}},emits:["view-details","update-status","show-alert","meeting-expired","meeting-urgent","meeting-warning"],setup(g,{emit:t}){const d=N(new Set),s=i=>L(this,null,function*(){(yield _e(i))?(t("link-copied"),t("show-alert","success","Join link copied to clipboard")):t("show-alert","error","Failed to copy link")}),M=i=>i?new Date(i).toLocaleDateString():"N/A",c=i=>!i||!Array.isArray(i)||i.length===0?null:i[0].attendee_name||i[0].name||null,o=i=>!i||!Array.isArray(i)||i.length===0?null:i[0].email||null,a=i=>{if(!i)return null;try{const y=JSON.parse(i),h=Object.keys(y);return h.length===0?null:y[h[0]].location||h[0]}catch(y){return i}},v=i=>{if(!i)return!1;try{const y=JSON.parse(i),h=Object.keys(y);if(h.length===0)return!1;const x=y[h[0]];return!!(x.join_url||x.meeting_url)}catch(y){return!1}},T=i=>{switch(i==null?void 0:i.toLowerCase()){case"paid":case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":case"cancelled":return"bg-red-100 text-red-800";case"refunded":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},f=i=>{if(!i)return null;try{const y=JSON.parse(i),h=Object.keys(y);if(h.length===0)return null;const x=y[h[0]];return x.join_url||x.meeting_url||null}catch(y){return null}},u=i=>{switch(i){case"1":case 1:return"Paid";case"0":case 0:return"Pending";case"-1":case-1:return"Failed";default:return i||"Unknown"}},B=i=>O(i)?i.status==="confirmed":i.status==="confirmed"&&(v(i.meeting_locations)||i.meeting_id),S=i=>{if(O(i))return!0;const y=new Date,h=new Date(i.meeting_dates+" "+i.start_time),x=new Date(i.meeting_dates+" "+i.end_time),F=new Date(h.getTime()-5*60*1e3);return y>=F&&y<=x};return{formatDateTime:ne,formatDate:M,getStatusClass:ge,getStatusText:ue,copyJoinLink:s,getAttendeeName:c,getAttendeeEmail:o,formatLocation:a,hasJoinLink:v,getPaymentStatusClass:T,getPaymentStatusText:u,getJoinLink:f,canShowMeetingButton:B,isMeetingAvailable:S,getMeetingButtonClass:i=>{if(!S(i))return"btn-secondary opacity-50 cursor-not-allowed";if(O(i))return"btn-success animate-pulse";const y=new Date,h=new Date(i.meeting_dates+" "+i.start_time),x=new Date(i.meeting_dates+" "+i.end_time);return y>=h&&y<=x?"btn-success animate-pulse":"btn-primary"},getMeetingButtonText:(i,y)=>{if(O(i))return"Start Meeting";if(!S(i))return"Scheduled";const h=new Date,x=new Date(i.meeting_dates+" "+i.start_time),F=new Date(i.meeting_dates+" "+i.end_time);return h>=x&&h<=F?"Start Meeting":`Available in ${Math.ceil((x.getTime()-h.getTime())/6e4)}m`},handleMeetingAction:i=>L(this,null,function*(){if(!S(i)&&!O(i)){t("show-alert","info","Meeting will be available 5 minutes before the scheduled time.");return}if(!d.value.has(i.id))try{d.value.add(i.id);const h=yield(g.showActions?z:ke).getMeetingLink(i.id);if(console.log("API Response:",h),console.log("Response status:",h.status),console.log("Response meeting_url:",h.meeting_url),console.log("Using API:",g.showActions?"hostAPI":"attendeeAPI"),h.status&&h.meeting_url){let x=h.meeting_url.toString().trim();x.startsWith('"')&&x.endsWith('"')&&(x=x.slice(1,-1)),x.startsWith("'")&&x.endsWith("'")&&(x=x.slice(1,-1)),console.log("Cleaned URL:",x),console.log("About to navigate to:",x),window.location.href=x}else{const x=f(i.meeting_locations);x?(window.open(x,"_blank","noopener,noreferrer"),t("show-alert","success","Meeting opened in new tab")):O(i)?t("show-alert","info","Test mode: Meeting link would be available here in production."):t("show-alert","error","Meeting link not available. Please contact support.")}}catch(y){console.error("Error getting meeting link:",y),O(i)?t("show-alert","info","Test mode: Meeting access would be available here in production."):t("show-alert","error","Failed to get meeting link. Please try again.")}finally{d.value.delete(i.id)}}),loadingMeetingLinks:d,isTestModeActiveForBooking:O,isUpcomingMeeting:i=>{const y=new Date;return new Date(i.meeting_dates+" "+i.start_time)>y},isBookingConfirmed:i=>{const y=i.status||i.booking_status||i.attendee_status;return y==="confirmed"&&y!=="cancelled"&&y!=="canceled"&&y!=="completed"},onMeetingExpired:i=>{console.log("Meeting expired:",i),t("meeting-expired",i)},onMeetingUrgent:(i,y)=>{console.log("Meeting starting soon:",i,y),t("meeting-urgent",i,y)},onMeetingWarning:(i,y)=>{console.log("Meeting approaching:",i,y),t("meeting-warning",i,y)},__:te}}},Be={class:"space-y-4"},De={key:0,class:"text-center py-12"},Te={class:"mt-2 text-sm font-medium text-gray-900"},Se={class:"mt-1 text-sm text-gray-500"},je={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ne={class:"card-body"},Ue={class:"flex items-start justify-between mb-4"},ze={class:"text-lg font-medium text-gray-900 flex-1 pr-2"},Ee={key:0,class:"mb-4"},Ve={class:"space-y-3 text-sm text-gray-600"},Je={class:"text-sm font-medium text-gray-700"},Pe={class:"text-sm text-gray-900 truncate"},He={class:"text-sm font-medium text-gray-700"},Fe={class:"text-sm text-gray-600 truncate"},Oe={class:"text-sm font-medium text-gray-700"},qe={class:"text-sm text-gray-600"},Ie={class:"text-sm font-medium text-gray-700"},Re={class:"text-sm text-gray-600"},We={class:"text-xs text-gray-500"},Ke={key:1,class:"mt-4 pt-3 border-t border-gray-200 text-sm text-gray-600"},Ge={key:0,class:"mb-2"},Qe={class:"font-medium"},Xe={class:"break-words"},Ye={key:1,class:"mb-2"},Ze={class:"font-medium"},$e={class:"break-words"},et={key:2,class:"mb-2"},tt={class:"font-medium"},st={class:"break-words"},ot={key:2,class:"mt-4 pt-3 border-t border-gray-200 space-y-2"},nt=["onClick"],it={key:0,class:"grid grid-cols-2 gap-2"},at=["onClick"],lt=["onClick"],rt={key:1,class:"grid grid-cols-2 gap-2"},dt=["onClick"],ct=["onClick"],mt=["onClick","disabled"],ut={key:3,class:"mt-4 pt-3 border-t border-gray-200 space-y-2"},gt=["onClick"],_t=["onClick","disabled"];function ft(g,t,d,s,M,c){const o=Y("CountdownTimer");return l(),r("div",Be,[d.bookings.length?(l(),r("div",je,[(l(!0),r(J,null,P(d.bookings,a=>(l(),r("div",{key:a.booking_id,class:"card hover:shadow-lg transition-shadow duration-200 h-fit"},[e("div",Ne,[e("div",Ue,[e("h4",ze,n(a.title||(a.host_first_name+" "+a.host_last_name).trim()||s.__("meeting")),1),e("span",{class:D([s.getStatusClass(a.status||a.booking_status),"badge whitespace-nowrap"])},n(s.getStatusText(a.status||a.booking_status)),3)]),s.isUpcomingMeeting(a)&&s.isBookingConfirmed(a)?(l(),r("div",Ee,[ae(o,{"meeting-date":a.meeting_dates,"start-time":a.start_time,onExpired:v=>s.onMeetingExpired(a),onUrgent:v=>s.onMeetingUrgent(a),onWarning:v=>s.onMeetingWarning(a)},null,8,["meeting-date","start-time","onExpired","onUrgent","onWarning"])])):_("",!0),e("div",Ve,[e("div",null,[e("p",Je,n(s.__("attendee")),1),e("p",Pe,n(s.getAttendeeName(a.attendees)||"N/A"),1)]),e("div",null,[e("p",He,n(s.__("email")),1),e("p",Fe,n(s.getAttendeeEmail(a.attendees)||"N/A"),1)]),e("div",null,[e("p",Oe,n(s.__("duration")),1),e("p",qe,n(a.duration?a.duration+" "+s.__("min"):"N/A"),1)]),e("div",null,[e("p",Ie,n(s.__("date_time")),1),e("p",Re,n(s.formatDate(a.meeting_dates)),1),e("p",We,n(a.start_time)+" - "+n(a.end_time),1)])]),a.notes||a.internal_note||a.attendee_comment?(l(),r("div",Ke,[a.notes?(l(),r("div",Ge,[e("span",Qe,n(s.__("notes"))+":",1),e("span",Xe,n(a.notes),1)])):_("",!0),a.internal_note?(l(),r("div",Ye,[e("span",Ze,n(s.__("internal_note"))+":",1),e("span",$e,n(a.internal_note),1)])):_("",!0),a.attendee_comment?(l(),r("div",et,[e("span",tt,n(s.__("attendee_comment"))+":",1),e("span",st,n(a.attendee_comment),1)])):_("",!0)])):_("",!0),d.showActions?(l(),r("div",ot,[e("button",{onClick:v=>g.$emit("view-details",a.id),class:"btn-secondary text-xs w-full"},n(s.__("view_details")),9,nt),a.status==="pending"?(l(),r("div",it,[e("button",{onClick:v=>g.$emit("update-status",a.id,"confirmed"),class:"btn-success text-xs"},n(s.__("confirm")),9,at),e("button",{onClick:v=>g.$emit("update-status",a.id,"cancelled"),class:"btn-danger text-xs"},n(s.__("cancel")),9,lt)])):a.status==="confirmed"?(l(),r("div",rt,[e("button",{onClick:v=>g.$emit("update-status",a.id,"completed"),class:"btn-success text-xs"},n(s.__("mark_complete")),9,dt),e("button",{onClick:v=>g.$emit("update-status",a.id,"cancelled"),class:"btn-danger text-xs"}," Cancel ",8,ct)])):_("",!0),s.canShowMeetingButton(a)?(l(),r("button",{key:2,onClick:v=>s.handleMeetingAction(a),class:D([s.getMeetingButtonClass(a),"text-xs w-full"]),disabled:!s.isMeetingAvailable(a)&&!s.isTestModeActiveForBooking(a)},n(s.getMeetingButtonText(a,"host")),11,mt)):_("",!0)])):d.showAttendeeActions?(l(),r("div",ut,[e("button",{onClick:v=>g.$emit("view-details",a.id),class:"btn-secondary text-xs w-full"}," View Details ",8,gt),s.canShowMeetingButton(a)?(l(),r("button",{key:0,onClick:v=>s.handleMeetingAction(a),class:D([s.getMeetingButtonClass(a),"text-xs w-full"]),disabled:!s.isMeetingAvailable(a)&&!s.isTestModeActiveForBooking(a)},n(s.getMeetingButtonText(a,"attendee")),11,_t)):_("",!0)])):_("",!0)])]))),128))])):(l(),r("div",De,[t[0]||(t[0]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a2 2 0 012-2h4a2 2 0 012 2v4m-6 4v10m6-10v10m-6 0h6"})],-1)),e("h3",Te,n(s.__("no_bookings_found")),1),e("p",Se,n(s.__("no_bookings_match")),1)]))])}const yt=oe(Ae,[["render",ft]]),pt={name:"JoinLinksList",props:{joinLinks:{type:Array,default:()=>[]}},emits:["copy-link","send-link","disable-link","enable-link","delete-link","test-host-link"],setup(){return{formatDateTime:ne,getLinkStatusClass:s=>({active:"badge-success",disabled:"badge-warning",expired:"badge-danger",pending:"badge-secondary"})[s]||"badge-secondary",getLinkStatusText:s=>({active:"Active",disabled:"Disabled",expired:"Expired",pending:"Pending"})[s]||s,testHostLink:s=>{s.join_url&&window.open(s.join_url,"_blank","noopener,noreferrer")}}}},vt={class:"space-y-4"},xt={key:0,class:"text-center py-12"},bt={key:1,class:"space-y-4"},ht={class:"card-body"},kt={class:"flex items-start justify-between"},wt={class:"flex-1"},Ct={class:"flex items-center space-x-3 mb-3"},Mt={class:"text-lg font-medium text-gray-900"},Lt={key:0,class:"badge badge-secondary"},At={class:"space-y-2 text-sm text-gray-600"},Bt={class:"flex items-center"},Dt={class:"bg-gray-100 px-2 py-1 rounded text-xs font-mono"},Tt={key:0,class:"flex items-center"},St={key:1,class:"flex items-center"},jt={key:2,class:"flex items-center"},Nt={key:3,class:"flex items-center"},Ut={key:4,class:"flex items-center"},zt={key:0},Et={key:0,class:"mt-3 text-sm text-gray-600"},Vt={class:"italic"},Jt={class:"flex flex-col space-y-2 ml-4"},Pt=["onClick","disabled"],Ht=["onClick","disabled"],Ft=["onClick","disabled"],Ot=["onClick"],qt=["onClick"],It=["onClick"],Rt={key:0,class:"mt-4 pt-4 border-t border-gray-200"},Wt={class:"space-y-1"};function Kt(g,t,d,s,M,c){return l(),r("div",vt,[d.joinLinks.length?(l(),r("div",bt,[(l(!0),r(J,null,P(d.joinLinks,o=>(l(),r("div",{key:o.id,class:"card hover:shadow-md transition-shadow duration-200"},[e("div",ht,[e("div",kt,[e("div",wt,[e("div",Ct,[e("h4",Mt,n(o.title||"Join Link"),1),e("span",{class:D([s.getLinkStatusClass(o.status),"badge"])},n(s.getLinkStatusText(o.status)),3),o.type?(l(),r("span",Lt,n(o.type),1)):_("",!0)]),e("div",At,[e("div",Bt,[t[1]||(t[1]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z","clip-rule":"evenodd"})],-1)),e("code",Dt,n(o.url),1)]),o.meeting_title?(l(),r("div",Tt,[t[2]||(t[2]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})],-1)),U(" "+n(o.meeting_title),1)])):_("",!0),o.meeting_date?(l(),r("div",St,[t[3]||(t[3]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),U(" "+n(s.formatDateTime(o.meeting_date)),1)])):_("",!0),o.created_at?(l(),r("div",jt,[t[4]||(t[4]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1)),U(" Created "+n(s.formatDateTime(o.created_at)),1)])):_("",!0),o.expires_at?(l(),r("div",Nt,[t[5]||(t[5]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),U(" Expires "+n(s.formatDateTime(o.expires_at)),1)])):_("",!0),o.usage_count!==void 0?(l(),r("div",Ut,[t[6]||(t[6]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),U(" Used "+n(o.usage_count)+" time"+n(o.usage_count!==1?"s":"")+" ",1),o.max_uses?(l(),r("span",zt," (max "+n(o.max_uses)+")",1)):_("",!0)])):_("",!0)]),o.description?(l(),r("div",Et,[e("p",Vt,n(o.description),1)])):_("",!0)]),e("div",Jt,[e("button",{onClick:a=>g.$emit("copy-link",o.url),class:"btn-primary text-xs",disabled:o.status==="expired"||o.status==="disabled"},t[7]||(t[7]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),e("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})],-1),U(" Copy ",-1)]),8,Pt),e("button",{onClick:a=>g.$emit("send-link",o.id),class:"btn-secondary text-xs",disabled:o.status==="expired"||o.status==="disabled"},t[8]||(t[8]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})],-1),U(" Send ",-1)]),8,Ht),e("button",{onClick:a=>g.$emit("test-host-link",o),class:"btn-success text-xs",disabled:o.status==="expired"||o.status==="disabled",title:"Test host meeting link (opens in new tab)"}," Test Host ",8,Ft),o.status==="active"?(l(),r("button",{key:0,onClick:a=>g.$emit("disable-link",o.id),class:"btn-warning text-xs"}," Disable ",8,Ot)):o.status==="disabled"?(l(),r("button",{key:1,onClick:a=>g.$emit("enable-link",o.id),class:"btn-success text-xs"}," Enable ",8,qt)):_("",!0),e("button",{onClick:a=>g.$emit("delete-link",o.id),class:"btn-danger text-xs"}," Delete ",8,It)])]),o.usage_stats&&o.usage_stats.length?(l(),r("div",Rt,[t[9]||(t[9]=e("h5",{class:"text-sm font-medium text-gray-900 mb-2"},"Recent Usage",-1)),e("div",Wt,[(l(!0),r(J,null,P(o.usage_stats.slice(0,3),a=>(l(),r("div",{key:a.id,class:"flex justify-between text-xs text-gray-600"},[e("span",null,n(a.attendee_name||a.attendee_email),1),e("span",null,n(s.formatDateTime(a.used_at)),1)]))),128))])])):_("",!0)])]))),128))])):(l(),r("div",xt,t[0]||(t[0]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No join links found",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Create your first join link to get started.",-1)])))])}const Gt=oe(pt,[["render",Kt]]),Qt={name:"BookingDetailsModal",props:{booking:{type:Object,default:null}},emits:["close","send-email"],setup(g,{emit:t}){return se(()=>g.booking,(f,u)=>{},{immediate:!0,deep:!0}),{formatDateTime:ne,formatDate:f=>f?new Date(f).toLocaleDateString():"N/A",formatTime:f=>f?new Date(f).toLocaleTimeString():"N/A",formatFieldName:f=>f.replace(/_/g," ").replace(/\b\w/g,u=>u.toUpperCase()),getStatusClass:ge,getStatusText:ue,copyJoinLink:f=>L(this,null,function*(){(yield _e(f))?(t("link-copied"),t("show-alert","success","Join link copied to clipboard")):t("show-alert","error","Failed to copy link")}),sendEmail:()=>{t("send-email",g.booking)},getAttendeeName:f=>!f||!Array.isArray(f)||f.length===0?"N/A":f[0].attendee_name||f[0].name||"N/A",getAttendeeEmail:f=>!f||!Array.isArray(f)||f.length===0?"N/A":f[0].email||"N/A",formatLocation:f=>{if(!f)return"N/A";try{const u=JSON.parse(f),B=Object.keys(u);return B.length===0?"N/A":u[B[0]].location||B[0]}catch(u){return f}}}}},Xt={class:"modal-header"},Yt={class:"modal-body"},Zt={key:0,class:"space-y-6"},$t={class:"bg-gray-50 p-4 rounded-lg"},es={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ts={class:"text-gray-700"},ss={class:"text-gray-700"},os={class:"text-gray-700"},ns={class:"text-gray-700"},is={class:"text-gray-700"},as={key:0,class:"md:col-span-2"},ls={class:"text-gray-700"},rs={class:"bg-blue-50 p-4 rounded-lg"},ds={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},cs={class:"text-gray-700"},ms={class:"text-gray-700"},us={class:"text-gray-700"},gs={class:"text-gray-700"},_s={class:"text-gray-700"},fs={key:0,class:"md:col-span-2"},ys={class:"text-gray-700"},ps={class:"md:col-span-2"},vs={class:"text-gray-700"},xs={key:0,class:"bg-green-50 p-4 rounded-lg"},bs={class:"space-y-3"},hs={class:"flex-1"},ks={class:"flex items-center justify-between"},ws={class:"text-sm font-medium text-gray-900"},Cs={class:"text-xs text-gray-500"},Ms={key:0,class:"text-sm text-gray-600 mt-1"},Ls={key:1,class:"bg-purple-50 p-4 rounded-lg"},As={class:"bg-white px-3 py-2 rounded border text-sm font-mono"},Bs=["onClick"],Ds={key:2,class:"bg-yellow-50 p-4 rounded-lg"},Ts={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ss={class:"form-label"},js={class:"text-gray-700"},Ns={key:1,class:"text-center py-8"},Us={class:"modal-footer"};function zs(g,t,d,s,M,c){var o,a,v,T,f,u,B,S,H,q,p,E,V,I,$,R,i,y,h,x,F,ee;return l(),r("div",{class:"modal-overlay",onClick:t[4]||(t[4]=A=>g.$emit("close"))},[e("div",{class:"modal-content",onClick:t[3]||(t[3]=ce(()=>{},["stop"]))},[e("div",Xt,[t[6]||(t[6]=e("h3",{class:"modal-title"},"Booking Details",-1)),e("button",{onClick:t[0]||(t[0]=A=>g.$emit("close")),class:"modal-close"},t[5]||(t[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Yt,[d.booking?(l(),r("div",Zt,[e("div",$t,[t[14]||(t[14]=e("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Meeting Details",-1)),e("div",es,[e("div",null,[t[7]||(t[7]=e("label",{class:"form-label"},"Meeting Title",-1)),e("p",ts,n(((o=d.booking.data)==null?void 0:o.meeting_title)||"N/A"),1)]),e("div",null,[t[8]||(t[8]=e("label",{class:"form-label"},"Date",-1)),e("p",ss,n(((a=d.booking.data)==null?void 0:a.meeting_dates)||"N/A"),1)]),e("div",null,[t[9]||(t[9]=e("label",{class:"form-label"},"Time",-1)),e("p",os,n(((v=d.booking.data)==null?void 0:v.start_time)||"N/A")+" - "+n(((T=d.booking.data)==null?void 0:T.end_time)||"N/A"),1)]),e("div",null,[t[10]||(t[10]=e("label",{class:"form-label"},"Duration",-1)),e("p",ns,n(((f=d.booking.data)==null?void 0:f.duration)||"N/A")+" minutes",1)]),e("div",null,[t[11]||(t[11]=e("label",{class:"form-label"},"Booking Type",-1)),e("p",is,n(((u=d.booking.data)==null?void 0:u.booking_type)||"N/A"),1)]),e("div",null,[t[12]||(t[12]=e("label",{class:"form-label"},"Status",-1)),e("span",{class:D([s.getStatusClass((B=d.booking.data)==null?void 0:B.status),"badge"])},n(s.getStatusText((S=d.booking.data)==null?void 0:S.status)||((H=d.booking.data)==null?void 0:H.status)||"N/A"),3)]),(q=d.booking.data)!=null&&q.internal_note?(l(),r("div",as,[t[13]||(t[13]=e("label",{class:"form-label"},"Internal Note",-1)),e("p",ls,n(d.booking.data.internal_note),1)])):_("",!0)])]),e("div",rs,[t[22]||(t[22]=e("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Attendee Details",-1)),e("div",ds,[e("div",null,[t[15]||(t[15]=e("label",{class:"form-label"},"Name",-1)),e("p",cs,n(s.getAttendeeName((p=d.booking.data)==null?void 0:p.attendees)||"N/A"),1)]),e("div",null,[t[16]||(t[16]=e("label",{class:"form-label"},"Email",-1)),e("p",ms,n(s.getAttendeeEmail((E=d.booking.data)==null?void 0:E.attendees)||"N/A"),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"form-label"},"Attendee ID",-1)),e("p",us,n(((V=d.booking.data)==null?void 0:V.attendee_id)||"N/A"),1)]),e("div",null,[t[18]||(t[18]=e("label",{class:"form-label"},"Booking ID",-1)),e("p",gs,n(((I=d.booking.data)==null?void 0:I.id)||(($=d.booking.data)==null?void 0:$.booking_id)||"N/A"),1)]),e("div",null,[t[19]||(t[19]=e("label",{class:"form-label"},"Created At",-1)),e("p",_s,n(s.formatDateTime((R=d.booking.data)==null?void 0:R.created_at)||"N/A"),1)]),(i=d.booking.data)!=null&&i.attendee_comment?(l(),r("div",fs,[t[20]||(t[20]=e("label",{class:"form-label"},"Comment",-1)),e("p",ys,n(d.booking.data.attendee_comment),1)])):_("",!0),e("div",ps,[t[21]||(t[21]=e("label",{class:"form-label"},"Booked At",-1)),e("p",vs,n(s.formatDateTime((y=d.booking.data)==null?void 0:y.created_at)),1)])])]),(h=d.booking.data)!=null&&h.activity&&d.booking.data.activity.length?(l(),r("div",xs,[t[24]||(t[24]=e("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Activity Details",-1)),e("div",bs,[(l(!0),r(J,null,P(d.booking.data.activity,A=>(l(),r("div",{key:A.id,class:"flex items-start space-x-3 p-3 bg-white rounded border"},[t[23]||(t[23]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-2 h-2 bg-green-400 rounded-full mt-2"})],-1)),e("div",hs,[e("div",ks,[e("p",ws,n(A.action),1),e("p",Cs,n(s.formatDateTime(A.created_at)),1)]),A.description?(l(),r("p",Ms,n(A.description),1)):_("",!0)])]))),128))])])):_("",!0),(x=d.booking.data)!=null&&x.join_links&&d.booking.data.join_links.length>0?(l(),r("div",Ls,[t[26]||(t[26]=e("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Join Links",-1)),(l(!0),r(J,null,P(d.booking.data.join_links,(A,G)=>(l(),r("div",{key:G,class:"flex items-center justify-between mb-2"},[e("code",As,n(A),1),e("button",{onClick:fe=>s.copyJoinLink(A),class:"btn-primary ml-3"},t[25]||(t[25]=[e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),e("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})],-1),U(" Copy Link ",-1)]),8,Bs)]))),128))])):_("",!0),(F=d.booking.data)!=null&&F.custom_fields&&Object.keys(d.booking.data.custom_fields).length?(l(),r("div",Ds,[t[27]||(t[27]=e("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"Additional Information",-1)),e("div",Ts,[(l(!0),r(J,null,P(d.booking.data.custom_fields,(A,G)=>(l(),r("div",{key:G,class:"space-y-1"},[e("label",Ss,n(s.formatFieldName(G)),1),e("p",js,n(A||"N/A"),1)]))),128))])])):_("",!0)])):(l(),r("div",Ns,t[28]||(t[28]=[e("div",{class:"loading-spinner mx-auto mb-4"},null,-1),e("p",{class:"text-gray-600"},"Loading booking details...",-1)])))]),e("div",Us,[e("button",{onClick:t[1]||(t[1]=A=>g.$emit("close")),class:"btn-secondary"}," Close "),d.booking&&s.getAttendeeEmail((ee=d.booking.data)==null?void 0:ee.attendees)?(l(),r("button",{key:0,onClick:t[2]||(t[2]=(...A)=>s.sendEmail&&s.sendEmail(...A)),class:"btn-primary"}," Send Email ")):_("",!0)])])])}const Es=oe(Qt,[["render",zs]]),Vs={name:"JoinLinkModal",emits:["close","save"],setup(g,{emit:t}){const d=ve("toast"),s=N(!1),M=N([]),c=Z({meeting_id:"",link_type:"one-time",max_uses:1,custom_url:"",expiration_type:"after_meeting",expiration_date:"",expiration_time:"",description:"",require_password:!1,password:"",waiting_room:!1,host_approval:!1}),o=Z({}),a=Z({show:!1,type:"",message:""}),v=pe(()=>window.location.origin),T=pe(()=>new Date().toISOString().split("T")[0]),f=(p,E)=>{d?d.showAlert(p,E):(a.show=!0,a.type=`alert-${p}`,a.message=E,setTimeout(()=>{a.show=!1},5e3))},u=()=>L(this,null,function*(){try{const p=yield z.getBookings("upcoming");M.value=p.bookings||[]}catch(p){f("error","Failed to load available meetings")}}),B=()=>{c.custom_url=""},S=()=>{c.custom_url&&(c.custom_url=c.custom_url.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/--+/g,"-").replace(/^-|-$/g,""))},H=()=>(Object.keys(o).forEach(p=>delete o[p]),c.meeting_id||(o.meeting_id="Please select a meeting"),c.link_type||(o.link_type="Please select a link type"),c.link_type==="limited"&&(!c.max_uses||c.max_uses<1)&&(o.max_uses="Maximum uses must be at least 1"),c.custom_url&&(c.custom_url.length<3?o.custom_url="Custom URL must be at least 3 characters":c.custom_url.length>50&&(o.custom_url="Custom URL must be less than 50 characters")),c.expiration_type==="custom"&&(c.expiration_date||(o.expiration_date="Expiration date is required"),c.expiration_time||(o.expiration_time="Expiration time is required"),c.expiration_date&&c.expiration_time&&new Date(`${c.expiration_date}T${c.expiration_time}`)<=new Date&&(o.expiration_date="Expiration must be in the future")),c.require_password&&!c.password&&(o.password="Password is required when password protection is enabled"),Object.keys(o).length===0),q=()=>L(this,null,function*(){if(!H()){f("error","Please fix the errors below");return}s.value=!0;try{const p={meeting_id:c.meeting_id,link_type:c.link_type,max_uses:c.link_type==="limited"?c.max_uses:null,custom_url:c.custom_url||null,expiration_type:c.expiration_type,expiration_date:c.expiration_type==="custom"?c.expiration_date:null,expiration_time:c.expiration_type==="custom"?c.expiration_time:null,description:c.description||null,require_password:c.require_password,password:c.require_password?c.password:null,waiting_room:c.waiting_room,host_approval:c.host_approval};t("save",p)}catch(p){f("error","Failed to generate join link")}finally{s.value=!1}});return se(()=>c.link_type,p=>{p!=="limited"&&(c.max_uses=1)}),se(()=>c.require_password,p=>{p||(c.password="")}),xe(u),{isSubmitting:s,availableMeetings:M,form:c,errors:o,alert:a,baseUrl:v,minExpirationDate:T,showAlert:f,loadAvailableMeetings:u,onMeetingChange:B,validateCustomUrl:S,validateForm:H,handleSubmit:q,formatDateTime:ne}}},Js={class:"modal-header"},Ps={class:"modal-body"},Hs={class:"space-y-6"},Fs=["value"],Os={key:0,class:"form-error"},qs={class:"space-y-2"},Is={class:"flex items-center"},Rs={class:"flex items-center"},Ws={class:"flex items-center"},Ks={key:0,class:"form-error"},Gs={key:0},Qs={key:0,class:"form-error"},Xs={class:"flex"},Ys={class:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"},Zs={key:0,class:"form-error"},$s={class:"space-y-2"},eo={class:"flex items-center"},to={class:"flex items-center"},so={class:"flex items-center"},oo={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},no=["min"],io={key:0,class:"form-error"},ao={key:0,class:"form-error"},lo={key:0,class:"form-error"},ro={class:"border-t pt-4"},co={class:"space-y-2"},mo={class:"flex items-center"},uo={class:"flex items-center"},go={class:"flex items-center"},_o={key:2},fo={key:0,class:"form-error"},yo={class:"modal-footer"},po=["disabled"],vo={key:0,class:"loading-spinner-sm mr-2"};function xo(g,t,d,s,M,c){return l(),r("div",{class:"modal-overlay",onClick:t[22]||(t[22]=o=>g.$emit("close"))},[e("div",{class:"modal-content",onClick:t[21]||(t[21]=ce(()=>{},["stop"]))},[e("div",Js,[t[24]||(t[24]=e("h3",{class:"modal-title"},"Generate Join Link",-1)),e("button",{onClick:t[0]||(t[0]=o=>g.$emit("close")),class:"modal-close"},t[23]||(t[23]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:t[20]||(t[20]=ce((...o)=>s.handleSubmit&&s.handleSubmit(...o),["prevent"]))},[e("div",Ps,[s.alert.show?(l(),r("div",{key:0,class:D([s.alert.type,"mb-4"])},n(s.alert.message),3)):_("",!0),e("div",Hs,[e("div",null,[t[26]||(t[26]=e("label",{for:"meeting_id",class:"form-label"},"Select Meeting *",-1)),C(e("select",{id:"meeting_id","onUpdate:modelValue":t[1]||(t[1]=o=>s.form.meeting_id=o),class:D(["form-input",{"border-red-500":s.errors.meeting_id}]),required:"",onChange:t[2]||(t[2]=(...o)=>s.onMeetingChange&&s.onMeetingChange(...o))},[t[25]||(t[25]=e("option",{value:""},"Choose a meeting",-1)),(l(!0),r(J,null,P(s.availableMeetings,o=>(l(),r("option",{key:o.id,value:o.id},n(o.title)+" - "+n(s.formatDateTime(o.date_time)),9,Fs))),128))],34),[[we,s.form.meeting_id]]),s.errors.meeting_id?(l(),r("p",Os,n(s.errors.meeting_id),1)):_("",!0)]),e("div",null,[t[30]||(t[30]=e("label",{class:"form-label"},"Link Type *",-1)),e("div",qs,[e("label",Is,[C(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.form.link_type=o),type:"radio",value:"one-time",class:"form-radio"},null,512),[[Q,s.form.link_type]]),t[27]||(t[27]=e("span",{class:"ml-2"},[e("span",{class:"font-medium"},"One-time Link"),e("span",{class:"block text-sm text-gray-500"},"Can only be used once")],-1))]),e("label",Rs,[C(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.form.link_type=o),type:"radio",value:"reusable",class:"form-radio"},null,512),[[Q,s.form.link_type]]),t[28]||(t[28]=e("span",{class:"ml-2"},[e("span",{class:"font-medium"},"Reusable Link"),e("span",{class:"block text-sm text-gray-500"},"Can be used multiple times")],-1))]),e("label",Ws,[C(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.form.link_type=o),type:"radio",value:"limited",class:"form-radio"},null,512),[[Q,s.form.link_type]]),t[29]||(t[29]=e("span",{class:"ml-2"},[e("span",{class:"font-medium"},"Limited Use Link"),e("span",{class:"block text-sm text-gray-500"},"Can be used a specific number of times")],-1))])]),s.errors.link_type?(l(),r("p",Ks,n(s.errors.link_type),1)):_("",!0)]),s.form.link_type==="limited"?(l(),r("div",Gs,[t[31]||(t[31]=e("label",{for:"max_uses",class:"form-label"},"Maximum Uses *",-1)),C(e("input",{id:"max_uses","onUpdate:modelValue":t[6]||(t[6]=o=>s.form.max_uses=o),type:"number",min:"1",max:"100",class:D(["form-input",{"border-red-500":s.errors.max_uses}]),required:""},null,2),[[X,s.form.max_uses,void 0,{number:!0}]]),s.errors.max_uses?(l(),r("p",Qs,n(s.errors.max_uses),1)):_("",!0)])):_("",!0),e("div",null,[t[32]||(t[32]=e("label",{for:"custom_url",class:"form-label"},"Custom URL (Optional)",-1)),e("div",Xs,[e("span",Ys,n(s.baseUrl)+"/join/ ",1),C(e("input",{id:"custom_url","onUpdate:modelValue":t[7]||(t[7]=o=>s.form.custom_url=o),type:"text",class:D(["form-input rounded-l-none",{"border-red-500":s.errors.custom_url}]),placeholder:"my-meeting-link",onInput:t[8]||(t[8]=(...o)=>s.validateCustomUrl&&s.validateCustomUrl(...o))},null,34),[[X,s.form.custom_url]])]),t[33]||(t[33]=e("p",{class:"text-sm text-gray-500 mt-1"}," Leave blank to generate a random URL ",-1)),s.errors.custom_url?(l(),r("p",Zs,n(s.errors.custom_url),1)):_("",!0)]),e("div",null,[t[37]||(t[37]=e("label",{class:"form-label"},"Link Expiration",-1)),e("div",$s,[e("label",eo,[C(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.form.expiration_type=o),type:"radio",value:"never",class:"form-radio"},null,512),[[Q,s.form.expiration_type]]),t[34]||(t[34]=e("span",{class:"ml-2"},"Never expires",-1))]),e("label",to,[C(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.form.expiration_type=o),type:"radio",value:"after_meeting",class:"form-radio"},null,512),[[Q,s.form.expiration_type]]),t[35]||(t[35]=e("span",{class:"ml-2"},"Expires after meeting ends",-1))]),e("label",so,[C(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.form.expiration_type=o),type:"radio",value:"custom",class:"form-radio"},null,512),[[Q,s.form.expiration_type]]),t[36]||(t[36]=e("span",{class:"ml-2"},"Custom expiration date",-1))])])]),s.form.expiration_type==="custom"?(l(),r("div",oo,[e("div",null,[t[38]||(t[38]=e("label",{for:"expiration_date",class:"form-label"},"Expiration Date *",-1)),C(e("input",{id:"expiration_date","onUpdate:modelValue":t[12]||(t[12]=o=>s.form.expiration_date=o),type:"date",class:D(["form-input",{"border-red-500":s.errors.expiration_date}]),min:s.minExpirationDate,required:""},null,10,no),[[X,s.form.expiration_date]]),s.errors.expiration_date?(l(),r("p",io,n(s.errors.expiration_date),1)):_("",!0)]),e("div",null,[t[39]||(t[39]=e("label",{for:"expiration_time",class:"form-label"},"Expiration Time *",-1)),C(e("input",{id:"expiration_time","onUpdate:modelValue":t[13]||(t[13]=o=>s.form.expiration_time=o),type:"time",class:D(["form-input",{"border-red-500":s.errors.expiration_time}]),required:""},null,2),[[X,s.form.expiration_time]]),s.errors.expiration_time?(l(),r("p",ao,n(s.errors.expiration_time),1)):_("",!0)])])):_("",!0),e("div",null,[t[40]||(t[40]=e("label",{for:"description",class:"form-label"},"Description (Optional)",-1)),C(e("textarea",{id:"description","onUpdate:modelValue":t[14]||(t[14]=o=>s.form.description=o),rows:"3",class:D(["form-input",{"border-red-500":s.errors.description}]),placeholder:"Add a description for this join link..."},null,2),[[X,s.form.description]]),s.errors.description?(l(),r("p",lo,n(s.errors.description),1)):_("",!0)]),e("div",ro,[t[44]||(t[44]=e("h4",{class:"text-lg font-medium text-gray-900 mb-3"},"Security Options",-1)),e("div",co,[e("label",mo,[C(e("input",{"onUpdate:modelValue":t[15]||(t[15]=o=>s.form.require_password=o),type:"checkbox",class:"form-checkbox"},null,512),[[re,s.form.require_password]]),t[41]||(t[41]=e("span",{class:"ml-2 text-sm text-gray-700"},"Require password to join",-1))]),e("label",uo,[C(e("input",{"onUpdate:modelValue":t[16]||(t[16]=o=>s.form.waiting_room=o),type:"checkbox",class:"form-checkbox"},null,512),[[re,s.form.waiting_room]]),t[42]||(t[42]=e("span",{class:"ml-2 text-sm text-gray-700"},"Enable waiting room",-1))]),e("label",go,[C(e("input",{"onUpdate:modelValue":t[17]||(t[17]=o=>s.form.host_approval=o),type:"checkbox",class:"form-checkbox"},null,512),[[re,s.form.host_approval]]),t[43]||(t[43]=e("span",{class:"ml-2 text-sm text-gray-700"},"Require host approval to join",-1))])])]),s.form.require_password?(l(),r("div",_o,[t[45]||(t[45]=e("label",{for:"password",class:"form-label"},"Meeting Password *",-1)),C(e("input",{id:"password","onUpdate:modelValue":t[18]||(t[18]=o=>s.form.password=o),type:"password",class:D(["form-input",{"border-red-500":s.errors.password}]),required:""},null,2),[[X,s.form.password]]),s.errors.password?(l(),r("p",fo,n(s.errors.password),1)):_("",!0)])):_("",!0)])]),e("div",yo,[e("button",{type:"button",onClick:t[19]||(t[19]=o=>g.$emit("close")),class:"btn-secondary"}," Cancel "),e("button",{type:"submit",class:"btn-primary",disabled:s.isSubmitting},[s.isSubmitting?(l(),r("div",vo)):_("",!0),U(" "+n(s.isSubmitting?"Generating...":"Generate Link"),1)],8,po)])],32)])])}const bo=oe(Vs,[["render",xo]]),ho={name:"HostDashboard",components:{BookingsList:yt,JoinLinksList:Gt,BookingDetailsModal:Es,JoinLinkModal:bo,ProfileModal:Ce},setup(){var ye;const g=ve("toast"),t=N(!1),d=N("bookings"),s=N([]),M=N([]),c=Z({}),o=Z({}),a=Z({show:!1,type:"",message:""}),v=N("upcoming"),T=N(((ye=window.hbcHostData)==null?void 0:ye.logoutUrl)||"/wp-login.php?action=logout"),f=N(!1),u=N(!1),B=N(!1),S=N(null),H=[{id:"bookings",name:te("bookings")},{id:"join-links",name:te("join_links")},{id:"profile",name:te("profile")}],q=[{id:"upcoming",name:"Upcoming",icon:"calendar"},{id:"today",name:"Today",icon:"clock"},{id:"completed",name:"Completed",icon:"check"},{id:"cancelled",name:"Cancelled",icon:"x"},{id:"history",name:"All History",icon:"archive"}],p=(m,b)=>{g?g.showAlert(m,b):(a.show=!0,a.type=`alert-${m}`,a.message=b,setTimeout(()=>{a.show=!1},5e3))},E=()=>{a.show=!1},V=(m="upcoming")=>L(this,null,function*(){try{t.value=!0;let b=m;(m==="history"||m==="completed"||m==="cancelled")&&(b="past");const w=yield z.getBookings(b);let k=w&&w.bookings&&Array.isArray(w.bookings)?w.bookings:[];const W=new Date().toISOString().split("T")[0],Vn=new Date;m==="today"?k=k.filter(j=>j.meeting_dates===W&&(j.status==="confirmed"||j.status==="pending")):m==="upcoming"?k=k.filter(j=>{const le=j.meeting_dates,Jn=new Date(le+" "+(j.start_time||"00:00:00"));return le>W&&(j.status==="confirmed"||j.status==="pending")}):m==="completed"?k=k.filter(j=>j.status==="completed"):m==="cancelled"&&(k=k.filter(j=>j.status==="cancelled"||j.status==="canceled")),s.value=k}catch(b){console.error("Bookings load error:",b),p("error",K(b))}finally{t.value=!1}}),I=()=>L(this,null,function*(){try{const m=yield z.getJoinLinks();M.value=m.join_links||(Array.isArray(m)?m:[])}catch(m){console.error("Join links load error:",m),p("error",K(m))}}),$=()=>L(this,null,function*(){try{const m=yield z.getProfile();if(m&&m.profile){const b=m.profile,w=b.host_data||{};Object.assign(c,{first_name:b.first_name||w.first_name||"",last_name:b.last_name||w.last_name||"",email:b.email||w.email||"",display_name:b.display_name||"",phone:w.phone_number||"",bio:b.description||w.about||"",timezone:w.time_zone||"",avatar:w.avatar||"",featured_image:w.featured_image||"",status:w.status||"",availability_type:w.availability_type||"",availability_id:w.availability_id||""})}}catch(m){console.error("Profile load error:",m),p("error",K(m))}}),R=()=>L(this,null,function*(){try{const m=yield z.getStats();Object.assign(o,m||{})}catch(m){console.error("Failed to load stats:",m),p("error","Failed to load statistics")}}),i=(m,b)=>L(this,null,function*(){try{t.value=!0,yield z.updateBookingStatus(m,b),p("success",`Booking ${b} successfully`),yield V(d.value),yield R()}catch(w){p("error",K(w))}finally{t.value=!1}}),y=m=>L(this,null,function*(){var b,w;try{const k=yield z.getBookingDetails(m);let W=null;k&&k.data?W=k.data:k&&k.booking?W=k.booking:k&&(W=k),S.value=W,f.value=!0}catch(k){console.error("Error fetching booking details:",k),p("error","Error fetching booking details: "+(((w=(b=k.response)==null?void 0:b.data)==null?void 0:w.message)||k.message))}}),h=()=>{u.value=!0},x=m=>L(this,null,function*(){try{t.value=!0,yield z.generateJoinLink(m.meetingId,m.linkType,m.customUrl),u.value=!1,p("success","Join link generated successfully"),yield I(),yield R()}catch(b){p("error",K(b))}finally{t.value=!1}}),F=m=>L(this,null,function*(){try{t.value=!0,yield z.sendJoinLink(m),p("success","Join link sent to attendees")}catch(b){p("error",K(b))}finally{t.value=!1}}),ee=m=>L(this,null,function*(){(yield _e(m))?p("success","Join link copied to clipboard"):p("error","Failed to copy link")}),A=()=>{B.value=!0},G=m=>L(this,null,function*(){try{t.value=!0,yield z.updateProfile(m),Object.assign(c,m),B.value=!1,p("success","Profile updated successfully")}catch(b){p("error",K(b))}finally{t.value=!1}}),fe=()=>L(this,null,function*(){t.value=!0;try{yield Promise.all([V(v.value),I(),$(),R()])}catch(m){p("error","Failed to load dashboard data")}finally{t.value=!1}});se(d,m=>{m==="bookings"?V(v.value):m==="join-links"&&I()}),se(v,m=>{d.value==="bookings"&&V(m)});const be=()=>L(this,null,function*(){if(confirm("Are you sure you want to logout?"))try{const b=yield(yield fetch(window.hbcHostData.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`action=hbc_logout&nonce=${window.hbcHostData.logoutNonce}`})).json();b.success?window.location.href=b.data.login_url:p("error","Logout failed. Please try again.")}catch(m){console.error("Error:",m),p("error","Logout failed. Please try again.")}});return xe(fe),{isLoading:t,activeTab:d,activeFilter:v,bookings:s,joinLinks:M,profile:c,stats:o,alert:a,showBookingModal:f,showJoinLinkModal:u,showProfileModal:B,selectedBooking:S,tabs:H,filters:q,logoutUrl:T,showAlert:p,clearAlert:E,loadBookings:V,updateBookingStatus:i,viewBookingDetails:y,openJoinLinkModal:h,generateJoinLink:x,sendJoinLink:F,copyJoinLink:ee,openProfileModal:A,updateProfile:G,handleLogout:be,formatDateTime:ne,getStatusClass:ge,getStatusText:ue,__:te}}},ko={class:"min-h-screen bg-gray-50 py-8"},wo={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},Co={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Mo={class:"mb-8 hbc-dashboard-header"},Lo={class:"hbc-header-content"},Ao={class:"hbc-header-text"},Bo={class:"text-3xl font-bold text-gray-900"},Do={class:"mt-2 text-gray-600"},To={class:"hbc-header-actions"},So={class:"flex justify-between items-center"},jo={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},No={class:"card"},Uo={class:"card-body"},zo={class:"flex items-center"},Eo={class:"ml-4"},Vo={class:"text-2xl font-semibold text-gray-900"},Jo={class:"text-sm text-gray-600"},Po={class:"card"},Ho={class:"card-body"},Fo={class:"flex items-center"},Oo={class:"ml-4"},qo={class:"text-2xl font-semibold text-gray-900"},Io={class:"text-sm text-gray-600"},Ro={class:"card"},Wo={class:"card-body"},Ko={class:"flex items-center"},Go={class:"ml-4"},Qo={class:"text-2xl font-semibold text-gray-900"},Xo={class:"text-sm text-gray-600"},Yo={class:"card"},Zo={class:"card-body"},$o={class:"flex items-center"},en={class:"ml-4"},tn={class:"text-2xl font-semibold text-gray-900"},sn={class:"text-sm text-gray-600"},on={class:"tab-nav mb-6"},nn={class:"flex space-x-8"},an=["onClick"],ln={class:"bg-white rounded-lg shadow"},rn={class:"p-6"},dn={class:"flex justify-between items-center mb-6"},cn={class:"text-lg font-medium text-gray-900"},mn={class:"flex flex-wrap gap-2 mb-6"},un=["onClick"],gn={key:0,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},_n={key:1,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},fn={key:2,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},yn={key:3,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},pn={key:4,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},vn={class:"p-6"},xn={class:"flex justify-between items-center mb-6"},bn={class:"text-lg font-medium text-gray-900"},hn={class:"p-6"},kn={class:"flex justify-between items-center mb-6"},wn={class:"text-lg font-medium text-gray-900"},Cn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Mn={class:"text-gray-700"},Ln={class:"text-gray-700"},An={class:"text-gray-700"},Bn={class:"text-gray-700"},Dn={class:"md:col-span-2"},Tn={class:"text-gray-700"},Sn={class:"text-gray-700"},jn={class:"p-6"},Nn={class:"flex justify-between items-center mb-6"},Un={class:"text-lg font-medium text-gray-900"};function zn(g,t,d,s,M,c){const o=Y("BookingsList"),a=Y("JoinLinksList"),v=Y("BookingDetailsModal"),T=Y("JoinLinkModal"),f=Y("ProfileModal");return l(),r("div",ko,[s.isLoading?(l(),r("div",wo,t[9]||(t[9]=[e("div",{class:"bg-white p-6 rounded-lg shadow-lg"},[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"loading-spinner"}),e("span",{class:"text-gray-700"},"Loading...")])],-1)]))):_("",!0),e("div",Co,[e("div",Mo,[e("div",Lo,[e("div",Ao,[e("h1",Bo,n(s.__("host_dashboard")),1),e("p",Do,n(s.__("manage_meetings_bookings")),1)]),e("div",To,[e("button",{onClick:t[0]||(t[0]=(...u)=>s.handleLogout&&s.handleLogout(...u)),class:"hbc-logout-btn"},n(s.__("logout")),1)])])]),s.alert.show?(l(),r("div",{key:0,class:D([s.alert.type,"mb-6 animate-fade-in"])},[e("div",So,[e("span",null,n(s.alert.message),1),e("button",{onClick:t[1]||(t[1]=(...u)=>s.clearAlert&&s.clearAlert(...u)),class:"text-lg leading-none hover:opacity-75"},"×")])],2)):_("",!0),e("div",jo,[e("div",No,[e("div",Uo,[e("div",zo,[t[10]||(t[10]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})])])],-1)),e("div",Eo,[e("p",Vo,n(s.stats.today_meetings||0),1),e("p",Jo,n(s.__("todays_meetings")),1)])])])]),e("div",Po,[e("div",Ho,[e("div",Fo,[t[11]||(t[11]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-warning-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-warning-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})])])],-1)),e("div",Oo,[e("p",qo,n(s.stats.upcoming_meetings||0),1),e("p",Io,n(s.__("upcoming")),1)])])])]),e("div",Ro,[e("div",Wo,[e("div",Ko,[t[12]||(t[12]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-success-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-success-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])])],-1)),e("div",Go,[e("p",Qo,n(s.stats.completed_meetings||0),1),e("p",Xo,n(s.__("completed")),1)])])])]),e("div",Yo,[e("div",Zo,[e("div",$o,[t[13]||(t[13]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z","clip-rule":"evenodd"})])])],-1)),e("div",en,[e("p",tn,n(s.stats.active_join_links||0),1),e("p",sn,n(s.__("active_links")),1)])])])])]),e("div",on,[e("nav",nn,[(l(!0),r(J,null,P(s.tabs,u=>(l(),r("button",{key:u.id,onClick:B=>s.activeTab=u.id,class:D(["py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200",s.activeTab===u.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},n(u.name),11,an))),128))])]),e("div",ln,[C(e("div",rn,[e("div",dn,[e("h3",cn,n(s.__("bookings")),1),e("button",{onClick:t[2]||(t[2]=u=>s.loadBookings(s.activeFilter)),class:"btn-primary"},[t[14]||(t[14]=e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1)),U(" "+n(s.__("refresh")),1)])]),e("div",mn,[(l(!0),r(J,null,P(s.filters,u=>(l(),r("button",{key:u.id,onClick:B=>s.activeFilter=u.id,class:D(["inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",s.activeFilter===u.id?"bg-primary-100 text-primary-700 border border-primary-200":"bg-gray-100 text-gray-700 border border-gray-200 hover:bg-gray-200"])},[u.icon==="calendar"?(l(),r("svg",gn,t[15]||(t[15]=[e("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"},null,-1)]))):u.icon==="clock"?(l(),r("svg",_n,t[16]||(t[16]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"},null,-1)]))):u.icon==="check"?(l(),r("svg",fn,t[17]||(t[17]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):u.icon==="x"?(l(),r("svg",yn,t[18]||(t[18]=[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):u.icon==="archive"?(l(),r("svg",pn,t[19]||(t[19]=[e("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"},null,-1),e("path",{"fill-rule":"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z","clip-rule":"evenodd"},null,-1)]))):_("",!0),U(" "+n(u.name),1)],10,un))),128))]),ae(o,{bookings:s.bookings,"show-actions":!0,onUpdateStatus:s.updateBookingStatus,onViewDetails:s.viewBookingDetails},null,8,["bookings","onUpdateStatus","onViewDetails"])],512),[[ie,s.activeTab==="bookings"]]),C(e("div",vn,[e("div",xn,[e("h3",bn,n(s.__("join_links_management")),1),e("button",{onClick:t[3]||(t[3]=(...u)=>s.openJoinLinkModal&&s.openJoinLinkModal(...u)),class:"btn-primary"},n(s.__("generate_new_link")),1)]),ae(a,{"join-links":s.joinLinks,onSendLink:s.sendJoinLink,onCopyLink:s.copyJoinLink},null,8,["join-links","onSendLink","onCopyLink"])],512),[[ie,s.activeTab==="join-links"]]),C(e("div",hn,[e("div",kn,[e("h3",wn,n(s.__("profile_settings")),1),e("button",{onClick:t[4]||(t[4]=(...u)=>s.openProfileModal&&s.openProfileModal(...u)),class:"btn-primary"},[t[20]||(t[20]=e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)),U(" "+n(s.__("edit_profile")),1)])]),e("div",Cn,[e("div",null,[t[21]||(t[21]=e("label",{class:"form-label"},"First Name",-1)),e("p",Mn,n(s.profile.first_name||"Not set"),1)]),e("div",null,[t[22]||(t[22]=e("label",{class:"form-label"},"Last Name",-1)),e("p",Ln,n(s.profile.last_name||"Not set"),1)]),e("div",null,[t[23]||(t[23]=e("label",{class:"form-label"},"Email",-1)),e("p",An,n(s.profile.email||"Not set"),1)]),e("div",null,[t[24]||(t[24]=e("label",{class:"form-label"},"Phone",-1)),e("p",Bn,n(s.profile.phone||"Not set"),1)]),e("div",Dn,[t[25]||(t[25]=e("label",{class:"form-label"},"Bio",-1)),e("p",Tn,n(s.profile.bio||"Not set"),1)]),e("div",null,[t[26]||(t[26]=e("label",{class:"form-label"},"Timezone",-1)),e("p",Sn,n(s.profile.timezone||"Not set"),1)])])],512),[[ie,s.activeTab==="profile"]]),C(e("div",jn,[e("div",Nn,[e("h3",Un,n(s.__("meeting_history")),1),e("button",{onClick:t[5]||(t[5]=u=>s.loadBookings("history")),class:"btn-primary"},t[27]||(t[27]=[e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1),U(" Refresh ",-1)]))]),ae(o,{bookings:s.bookings,"show-actions":!1},null,8,["bookings"])],512),[[ie,s.activeTab==="history"]])])]),s.showBookingModal?(l(),de(v,{key:1,booking:s.selectedBooking,onClose:t[6]||(t[6]=u=>s.showBookingModal=!1)},null,8,["booking"])):_("",!0),s.showJoinLinkModal?(l(),de(T,{key:2,onClose:t[7]||(t[7]=u=>s.showJoinLinkModal=!1),onSave:s.generateJoinLink},null,8,["onSave"])):_("",!0),s.showProfileModal?(l(),de(f,{key:3,profile:s.profile,onClose:t[8]||(t[8]=u=>s.showProfileModal=!1),onSave:s.updateProfile},null,8,["profile","onSave"])):_("",!0)])}const En=oe(ho,[["render",zn]]);function me(){const g=document.getElementById("host-dashboard-app");if(g&&!g.__vue_app__)try{const t=Me(En);t.use(Le),t.config.errorHandler=(s,M,c)=>{console.error("Vue Host Dashboard error:",s,c),g.innerHTML=`
          <div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px; color: #c33;">
            <h3>Dashboard Error</h3>
            <p>There was an error loading the dashboard. Please refresh the page or contact support.</p>
            <details style="margin-top: 10px;">
              <summary>Error Details</summary>
              <pre style="margin-top: 10px; font-size: 12px;">${s.message}</pre>
            </details>
          </div>
        `},t.mount(g),g.__vue_app__=t,g.style.display="block";const d=document.getElementById("hbc-loading-state");d&&(d.style.display="none")}catch(t){console.error("Failed to mount Host Dashboard:",t),g.innerHTML=`
        <div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px; color: #c33;">
          <h3>Dashboard Unavailable</h3>
          <p>The dashboard could not be loaded. Please refresh the page or contact support.</p>
          <button onclick="location.reload()" style="margin-top: 10px; padding: 8px 16px; background: #007cba; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Refresh Page
          </button>
        </div>
      `}else g&&g.__vue_app__||console.error("Host Dashboard container not found")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",me):me();setTimeout(me,100);
