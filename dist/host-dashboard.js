var B=(a,s,c)=>new Promise((t,L)=>{var _=p=>{try{l(c.next(p))}catch(T){L(T)}},n=p=>{try{l(c.throw(p))}catch(T){L(T)}},l=p=>p.done?t(p.value):Promise.resolve(p.value).then(_,n);l((c=c.apply(a,s)).next())});import{_ as ne,C as ke,g as U,j as f,s as O,m as me,p as ue,q as ae,r as Y,c as d,o as r,b as e,t as o,F as P,e as $,a as g,n as j,y as le,B as H,u as we,D as ge,f as z,k as oe,E as ce,i as pe,h as Z,G as ye,l as be,w as M,H as Ce,I as Q,J as X,K as re,P as Me,d as de,v as ie,x as R,z as Le,A as Be}from"./style-B4qtJ4rK.js";const De={name:"BookingsList",components:{CountdownTimer:ke},props:{bookings:{type:Array,default:()=>[]},showActions:{type:Boolean,default:!1},showAttendeeActions:{type:Boolean,default:!1}},emits:["view-details","update-status","show-alert","meeting-expired","meeting-urgent","meeting-warning"],setup(a,{emit:s}){const c=U(new Set),t=i=>B(this,null,function*(){(yield ge(i))?(s("link-copied"),s("show-alert","success","Join link copied to clipboard")):s("show-alert","error","Failed to copy link")}),L=i=>i?new Date(i).toLocaleDateString():"N/A",_=i=>!i||!Array.isArray(i)||i.length===0?null:i[0].attendee_name||i[0].name||null,n=i=>!i||!Array.isArray(i)||i.length===0?null:i[0].email||null,l=i=>{if(!i)return null;try{const v=JSON.parse(i),k=Object.keys(v);return k.length===0?null:v[k[0]].location||k[0]}catch(v){return i}},p=i=>{if(!i)return!1;try{const v=JSON.parse(i),k=Object.keys(v);if(k.length===0)return!1;const b=v[k[0]];return!!(b.join_url||b.meeting_url)}catch(v){return!1}},T=i=>{switch(i==null?void 0:i.toLowerCase()){case"paid":case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":case"cancelled":return"bg-red-100 text-red-800";case"refunded":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},h=i=>{if(!i)return null;try{const v=JSON.parse(i),k=Object.keys(v);if(k.length===0)return null;const b=v[k[0]];return b.join_url||b.meeting_url||null}catch(v){return null}},u=i=>{switch(i){case"1":case 1:return"Paid";case"0":case 0:return"Pending";case"-1":case-1:return"Failed";default:return i||"Unknown"}},A=i=>O(i)?i.status==="confirmed":i.status==="confirmed"&&(p(i.meeting_locations)||i.meeting_id),V=i=>{if(O(i))return!0;const v=new Date,k=new Date(i.meeting_dates+" "+i.start_time),b=new Date(i.meeting_dates+" "+i.end_time),N=new Date(k.getTime()-5*60*1e3);return v>=N&&v<=b};return{formatDateTime:ae,formatDate:L,getStatusClass:ue,getStatusText:me,copyJoinLink:t,getAttendeeName:_,getAttendeeEmail:n,formatLocation:l,hasJoinLink:p,getPaymentStatusClass:T,getPaymentStatusText:u,getJoinLink:h,canShowMeetingButton:A,isMeetingAvailable:V,getMeetingButtonClass:i=>{if(!V(i))return"btn-secondary opacity-50 cursor-not-allowed";if(O(i))return"btn-success animate-pulse";const v=new Date,k=new Date(i.meeting_dates+" "+i.start_time),b=new Date(i.meeting_dates+" "+i.end_time);return v>=k&&v<=b?"btn-success animate-pulse":"btn-primary"},getMeetingButtonText:(i,v)=>{if(O(i))return"Start Meeting";if(!V(i))return"Scheduled";const k=new Date,b=new Date(i.meeting_dates+" "+i.start_time),N=new Date(i.meeting_dates+" "+i.end_time);return k>=b&&k<=N?"Start Meeting":`Available in ${Math.ceil((b.getTime()-k.getTime())/6e4)}m`},handleMeetingAction:i=>B(this,null,function*(){if(!V(i)&&!O(i)){s("show-alert","info","Meeting will be available 5 minutes before the scheduled time.");return}if(!c.value.has(i.id))try{c.value.add(i.id);const k=yield(a.showActions?H:we).getMeetingLink(i.id);if(console.log("API Response:",k),console.log("Response status:",k.status),console.log("Response meeting_url:",k.meeting_url),console.log("Using API:",a.showActions?"hostAPI":"attendeeAPI"),k.status&&k.meeting_url){let b=k.meeting_url.toString().trim();b.startsWith('"')&&b.endsWith('"')&&(b=b.slice(1,-1)),b.startsWith("'")&&b.endsWith("'")&&(b=b.slice(1,-1)),console.log("Cleaned URL:",b),console.log("About to navigate to:",b),window.location.href=b}else{const b=h(i.meeting_locations);b?(window.open(b,"_blank","noopener,noreferrer"),s("show-alert","success","Meeting opened in new tab")):O(i)?s("show-alert","info","Test mode: Meeting link would be available here in production."):s("show-alert","error","Meeting link not available. Please contact support.")}}catch(v){console.error("Error getting meeting link:",v),O(i)?s("show-alert","info","Test mode: Meeting access would be available here in production."):s("show-alert","error","Failed to get meeting link. Please try again.")}finally{c.value.delete(i.id)}}),loadingMeetingLinks:c,isTestModeActiveForBooking:O,isUpcomingMeeting:i=>{const v=new Date;return new Date(i.meeting_dates+" "+i.start_time)>v},isBookingConfirmed:i=>{const v=i.status||i.booking_status||i.attendee_status;return v==="confirmed"&&v!=="cancelled"&&v!=="canceled"&&v!=="completed"},onMeetingExpired:i=>{console.log("Meeting expired:",i),s("meeting-expired",i)},onMeetingUrgent:(i,v)=>{console.log("Meeting starting soon:",i,v),s("meeting-urgent",i,v)},onMeetingWarning:(i,v)=>{console.log("Meeting approaching:",i,v),s("meeting-warning",i,v)},__:f}}},Ae={class:"space-y-4"},je={key:0,class:"text-center py-12"},Te={class:"mt-2 text-sm font-medium text-gray-900"},Se={class:"mt-1 text-sm text-gray-500"},Ve={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ue={class:"card-body"},ze={class:"flex items-start justify-between mb-4"},He={class:"text-lg font-medium text-gray-900 flex-1 pr-2"},Je={key:0,class:"mb-4"},Ee={class:"space-y-3 text-sm text-gray-600"},Pe={class:"text-sm font-medium text-gray-700"},$e={class:"text-sm text-gray-900 truncate"},qe={class:"text-sm font-medium text-gray-700"},Ne={class:"text-sm text-gray-600 truncate"},Oe={class:"text-sm font-medium text-gray-700"},Fe={class:"text-sm text-gray-600"},Ie={class:"text-sm font-medium text-gray-700"},We={class:"text-sm text-gray-600"},Ke={class:"text-xs text-gray-500"},Re={key:1,class:"mt-4 pt-3 border-t border-gray-200 text-sm text-gray-600"},Ge={key:0,class:"mb-2"},Qe={class:"font-medium"},Xe={class:"break-words"},Ye={key:1,class:"mb-2"},Ze={class:"font-medium"},et={class:"break-words"},tt={key:2,class:"mb-2"},st={class:"font-medium"},ot={class:"break-words"},nt={key:2,class:"mt-4 pt-3 border-t border-gray-200 space-y-2"},at=["onClick"],it={key:0,class:"grid grid-cols-2 gap-2"},lt=["onClick"],rt=["onClick"],dt={key:1,class:"grid grid-cols-2 gap-2"},ct=["onClick"],_t=["onClick"],mt=["onClick","disabled"],ut={key:3,class:"mt-4 pt-3 border-t border-gray-200 space-y-2"},gt=["onClick"],ft=["onClick","disabled"];function ht(a,s,c,t,L,_){const n=Y("CountdownTimer");return r(),d("div",Ae,[c.bookings.length?(r(),d("div",Ve,[(r(!0),d(P,null,$(c.bookings,l=>(r(),d("div",{key:l.booking_id,class:"card hover:shadow-lg transition-shadow duration-200 h-fit"},[e("div",Ue,[e("div",ze,[e("h4",He,o(l.title||(l.host_first_name+" "+l.host_last_name).trim()||t.__("meeting")),1),e("span",{class:j([t.getStatusClass(l.status||l.booking_status),"badge whitespace-nowrap"])},o(t.getStatusText(l.status||l.booking_status)),3)]),t.isUpcomingMeeting(l)&&t.isBookingConfirmed(l)?(r(),d("div",Je,[le(n,{"meeting-date":l.meeting_dates,"start-time":l.start_time,onExpired:p=>t.onMeetingExpired(l),onUrgent:p=>t.onMeetingUrgent(l),onWarning:p=>t.onMeetingWarning(l)},null,8,["meeting-date","start-time","onExpired","onUrgent","onWarning"])])):g("",!0),e("div",Ee,[e("div",null,[e("p",Pe,o(t.__("attendee")),1),e("p",$e,o(t.getAttendeeName(l.attendees)||t.__("not_available")),1)]),e("div",null,[e("p",qe,o(t.__("email")),1),e("p",Ne,o(t.getAttendeeEmail(l.attendees)||t.__("not_available")),1)]),e("div",null,[e("p",Oe,o(t.__("duration")),1),e("p",Fe,o(l.duration?l.duration+" "+t.__("min"):t.__("not_available")),1)]),e("div",null,[e("p",Ie,o(t.__("date_time")),1),e("p",We,o(t.formatDate(l.meeting_dates)),1),e("p",Ke,o(l.start_time)+" - "+o(l.end_time),1)])]),l.notes||l.internal_note||l.attendee_comment?(r(),d("div",Re,[l.notes?(r(),d("div",Ge,[e("span",Qe,o(t.__("notes"))+":",1),e("span",Xe,o(l.notes),1)])):g("",!0),l.internal_note?(r(),d("div",Ye,[e("span",Ze,o(t.__("internal_note"))+":",1),e("span",et,o(l.internal_note),1)])):g("",!0),l.attendee_comment?(r(),d("div",tt,[e("span",st,o(t.__("attendee_comment"))+":",1),e("span",ot,o(l.attendee_comment),1)])):g("",!0)])):g("",!0),c.showActions?(r(),d("div",nt,[e("button",{onClick:p=>a.$emit("view-details",l.id),class:"btn-secondary text-xs w-full"},o(t.__("view_details")),9,at),l.status==="pending"?(r(),d("div",it,[e("button",{onClick:p=>a.$emit("update-status",l.id,"confirmed"),class:"btn-success text-xs"},o(t.__("confirm")),9,lt),e("button",{onClick:p=>a.$emit("update-status",l.id,"cancelled"),class:"btn-danger text-xs"},o(t.__("cancel")),9,rt)])):l.status==="confirmed"?(r(),d("div",dt,[e("button",{onClick:p=>a.$emit("update-status",l.id,"completed"),class:"btn-success text-xs"},o(t.__("mark_complete")),9,ct),e("button",{onClick:p=>a.$emit("update-status",l.id,"cancelled"),class:"btn-danger text-xs"}," Cancel ",8,_t)])):g("",!0),t.canShowMeetingButton(l)?(r(),d("button",{key:2,onClick:p=>t.handleMeetingAction(l),class:j([t.getMeetingButtonClass(l),"text-xs w-full"]),disabled:!t.isMeetingAvailable(l)&&!t.isTestModeActiveForBooking(l)},o(t.getMeetingButtonText(l,"host")),11,mt)):g("",!0)])):c.showAttendeeActions?(r(),d("div",ut,[e("button",{onClick:p=>a.$emit("view-details",l.id),class:"btn-secondary text-xs w-full"}," View Details ",8,gt),t.canShowMeetingButton(l)?(r(),d("button",{key:0,onClick:p=>t.handleMeetingAction(l),class:j([t.getMeetingButtonClass(l),"text-xs w-full"]),disabled:!t.isMeetingAvailable(l)&&!t.isTestModeActiveForBooking(l)},o(t.getMeetingButtonText(l,"attendee")),11,ft)):g("",!0)])):g("",!0)])]))),128))])):(r(),d("div",je,[s[0]||(s[0]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a2 2 0 012-2h4a2 2 0 012 2v4m-6 4v10m6-10v10m-6 0h6"})],-1)),e("h3",Te,o(t.__("no_bookings_found")),1),e("p",Se,o(t.__("no_bookings_match")),1)]))])}const vt=ne(De,[["render",ht]]),yt={name:"JoinLinksList",props:{joinLinks:{type:Array,default:()=>[]}},emits:["copy-link","send-link","disable-link","enable-link","delete-link","test-host-link"],setup(){return{formatDateTime:ae,getLinkStatusClass:t=>({active:"badge-success",disabled:"badge-warning",expired:"badge-danger",pending:"badge-secondary"})[t]||"badge-secondary",getLinkStatusText:t=>({active:"Active",disabled:"Disabled",expired:"Expired",pending:"Pending"})[t]||t,testHostLink:t=>{t.join_url&&window.open(t.join_url,"_blank","noopener,noreferrer")}}}},pt={class:"space-y-4"},bt={key:0,class:"text-center py-12"},xt={key:1,class:"space-y-4"},kt={class:"card-body"},wt={class:"flex items-start justify-between"},Ct={class:"flex-1"},Mt={class:"flex items-center space-x-3 mb-3"},Lt={class:"text-lg font-medium text-gray-900"},Bt={key:0,class:"badge badge-secondary"},Dt={class:"space-y-2 text-sm text-gray-600"},At={class:"flex items-center"},jt={class:"bg-gray-100 px-2 py-1 rounded text-xs font-mono"},Tt={key:0,class:"flex items-center"},St={key:1,class:"flex items-center"},Vt={key:2,class:"flex items-center"},Ut={key:3,class:"flex items-center"},zt={key:4,class:"flex items-center"},Ht={key:0},Jt={key:0,class:"mt-3 text-sm text-gray-600"},Et={class:"italic"},Pt={class:"flex flex-col space-y-2 ml-4"},$t=["onClick","disabled"],qt=["onClick","disabled"],Nt=["onClick","disabled"],Ot=["onClick"],Ft=["onClick"],It=["onClick"],Wt={key:0,class:"mt-4 pt-4 border-t border-gray-200"},Kt={class:"space-y-1"};function Rt(a,s,c,t,L,_){return r(),d("div",pt,[c.joinLinks.length?(r(),d("div",xt,[(r(!0),d(P,null,$(c.joinLinks,n=>(r(),d("div",{key:n.id,class:"card hover:shadow-md transition-shadow duration-200"},[e("div",kt,[e("div",wt,[e("div",Ct,[e("div",Mt,[e("h4",Lt,o(n.title||"Join Link"),1),e("span",{class:j([t.getLinkStatusClass(n.status),"badge"])},o(t.getLinkStatusText(n.status)),3),n.type?(r(),d("span",Bt,o(n.type),1)):g("",!0)]),e("div",Dt,[e("div",At,[s[1]||(s[1]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z","clip-rule":"evenodd"})],-1)),e("code",jt,o(n.url),1)]),n.meeting_title?(r(),d("div",Tt,[s[2]||(s[2]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})],-1)),z(" "+o(n.meeting_title),1)])):g("",!0),n.meeting_date?(r(),d("div",St,[s[3]||(s[3]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),z(" "+o(t.formatDateTime(n.meeting_date)),1)])):g("",!0),n.created_at?(r(),d("div",Vt,[s[4]||(s[4]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1)),z(" Created "+o(t.formatDateTime(n.created_at)),1)])):g("",!0),n.expires_at?(r(),d("div",Ut,[s[5]||(s[5]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),z(" Expires "+o(t.formatDateTime(n.expires_at)),1)])):g("",!0),n.usage_count!==void 0?(r(),d("div",zt,[s[6]||(s[6]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),z(" Used "+o(n.usage_count)+" time"+o(n.usage_count!==1?"s":"")+" ",1),n.max_uses?(r(),d("span",Ht," (max "+o(n.max_uses)+")",1)):g("",!0)])):g("",!0)]),n.description?(r(),d("div",Jt,[e("p",Et,o(n.description),1)])):g("",!0)]),e("div",Pt,[e("button",{onClick:l=>a.$emit("copy-link",n.url),class:"btn-primary text-xs",disabled:n.status==="expired"||n.status==="disabled"},s[7]||(s[7]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),e("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})],-1),z(" Copy ",-1)]),8,$t),e("button",{onClick:l=>a.$emit("send-link",n.id),class:"btn-secondary text-xs",disabled:n.status==="expired"||n.status==="disabled"},s[8]||(s[8]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})],-1),z(" Send ",-1)]),8,qt),e("button",{onClick:l=>a.$emit("test-host-link",n),class:"btn-success text-xs",disabled:n.status==="expired"||n.status==="disabled",title:"Test host meeting link (opens in new tab)"}," Test Host ",8,Nt),n.status==="active"?(r(),d("button",{key:0,onClick:l=>a.$emit("disable-link",n.id),class:"btn-warning text-xs"}," Disable ",8,Ot)):n.status==="disabled"?(r(),d("button",{key:1,onClick:l=>a.$emit("enable-link",n.id),class:"btn-success text-xs"}," Enable ",8,Ft)):g("",!0),e("button",{onClick:l=>a.$emit("delete-link",n.id),class:"btn-danger text-xs"}," Delete ",8,It)])]),n.usage_stats&&n.usage_stats.length?(r(),d("div",Wt,[s[9]||(s[9]=e("h5",{class:"text-sm font-medium text-gray-900 mb-2"},"Recent Usage",-1)),e("div",Kt,[(r(!0),d(P,null,$(n.usage_stats.slice(0,3),l=>(r(),d("div",{key:l.id,class:"flex justify-between text-xs text-gray-600"},[e("span",null,o(l.attendee_name||l.attendee_email),1),e("span",null,o(t.formatDateTime(l.used_at)),1)]))),128))])])):g("",!0)])]))),128))])):(r(),d("div",bt,s[0]||(s[0]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No join links found",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Create your first join link to get started.",-1)])))])}const Gt=ne(yt,[["render",Rt]]),Qt={name:"BookingDetailsModal",props:{booking:{type:Object,default:null}},emits:["close","send-email"],setup(a,{emit:s}){return oe(()=>a.booking,(h,u)=>{},{immediate:!0,deep:!0}),{formatDateTime:ae,formatDate:h=>h?new Date(h).toLocaleDateString():f("not_available"),formatTime:h=>h?new Date(h).toLocaleTimeString():f("not_available"),formatFieldName:h=>h.replace(/_/g," ").replace(/\b\w/g,u=>u.toUpperCase()),getStatusClass:ue,getStatusText:me,copyJoinLink:h=>B(this,null,function*(){(yield ge(h))?(s("link-copied"),s("show-alert","success",f("join_link_copied"))):s("show-alert","error",f("failed_copy_link"))}),sendEmail:()=>{s("send-email",a.booking)},getAttendeeName:h=>!h||!Array.isArray(h)||h.length===0?f("not_available"):h[0].attendee_name||h[0].name||f("not_available"),getAttendeeEmail:h=>!h||!Array.isArray(h)||h.length===0?f("not_available"):h[0].email||f("not_available"),formatLocation:h=>{if(!h)return f("not_available");try{const u=JSON.parse(h),A=Object.keys(u);return A.length===0?f("not_available"):u[A[0]].location||A[0]}catch(u){return h}}}}},Xt={class:"modal-header"},Yt={class:"modal-title"},Zt={class:"modal-body"},es={key:0,class:"space-y-6"},ts={class:"bg-gray-50 p-4 rounded-lg"},ss={class:"text-lg font-medium text-gray-900 mb-4"},os={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ns={class:"form-label"},as={class:"text-gray-700"},is={class:"form-label"},ls={class:"text-gray-700"},rs={class:"form-label"},ds={class:"text-gray-700"},cs={class:"form-label"},_s={class:"text-gray-700"},ms={class:"form-label"},us={class:"text-gray-700"},gs={class:"form-label"},fs={key:0,class:"md:col-span-2"},hs={class:"form-label"},vs={class:"text-gray-700"},ys={class:"bg-blue-50 p-4 rounded-lg"},ps={class:"text-lg font-medium text-gray-900 mb-4"},bs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xs={class:"form-label"},ks={class:"text-gray-700"},ws={class:"form-label"},Cs={class:"text-gray-700"},Ms={class:"form-label"},Ls={class:"text-gray-700"},Bs={class:"form-label"},Ds={class:"text-gray-700"},As={class:"form-label"},js={class:"text-gray-700"},Ts={key:0,class:"md:col-span-2"},Ss={class:"form-label"},Vs={class:"text-gray-700"},Us={class:"md:col-span-2"},zs={class:"form-label"},Hs={class:"text-gray-700"},Js={key:0,class:"bg-green-50 p-4 rounded-lg"},Es={class:"text-lg font-medium text-gray-900 mb-4"},Ps={class:"space-y-3"},$s={class:"flex-1"},qs={class:"flex items-center justify-between"},Ns={class:"text-sm font-medium text-gray-900"},Os={class:"text-xs text-gray-500"},Fs={key:0,class:"text-sm text-gray-600 mt-1"},Is={key:1,class:"bg-purple-50 p-4 rounded-lg"},Ws={class:"text-lg font-medium text-gray-900 mb-4"},Ks={class:"bg-white px-3 py-2 rounded border text-sm font-mono"},Rs=["onClick"],Gs={key:2,class:"bg-yellow-50 p-4 rounded-lg"},Qs={class:"text-lg font-medium text-gray-900 mb-4"},Xs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ys={class:"form-label"},Zs={class:"text-gray-700"},eo={key:1,class:"text-center py-8"},to={class:"text-gray-600"},so={class:"modal-footer"};function oo(a,s,c,t,L,_){var n,l,p,T,h,u,A,V,q,F,y,J,E,I,ee,W,i,v,k,b,N,te;return r(),d("div",{class:"modal-overlay",onClick:s[4]||(s[4]=D=>a.$emit("close"))},[e("div",{class:"modal-content",onClick:s[3]||(s[3]=ce(()=>{},["stop"]))},[e("div",Xt,[e("h3",Yt,o(a.__("booking_details")),1),e("button",{onClick:s[0]||(s[0]=D=>a.$emit("close")),class:"modal-close"},s[5]||(s[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Zt,[c.booking?(r(),d("div",es,[e("div",ts,[e("h4",ss,o(a.__("meeting_details")),1),e("div",os,[e("div",null,[e("label",ns,o(a.__("meeting_title")),1),e("p",as,o(((n=c.booking.data)==null?void 0:n.meeting_title)||a.__("not_available")),1)]),e("div",null,[e("label",is,o(a.__("date")),1),e("p",ls,o(((l=c.booking.data)==null?void 0:l.meeting_dates)||a.__("not_available")),1)]),e("div",null,[e("label",rs,o(a.__("time")),1),e("p",ds,o(((p=c.booking.data)==null?void 0:p.start_time)||a.__("not_available"))+" - "+o(((T=c.booking.data)==null?void 0:T.end_time)||a.__("not_available")),1)]),e("div",null,[e("label",cs,o(a.__("duration")),1),e("p",_s,o(((h=c.booking.data)==null?void 0:h.duration)||a.__("not_available"))+" "+o(a.__("minutes")),1)]),e("div",null,[e("label",ms,o(a.__("booking_type")),1),e("p",us,o(((u=c.booking.data)==null?void 0:u.booking_type)||a.__("not_available")),1)]),e("div",null,[e("label",gs,o(a.__("status")),1),e("span",{class:j([t.getStatusClass((A=c.booking.data)==null?void 0:A.status),"badge"])},o(t.getStatusText((V=c.booking.data)==null?void 0:V.status)||((q=c.booking.data)==null?void 0:q.status)||a.__("not_available")),3)]),(F=c.booking.data)!=null&&F.internal_note?(r(),d("div",fs,[e("label",hs,o(a.__("internal_note")),1),e("p",vs,o(c.booking.data.internal_note),1)])):g("",!0)])]),e("div",ys,[e("h4",ps,o(a.__("attendee_details")),1),e("div",bs,[e("div",null,[e("label",xs,o(a.__("name")),1),e("p",ks,o(t.getAttendeeName((y=c.booking.data)==null?void 0:y.attendees)||a.__("not_available")),1)]),e("div",null,[e("label",ws,o(a.__("email")),1),e("p",Cs,o(t.getAttendeeEmail((J=c.booking.data)==null?void 0:J.attendees)||a.__("not_available")),1)]),e("div",null,[e("label",Ms,o(a.__("attendee_id")),1),e("p",Ls,o(((E=c.booking.data)==null?void 0:E.attendee_id)||a.__("not_available")),1)]),e("div",null,[e("label",Bs,o(a.__("booking_id")),1),e("p",Ds,o(((I=c.booking.data)==null?void 0:I.id)||((ee=c.booking.data)==null?void 0:ee.booking_id)||a.__("not_available")),1)]),e("div",null,[e("label",As,o(a.__("created_at")),1),e("p",js,o(t.formatDateTime((W=c.booking.data)==null?void 0:W.created_at)||a.__("not_available")),1)]),(i=c.booking.data)!=null&&i.attendee_comment?(r(),d("div",Ts,[e("label",Ss,o(a.__("comment")),1),e("p",Vs,o(c.booking.data.attendee_comment),1)])):g("",!0),e("div",Us,[e("label",zs,o(a.__("booked_at")),1),e("p",Hs,o(t.formatDateTime((v=c.booking.data)==null?void 0:v.created_at)),1)])])]),(k=c.booking.data)!=null&&k.activity&&c.booking.data.activity.length?(r(),d("div",Js,[e("h4",Es,o(a.__("activity_details")),1),e("div",Ps,[(r(!0),d(P,null,$(c.booking.data.activity,D=>(r(),d("div",{key:D.id,class:"flex items-start space-x-3 p-3 bg-white rounded border"},[s[6]||(s[6]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-2 h-2 bg-green-400 rounded-full mt-2"})],-1)),e("div",$s,[e("div",qs,[e("p",Ns,o(D.action),1),e("p",Os,o(t.formatDateTime(D.created_at)),1)]),D.description?(r(),d("p",Fs,o(D.description),1)):g("",!0)])]))),128))])])):g("",!0),(b=c.booking.data)!=null&&b.join_links&&c.booking.data.join_links.length>0?(r(),d("div",Is,[e("h4",Ws,o(a.__("join_links")),1),(r(!0),d(P,null,$(c.booking.data.join_links,(D,G)=>(r(),d("div",{key:G,class:"flex items-center justify-between mb-2"},[e("code",Ks,o(D),1),e("button",{onClick:fe=>t.copyJoinLink(D),class:"btn-primary ml-3"},[s[7]||(s[7]=e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),e("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})],-1)),z(" "+o(a.__("copy_link")),1)],8,Rs)]))),128))])):g("",!0),(N=c.booking.data)!=null&&N.custom_fields&&Object.keys(c.booking.data.custom_fields).length?(r(),d("div",Gs,[e("h4",Qs,o(a.__("additional_information")),1),e("div",Xs,[(r(!0),d(P,null,$(c.booking.data.custom_fields,(D,G)=>(r(),d("div",{key:G,class:"space-y-1"},[e("label",Ys,o(t.formatFieldName(G)),1),e("p",Zs,o(D||a.__("not_available")),1)]))),128))])])):g("",!0)])):(r(),d("div",eo,[s[8]||(s[8]=e("div",{class:"loading-spinner mx-auto mb-4"},null,-1)),e("p",to,o(a.__("loading_booking_details")),1)]))]),e("div",so,[e("button",{onClick:s[1]||(s[1]=D=>a.$emit("close")),class:"btn-secondary"},o(a.__("close")),1),c.booking&&t.getAttendeeEmail((te=c.booking.data)==null?void 0:te.attendees)?(r(),d("button",{key:0,onClick:s[2]||(s[2]=(...D)=>t.sendEmail&&t.sendEmail(...D)),class:"btn-primary"},o(a.__("send_email")),1)):g("",!0)])])])}const no=ne(Qt,[["render",oo]]),ao={name:"JoinLinkModal",emits:["close","save"],setup(a,{emit:s}){const c=pe("toast"),t=U(!1),L=U([]),_=Z({meeting_id:"",link_type:"one-time",max_uses:1,custom_url:"",expiration_type:"after_meeting",expiration_date:"",expiration_time:"",description:"",require_password:!1,password:"",waiting_room:!1,host_approval:!1}),n=Z({}),l=Z({show:!1,type:"",message:""}),p=ye(()=>window.location.origin),T=ye(()=>new Date().toISOString().split("T")[0]),h=(y,J)=>{c?c.showAlert(y,J):(l.show=!0,l.type=`alert-${y}`,l.message=J,setTimeout(()=>{l.show=!1},5e3))},u=()=>B(this,null,function*(){try{const y=yield H.getBookings("upcoming");L.value=y.bookings||[]}catch(y){h("error",f("failed_load_meetings"))}}),A=()=>{_.custom_url=""},V=()=>{_.custom_url&&(_.custom_url=_.custom_url.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/--+/g,"-").replace(/^-|-$/g,""))},q=()=>(Object.keys(n).forEach(y=>delete n[y]),_.meeting_id||(n.meeting_id=f("please_select_meeting")),_.link_type||(n.link_type=f("please_select_link_type")),_.link_type==="limited"&&(!_.max_uses||_.max_uses<1)&&(n.max_uses=f("max_uses_at_least_one")),_.custom_url&&(_.custom_url.length<3?n.custom_url=f("custom_url_min_length"):_.custom_url.length>50&&(n.custom_url=f("custom_url_max_length"))),_.expiration_type==="custom"&&(_.expiration_date||(n.expiration_date=f("expiration_date_required")),_.expiration_time||(n.expiration_time=f("expiration_time_required")),_.expiration_date&&_.expiration_time&&new Date(`${_.expiration_date}T${_.expiration_time}`)<=new Date&&(n.expiration_date=f("expiration_future_required"))),_.require_password&&!_.password&&(n.password=f("password_required_when_enabled")),Object.keys(n).length===0),F=()=>B(this,null,function*(){if(!q()){h("error",f("fix_errors_below"));return}t.value=!0;try{const y={meeting_id:_.meeting_id,link_type:_.link_type,max_uses:_.link_type==="limited"?_.max_uses:null,custom_url:_.custom_url||null,expiration_type:_.expiration_type,expiration_date:_.expiration_type==="custom"?_.expiration_date:null,expiration_time:_.expiration_type==="custom"?_.expiration_time:null,description:_.description||null,require_password:_.require_password,password:_.require_password?_.password:null,waiting_room:_.waiting_room,host_approval:_.host_approval};s("save",y)}catch(y){h("error",f("failed_generate_join_link"))}finally{t.value=!1}});return oe(()=>_.link_type,y=>{y!=="limited"&&(_.max_uses=1)}),oe(()=>_.require_password,y=>{y||(_.password="")}),be(u),{isSubmitting:t,availableMeetings:L,form:_,errors:n,alert:l,baseUrl:p,minExpirationDate:T,showAlert:h,loadAvailableMeetings:u,onMeetingChange:A,validateCustomUrl:V,validateForm:q,handleSubmit:F,formatDateTime:ae}}},io={class:"modal-header"},lo={class:"modal-title"},ro={class:"modal-body"},co={class:"space-y-6"},_o={for:"meeting_id",class:"form-label"},mo={value:""},uo=["value"],go={key:0,class:"form-error"},fo={class:"form-label"},ho={class:"space-y-2"},vo={class:"flex items-center"},yo={class:"ml-2"},po={class:"font-medium"},bo={class:"block text-sm text-gray-500"},xo={class:"flex items-center"},ko={class:"ml-2"},wo={class:"font-medium"},Co={class:"block text-sm text-gray-500"},Mo={class:"flex items-center"},Lo={class:"ml-2"},Bo={class:"font-medium"},Do={class:"block text-sm text-gray-500"},Ao={key:0,class:"form-error"},jo={key:0},To={for:"max_uses",class:"form-label"},So={key:0,class:"form-error"},Vo={for:"custom_url",class:"form-label"},Uo={class:"flex"},zo={class:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"},Ho={class:"text-sm text-gray-500 mt-1"},Jo={key:0,class:"form-error"},Eo={class:"form-label"},Po={class:"space-y-2"},$o={class:"flex items-center"},qo={class:"ml-2"},No={class:"flex items-center"},Oo={class:"ml-2"},Fo={class:"flex items-center"},Io={class:"ml-2"},Wo={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ko={for:"expiration_date",class:"form-label"},Ro=["min"],Go={key:0,class:"form-error"},Qo={for:"expiration_time",class:"form-label"},Xo={key:0,class:"form-error"},Yo={for:"description",class:"form-label"},Zo=["placeholder"],en={key:0,class:"form-error"},tn={class:"border-t pt-4"},sn={class:"text-lg font-medium text-gray-900 mb-3"},on={class:"space-y-2"},nn={class:"flex items-center"},an={class:"ml-2 text-sm text-gray-700"},ln={class:"flex items-center"},rn={class:"ml-2 text-sm text-gray-700"},dn={class:"flex items-center"},cn={class:"ml-2 text-sm text-gray-700"},_n={key:2},mn={for:"password",class:"form-label"},un={key:0,class:"form-error"},gn={class:"modal-footer"},fn=["disabled"],hn={key:0,class:"loading-spinner-sm mr-2"};function vn(a,s,c,t,L,_){return r(),d("div",{class:"modal-overlay",onClick:s[22]||(s[22]=n=>a.$emit("close"))},[e("div",{class:"modal-content",onClick:s[21]||(s[21]=ce(()=>{},["stop"]))},[e("div",io,[e("h3",lo,o(a.__("generate_join_link")),1),e("button",{onClick:s[0]||(s[0]=n=>a.$emit("close")),class:"modal-close"},s[23]||(s[23]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:s[20]||(s[20]=ce((...n)=>t.handleSubmit&&t.handleSubmit(...n),["prevent"]))},[e("div",ro,[t.alert.show?(r(),d("div",{key:0,class:j([t.alert.type,"mb-4"])},o(t.alert.message),3)):g("",!0),e("div",co,[e("div",null,[e("label",_o,o(a.__("select_meeting"))+" *",1),M(e("select",{id:"meeting_id","onUpdate:modelValue":s[1]||(s[1]=n=>t.form.meeting_id=n),class:j(["form-input",{"border-red-500":t.errors.meeting_id}]),required:"",onChange:s[2]||(s[2]=(...n)=>t.onMeetingChange&&t.onMeetingChange(...n))},[e("option",mo,o(a.__("choose_meeting")),1),(r(!0),d(P,null,$(t.availableMeetings,n=>(r(),d("option",{key:n.id,value:n.id},o(n.title)+" - "+o(t.formatDateTime(n.date_time)),9,uo))),128))],34),[[Ce,t.form.meeting_id]]),t.errors.meeting_id?(r(),d("p",go,o(t.errors.meeting_id),1)):g("",!0)]),e("div",null,[e("label",fo,o(a.__("link_type"))+" *",1),e("div",ho,[e("label",vo,[M(e("input",{"onUpdate:modelValue":s[3]||(s[3]=n=>t.form.link_type=n),type:"radio",value:"one-time",class:"form-radio"},null,512),[[Q,t.form.link_type]]),e("span",yo,[e("span",po,o(a.__("one_time_link")),1),e("span",bo,o(a.__("can_only_used_once")),1)])]),e("label",xo,[M(e("input",{"onUpdate:modelValue":s[4]||(s[4]=n=>t.form.link_type=n),type:"radio",value:"reusable",class:"form-radio"},null,512),[[Q,t.form.link_type]]),e("span",ko,[e("span",wo,o(a.__("reusable_link")),1),e("span",Co,o(a.__("can_used_multiple_times")),1)])]),e("label",Mo,[M(e("input",{"onUpdate:modelValue":s[5]||(s[5]=n=>t.form.link_type=n),type:"radio",value:"limited",class:"form-radio"},null,512),[[Q,t.form.link_type]]),e("span",Lo,[e("span",Bo,o(a.__("limited_use_link")),1),e("span",Do,o(a.__("can_used_specific_times")),1)])])]),t.errors.link_type?(r(),d("p",Ao,o(t.errors.link_type),1)):g("",!0)]),t.form.link_type==="limited"?(r(),d("div",jo,[e("label",To,o(a.__("maximum_uses"))+" *",1),M(e("input",{id:"max_uses","onUpdate:modelValue":s[6]||(s[6]=n=>t.form.max_uses=n),type:"number",min:"1",max:"100",class:j(["form-input",{"border-red-500":t.errors.max_uses}]),required:""},null,2),[[X,t.form.max_uses,void 0,{number:!0}]]),t.errors.max_uses?(r(),d("p",So,o(t.errors.max_uses),1)):g("",!0)])):g("",!0),e("div",null,[e("label",Vo,o(a.__("custom_url_optional")),1),e("div",Uo,[e("span",zo,o(t.baseUrl)+"/join/ ",1),M(e("input",{id:"custom_url","onUpdate:modelValue":s[7]||(s[7]=n=>t.form.custom_url=n),type:"text",class:j(["form-input rounded-l-none",{"border-red-500":t.errors.custom_url}]),placeholder:"my-meeting-link",onInput:s[8]||(s[8]=(...n)=>t.validateCustomUrl&&t.validateCustomUrl(...n))},null,34),[[X,t.form.custom_url]])]),e("p",Ho,o(a.__("leave_blank_random_url")),1),t.errors.custom_url?(r(),d("p",Jo,o(t.errors.custom_url),1)):g("",!0)]),e("div",null,[e("label",Eo,o(a.__("link_expiration")),1),e("div",Po,[e("label",$o,[M(e("input",{"onUpdate:modelValue":s[9]||(s[9]=n=>t.form.expiration_type=n),type:"radio",value:"never",class:"form-radio"},null,512),[[Q,t.form.expiration_type]]),e("span",qo,o(a.__("never_expires")),1)]),e("label",No,[M(e("input",{"onUpdate:modelValue":s[10]||(s[10]=n=>t.form.expiration_type=n),type:"radio",value:"after_meeting",class:"form-radio"},null,512),[[Q,t.form.expiration_type]]),e("span",Oo,o(a.__("expires_after_meeting")),1)]),e("label",Fo,[M(e("input",{"onUpdate:modelValue":s[11]||(s[11]=n=>t.form.expiration_type=n),type:"radio",value:"custom",class:"form-radio"},null,512),[[Q,t.form.expiration_type]]),e("span",Io,o(a.__("custom_expiration_date")),1)])])]),t.form.expiration_type==="custom"?(r(),d("div",Wo,[e("div",null,[e("label",Ko,o(a.__("expiration_date"))+" *",1),M(e("input",{id:"expiration_date","onUpdate:modelValue":s[12]||(s[12]=n=>t.form.expiration_date=n),type:"date",class:j(["form-input",{"border-red-500":t.errors.expiration_date}]),min:t.minExpirationDate,required:""},null,10,Ro),[[X,t.form.expiration_date]]),t.errors.expiration_date?(r(),d("p",Go,o(t.errors.expiration_date),1)):g("",!0)]),e("div",null,[e("label",Qo,o(a.__("expiration_time"))+" *",1),M(e("input",{id:"expiration_time","onUpdate:modelValue":s[13]||(s[13]=n=>t.form.expiration_time=n),type:"time",class:j(["form-input",{"border-red-500":t.errors.expiration_time}]),required:""},null,2),[[X,t.form.expiration_time]]),t.errors.expiration_time?(r(),d("p",Xo,o(t.errors.expiration_time),1)):g("",!0)])])):g("",!0),e("div",null,[e("label",Yo,o(a.__("description_optional")),1),M(e("textarea",{id:"description","onUpdate:modelValue":s[14]||(s[14]=n=>t.form.description=n),rows:"3",class:j(["form-input",{"border-red-500":t.errors.description}]),placeholder:a.__("add_description_join_link")},null,10,Zo),[[X,t.form.description]]),t.errors.description?(r(),d("p",en,o(t.errors.description),1)):g("",!0)]),e("div",tn,[e("h4",sn,o(a.__("security_options")),1),e("div",on,[e("label",nn,[M(e("input",{"onUpdate:modelValue":s[15]||(s[15]=n=>t.form.require_password=n),type:"checkbox",class:"form-checkbox"},null,512),[[re,t.form.require_password]]),e("span",an,o(a.__("require_password_join")),1)]),e("label",ln,[M(e("input",{"onUpdate:modelValue":s[16]||(s[16]=n=>t.form.waiting_room=n),type:"checkbox",class:"form-checkbox"},null,512),[[re,t.form.waiting_room]]),e("span",rn,o(a.__("enable_waiting_room")),1)]),e("label",dn,[M(e("input",{"onUpdate:modelValue":s[17]||(s[17]=n=>t.form.host_approval=n),type:"checkbox",class:"form-checkbox"},null,512),[[re,t.form.host_approval]]),e("span",cn,o(a.__("require_host_approval")),1)])])]),t.form.require_password?(r(),d("div",_n,[e("label",mn,o(a.__("meeting_password"))+" *",1),M(e("input",{id:"password","onUpdate:modelValue":s[18]||(s[18]=n=>t.form.password=n),type:"password",class:j(["form-input",{"border-red-500":t.errors.password}]),required:""},null,2),[[X,t.form.password]]),t.errors.password?(r(),d("p",un,o(t.errors.password),1)):g("",!0)])):g("",!0)])]),e("div",gn,[e("button",{type:"button",onClick:s[19]||(s[19]=n=>a.$emit("close")),class:"btn-secondary"},o(a.__("cancel")),1),e("button",{type:"submit",class:"btn-primary",disabled:t.isSubmitting},[t.isSubmitting?(r(),d("div",hn)):g("",!0),z(" "+o(t.isSubmitting?a.__("generating"):a.__("generate_link")),1)],8,fn)])],32)])])}const yn=ne(ao,[["render",vn]]),pn={name:"HostDashboard",components:{BookingsList:vt,JoinLinksList:Gt,BookingDetailsModal:no,JoinLinkModal:yn,ProfileModal:Me},setup(){var he;const a=pe("toast"),s=U(!1),c=U("bookings"),t=U([]),L=U([]),_=Z({}),n=Z({}),l=Z({show:!1,type:"",message:""}),p=U("today"),T=U(((he=window.hbcHostData)==null?void 0:he.logoutUrl)||"/wp-login.php?action=logout"),h=U(!1),u=U(!1),A=U(!1),V=U(null),q=[{id:"bookings",name:f("bookings")},{id:"join-links",name:f("join_links")},{id:"profile",name:f("profile")}],F=[{id:"today",name:f("today_filter"),icon:"clock"},{id:"completed",name:f("completed_filter"),icon:"check"},{id:"cancelled",name:f("cancelled_filter"),icon:"x"},{id:"history",name:f("all_history_filter"),icon:"archive"}],y=(m,x)=>{a?a.showAlert(m,x):(l.show=!0,l.type=`alert-${m}`,l.message=x,setTimeout(()=>{l.show=!1},5e3))},J=()=>{l.show=!1},E=(m="upcoming")=>B(this,null,function*(){try{s.value=!0;let x=m;(m==="history"||m==="completed"||m==="cancelled")&&(x="past");const C=yield H.getBookings(x);let w=C&&C.bookings&&Array.isArray(C.bookings)?C.bookings:[];const K=new Date().toISOString().split("T")[0],za=new Date;m==="today"?w=w.filter(S=>S.meeting_dates===K&&(S.status==="confirmed"||S.status==="pending")):m==="upcoming"?w=w.filter(S=>{const se=S.meeting_dates,ve=new Date(se+" "+(S.start_time||"00:00:00"));return se>K&&(S.status==="confirmed"||S.status==="pending")}):m==="completed"?w=w.filter(S=>{if(S.status==="completed")return!0;const se=S.meeting_dates,ve=S.end_time||"23:59:59";return new Date(se+" "+ve)<new Date}):m==="cancelled"&&(w=w.filter(S=>S.status==="cancelled"||S.status==="canceled")),t.value=w}catch(x){console.error("Bookings load error:",x),y("error",R(x))}finally{s.value=!1}}),I=()=>B(this,null,function*(){try{const m=yield H.getJoinLinks();L.value=m.join_links||(Array.isArray(m)?m:[])}catch(m){console.error("Join links load error:",m),y("error",R(m))}}),ee=()=>B(this,null,function*(){try{const m=yield H.getProfile();if(m&&m.profile){const x=m.profile,C=x.host_data||{};Object.assign(_,{first_name:x.first_name||C.first_name||"",last_name:x.last_name||C.last_name||"",email:x.email||C.email||"",display_name:x.display_name||"",phone:C.phone_number||"",bio:x.description||C.about||"",avatar:C.avatar||"",featured_image:C.featured_image||"",status:C.status||"",availability_type:C.availability_type||"",availability_id:C.availability_id||""})}}catch(m){console.error("Profile load error:",m),y("error",R(m))}}),W=()=>B(this,null,function*(){try{const m=yield H.getStats();Object.assign(n,m||{})}catch(m){console.error("Failed to load stats:",m),y("error",f("failed_load_statistics"))}}),i=(m,x)=>B(this,null,function*(){try{s.value=!0,yield H.updateBookingStatus(m,x),y("success",f("booking_status_updated").replace("{status}",x)),yield E(c.value),yield W()}catch(C){y("error",R(C))}finally{s.value=!1}}),v=m=>B(this,null,function*(){var x,C;try{const w=yield H.getBookingDetails(m);let K=null;w&&w.data?K=w.data:w&&w.booking?K=w.booking:w&&(K=w),V.value=K,h.value=!0}catch(w){console.error("Error fetching booking details:",w),y("error",f("booking_details_error")+(((C=(x=w.response)==null?void 0:x.data)==null?void 0:C.message)||w.message))}}),k=()=>{u.value=!0},b=m=>B(this,null,function*(){try{s.value=!0,yield H.generateJoinLink(m.meetingId,m.linkType,m.customUrl),u.value=!1,y("success",f("join_link_generated")),yield I(),yield W()}catch(x){y("error",R(x))}finally{s.value=!1}}),N=m=>B(this,null,function*(){try{s.value=!0,yield H.sendJoinLink(m),y("success",f("join_link_sent"))}catch(x){y("error",R(x))}finally{s.value=!1}}),te=m=>B(this,null,function*(){(yield ge(m))?y("success",f("join_link_copied")):y("error",f("failed_copy_link"))}),D=()=>{A.value=!0},G=m=>B(this,null,function*(){try{s.value=!0,yield H.updateProfile(m),Object.assign(_,m),A.value=!1,y("success",f("profile_updated"))}catch(x){y("error",R(x))}finally{s.value=!1}}),fe=()=>B(this,null,function*(){s.value=!0;try{yield Promise.all([E(p.value),I(),ee(),W()])}catch(m){y("error",f("failed_load_dashboard"))}finally{s.value=!1}});oe(c,m=>{m==="bookings"?E(p.value):m==="join-links"&&I()}),oe(p,m=>{c.value==="bookings"&&E(m)});const xe=()=>B(this,null,function*(){if(confirm(f("logout_confirmation")))try{const x=yield(yield fetch(window.hbcHostData.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`action=hbc_logout&nonce=${window.hbcHostData.logoutNonce}`})).json();x.success?window.location.href=x.data.login_url:y("error",f("logout_failed_retry"))}catch(m){console.error("Error:",m),y("error",f("logout_failed_retry"))}});return be(fe),{isLoading:s,activeTab:c,activeFilter:p,bookings:t,joinLinks:L,profile:_,stats:n,alert:l,showBookingModal:h,showJoinLinkModal:u,showProfileModal:A,selectedBooking:V,tabs:q,filters:F,logoutUrl:T,showAlert:y,clearAlert:J,loadBookings:E,updateBookingStatus:i,viewBookingDetails:v,openJoinLinkModal:k,generateJoinLink:b,sendJoinLink:N,copyJoinLink:te,openProfileModal:D,updateProfile:G,handleLogout:xe,formatDateTime:ae,getStatusClass:ue,getStatusText:me,__:f}}},bn={class:"min-h-screen bg-gray-50 py-8"},xn={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},kn={class:"bg-white p-6 rounded-lg shadow-lg"},wn={class:"flex items-center space-x-3"},Cn={class:"text-gray-700"},Mn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ln={class:"mb-8 hbc-dashboard-header"},Bn={class:"hbc-header-content"},Dn={class:"hbc-header-text"},An={class:"text-3xl font-bold text-gray-900"},jn={class:"mt-2 text-gray-600"},Tn={class:"hbc-header-actions"},Sn={class:"flex justify-between items-center"},Vn={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Un={class:"card"},zn={class:"card-body"},Hn={class:"flex items-center"},Jn={class:"ml-4"},En={class:"text-2xl font-semibold text-gray-900"},Pn={class:"text-sm text-gray-600"},$n={class:"card"},qn={class:"card-body"},Nn={class:"flex items-center"},On={class:"ml-4"},Fn={class:"text-2xl font-semibold text-gray-900"},In={class:"text-sm text-gray-600"},Wn={class:"card"},Kn={class:"card-body"},Rn={class:"flex items-center"},Gn={class:"ml-4"},Qn={class:"text-2xl font-semibold text-gray-900"},Xn={class:"text-sm text-gray-600"},Yn={class:"tab-nav mb-6"},Zn={class:"flex space-x-8"},ea=["onClick"],ta={class:"bg-white rounded-lg shadow"},sa={class:"p-6"},oa={class:"flex justify-between items-center mb-6"},na={class:"text-lg font-medium text-gray-900"},aa={class:"flex flex-wrap gap-2 mb-6"},ia=["onClick"],la={key:0,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},ra={key:1,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},da={key:2,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},ca={key:3,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},_a={key:4,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},ma={class:"p-6"},ua={class:"flex justify-between items-center mb-6"},ga={class:"text-lg font-medium text-gray-900"},fa={class:"p-6"},ha={class:"flex justify-between items-center mb-6"},va={class:"text-lg font-medium text-gray-900"},ya={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},pa={class:"form-label"},ba={class:"text-gray-700"},xa={class:"form-label"},ka={class:"text-gray-700"},wa={class:"form-label"},Ca={class:"text-gray-700"},Ma={class:"form-label"},La={class:"text-gray-700"},Ba={class:"md:col-span-2"},Da={class:"form-label"},Aa={class:"text-gray-700"},ja={class:"p-6"},Ta={class:"flex justify-between items-center mb-6"},Sa={class:"text-lg font-medium text-gray-900"};function Va(a,s,c,t,L,_){const n=Y("BookingsList"),l=Y("JoinLinksList"),p=Y("BookingDetailsModal"),T=Y("JoinLinkModal"),h=Y("ProfileModal");return r(),d("div",bn,[t.isLoading?(r(),d("div",xn,[e("div",kn,[e("div",wn,[s[9]||(s[9]=e("div",{class:"loading-spinner"},null,-1)),e("span",Cn,o(t.__("loading")),1)])])])):g("",!0),e("div",Mn,[e("div",Ln,[e("div",Bn,[e("div",Dn,[e("h1",An,o(t.__("host_dashboard")),1),e("p",jn,o(t.__("manage_meetings_bookings")),1)]),e("div",Tn,[e("button",{onClick:s[0]||(s[0]=(...u)=>t.handleLogout&&t.handleLogout(...u)),class:"hbc-logout-btn"},o(t.__("logout")),1)])])]),t.alert.show?(r(),d("div",{key:0,class:j([t.alert.type,"mb-6 animate-fade-in"])},[e("div",Sn,[e("span",null,o(t.alert.message),1),e("button",{onClick:s[1]||(s[1]=(...u)=>t.clearAlert&&t.clearAlert(...u)),class:"text-lg leading-none hover:opacity-75"},"Ã—")])],2)):g("",!0),e("div",Vn,[e("div",Un,[e("div",zn,[e("div",Hn,[s[10]||(s[10]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})])])],-1)),e("div",Jn,[e("p",En,o(t.stats.today_meetings||0),1),e("p",Pn,o(t.__("todays_meetings")),1)])])])]),e("div",$n,[e("div",qn,[e("div",Nn,[s[11]||(s[11]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-success-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-success-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])])],-1)),e("div",On,[e("p",Fn,o(t.stats.completed_meetings||0),1),e("p",In,o(t.__("completed")),1)])])])]),e("div",Wn,[e("div",Kn,[e("div",Rn,[s[12]||(s[12]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z","clip-rule":"evenodd"})])])],-1)),e("div",Gn,[e("p",Qn,o(t.stats.active_join_links||0),1),e("p",Xn,o(t.__("active_links")),1)])])])])]),e("div",Yn,[e("nav",Zn,[(r(!0),d(P,null,$(t.tabs,u=>(r(),d("button",{key:u.id,onClick:A=>t.activeTab=u.id,class:j(["py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200",t.activeTab===u.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},o(u.name),11,ea))),128))])]),e("div",ta,[M(e("div",sa,[e("div",oa,[e("h3",na,o(t.__("bookings")),1),e("button",{onClick:s[2]||(s[2]=u=>t.loadBookings(t.activeFilter)),class:"btn-primary"},[s[13]||(s[13]=e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1)),z(" "+o(t.__("refresh")),1)])]),e("div",aa,[(r(!0),d(P,null,$(t.filters,u=>(r(),d("button",{key:u.id,onClick:A=>t.activeFilter=u.id,class:j(["inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",t.activeFilter===u.id?"bg-primary-100 text-primary-700 border border-primary-200":"bg-gray-100 text-gray-700 border border-gray-200 hover:bg-gray-200"])},[u.icon==="calendar"?(r(),d("svg",la,s[14]||(s[14]=[e("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"},null,-1)]))):u.icon==="clock"?(r(),d("svg",ra,s[15]||(s[15]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"},null,-1)]))):u.icon==="check"?(r(),d("svg",da,s[16]||(s[16]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):u.icon==="x"?(r(),d("svg",ca,s[17]||(s[17]=[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):u.icon==="archive"?(r(),d("svg",_a,s[18]||(s[18]=[e("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"},null,-1),e("path",{"fill-rule":"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z","clip-rule":"evenodd"},null,-1)]))):g("",!0),z(" "+o(u.name),1)],10,ia))),128))]),le(n,{bookings:t.bookings,"show-actions":!0,onUpdateStatus:t.updateBookingStatus,onViewDetails:t.viewBookingDetails},null,8,["bookings","onUpdateStatus","onViewDetails"])],512),[[ie,t.activeTab==="bookings"]]),M(e("div",ma,[e("div",ua,[e("h3",ga,o(t.__("join_links_management")),1),e("button",{onClick:s[3]||(s[3]=(...u)=>t.openJoinLinkModal&&t.openJoinLinkModal(...u)),class:"btn-primary"},o(t.__("generate_new_link")),1)]),le(l,{"join-links":t.joinLinks,onSendLink:t.sendJoinLink,onCopyLink:t.copyJoinLink},null,8,["join-links","onSendLink","onCopyLink"])],512),[[ie,t.activeTab==="join-links"]]),M(e("div",fa,[e("div",ha,[e("h3",va,o(t.__("profile_settings")),1),e("button",{onClick:s[4]||(s[4]=(...u)=>t.openProfileModal&&t.openProfileModal(...u)),class:"btn-primary"},[s[19]||(s[19]=e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)),z(" "+o(t.__("edit_profile")),1)])]),e("div",ya,[e("div",null,[e("label",pa,o(t.__("first_name")),1),e("p",ba,o(t.profile.first_name||t.__("not_set")),1)]),e("div",null,[e("label",xa,o(t.__("last_name")),1),e("p",ka,o(t.profile.last_name||t.__("not_set")),1)]),e("div",null,[e("label",wa,o(t.__("email")),1),e("p",Ca,o(t.profile.email||t.__("not_set")),1)]),e("div",null,[e("label",Ma,o(t.__("phone")),1),e("p",La,o(t.profile.phone||t.__("not_set")),1)]),e("div",Ba,[e("label",Da,o(t.__("bio")),1),e("p",Aa,o(t.profile.bio||t.__("not_set")),1)])])],512),[[ie,t.activeTab==="profile"]]),M(e("div",ja,[e("div",Ta,[e("h3",Sa,o(t.__("meeting_history")),1),e("button",{onClick:s[5]||(s[5]=u=>t.loadBookings("history")),class:"btn-primary"},[s[20]||(s[20]=e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1)),z(" "+o(t.__("refresh")),1)])]),le(n,{bookings:t.bookings,"show-actions":!1},null,8,["bookings"])],512),[[ie,t.activeTab==="history"]])])]),t.showBookingModal?(r(),de(p,{key:1,booking:t.selectedBooking,onClose:s[6]||(s[6]=u=>t.showBookingModal=!1)},null,8,["booking"])):g("",!0),t.showJoinLinkModal?(r(),de(T,{key:2,onClose:s[7]||(s[7]=u=>t.showJoinLinkModal=!1),onSave:t.generateJoinLink},null,8,["onSave"])):g("",!0),t.showProfileModal?(r(),de(h,{key:3,profile:t.profile,onClose:s[8]||(s[8]=u=>t.showProfileModal=!1),onSave:t.updateProfile},null,8,["profile","onSave"])):g("",!0)])}const Ua=ne(pn,[["render",Va]]);function _e(){const a=document.getElementById("host-dashboard-app");if(a&&!a.__vue_app__)try{const s=Le(Ua);s.use(Be),s.config.errorHandler=(t,L,_)=>{console.error("Vue Host Dashboard error:",t,_),a.innerHTML=`
          <div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px; color: #c33;">
            <h3>Dashboard Error</h3>
            <p>There was an error loading the dashboard. Please refresh the page or contact support.</p>
            <details style="margin-top: 10px;">
              <summary>Error Details</summary>
              <pre style="margin-top: 10px; font-size: 12px;">${t.message}</pre>
            </details>
          </div>
        `},s.mount(a),a.__vue_app__=s,a.style.display="block";const c=document.getElementById("hbc-loading-state");c&&(c.style.display="none")}catch(s){console.error("Failed to mount Host Dashboard:",s),a.innerHTML=`
        <div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px; color: #c33;">
          <h3>Dashboard Unavailable</h3>
          <p>The dashboard could not be loaded. Please refresh the page or contact support.</p>
          <button onclick="location.reload()" style="margin-top: 10px; padding: 8px 16px; background: #007cba; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Refresh Page
          </button>
        </div>
      `}else a&&a.__vue_app__||console.error("Host Dashboard container not found")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",_e):_e();setTimeout(_e,100);
