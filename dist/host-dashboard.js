var B=(a,s,c)=>new Promise((t,L)=>{var _=p=>{try{l(c.next(p))}catch(T){L(T)}},n=p=>{try{l(c.throw(p))}catch(T){L(T)}},l=p=>p.done?t(p.value):Promise.resolve(p.value).then(_,n);l((c=c.apply(a,s)).next())});import{_ as oe,C as xe,g as U,j as f,s as O,m as me,p as ue,q as ne,r as Y,c as d,o as r,b as e,t as o,F as P,e as $,a as g,n as j,y as ie,B as H,u as ke,D as ge,f as z,k as se,E as ce,i as ye,h as Z,G as ve,l as pe,w as M,H as we,I as Q,J as X,K as re,P as Ce,d as de,v as ae,x as R,z as Me,A as Le}from"./style-B4qtJ4rK.js";const Be={name:"BookingsList",components:{CountdownTimer:xe},props:{bookings:{type:Array,default:()=>[]},showActions:{type:Boolean,default:!1},showAttendeeActions:{type:Boolean,default:!1}},emits:["view-details","update-status","show-alert","meeting-expired","meeting-urgent","meeting-warning"],setup(a,{emit:s}){const c=U(new Set),t=i=>B(this,null,function*(){(yield ge(i))?(s("link-copied"),s("show-alert","success","Join link copied to clipboard")):s("show-alert","error","Failed to copy link")}),L=i=>i?new Date(i).toLocaleDateString():"N/A",_=i=>!i||!Array.isArray(i)||i.length===0?null:i[0].attendee_name||i[0].name||null,n=i=>!i||!Array.isArray(i)||i.length===0?null:i[0].email||null,l=i=>{if(!i)return null;try{const v=JSON.parse(i),k=Object.keys(v);return k.length===0?null:v[k[0]].location||k[0]}catch(v){return i}},p=i=>{if(!i)return!1;try{const v=JSON.parse(i),k=Object.keys(v);if(k.length===0)return!1;const b=v[k[0]];return!!(b.join_url||b.meeting_url)}catch(v){return!1}},T=i=>{switch(i==null?void 0:i.toLowerCase()){case"paid":case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":case"cancelled":return"bg-red-100 text-red-800";case"refunded":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},h=i=>{if(!i)return null;try{const v=JSON.parse(i),k=Object.keys(v);if(k.length===0)return null;const b=v[k[0]];return b.join_url||b.meeting_url||null}catch(v){return null}},u=i=>{switch(i){case"1":case 1:return"Paid";case"0":case 0:return"Pending";case"-1":case-1:return"Failed";default:return i||"Unknown"}},D=i=>O(i)?i.status==="confirmed":i.status==="confirmed"&&(p(i.meeting_locations)||i.meeting_id),S=i=>{if(O(i))return!0;const v=new Date,k=new Date(i.meeting_dates+" "+i.start_time),b=new Date(i.meeting_dates+" "+i.end_time),N=new Date(k.getTime()-5*60*1e3);return v>=N&&v<=b};return{formatDateTime:ne,formatDate:L,getStatusClass:ue,getStatusText:me,copyJoinLink:t,getAttendeeName:_,getAttendeeEmail:n,formatLocation:l,hasJoinLink:p,getPaymentStatusClass:T,getPaymentStatusText:u,getJoinLink:h,canShowMeetingButton:D,isMeetingAvailable:S,getMeetingButtonClass:i=>{if(!S(i))return"btn-secondary opacity-50 cursor-not-allowed";if(O(i))return"btn-success animate-pulse";const v=new Date,k=new Date(i.meeting_dates+" "+i.start_time),b=new Date(i.meeting_dates+" "+i.end_time);return v>=k&&v<=b?"btn-success animate-pulse":"btn-primary"},getMeetingButtonText:(i,v)=>{if(O(i))return"Start Meeting";if(!S(i))return"Scheduled";const k=new Date,b=new Date(i.meeting_dates+" "+i.start_time),N=new Date(i.meeting_dates+" "+i.end_time);return k>=b&&k<=N?"Start Meeting":`Available in ${Math.ceil((b.getTime()-k.getTime())/6e4)}m`},handleMeetingAction:i=>B(this,null,function*(){if(!S(i)&&!O(i)){s("show-alert","info","Meeting will be available 5 minutes before the scheduled time.");return}if(!c.value.has(i.id))try{c.value.add(i.id);const k=yield(a.showActions?H:ke).getMeetingLink(i.id);if(console.log("API Response:",k),console.log("Response status:",k.status),console.log("Response meeting_url:",k.meeting_url),console.log("Using API:",a.showActions?"hostAPI":"attendeeAPI"),k.status&&k.meeting_url){let b=k.meeting_url.toString().trim();b.startsWith('"')&&b.endsWith('"')&&(b=b.slice(1,-1)),b.startsWith("'")&&b.endsWith("'")&&(b=b.slice(1,-1)),console.log("Cleaned URL:",b),console.log("About to navigate to:",b),window.location.href=b}else{const b=h(i.meeting_locations);b?(window.open(b,"_blank","noopener,noreferrer"),s("show-alert","success","Meeting opened in new tab")):O(i)?s("show-alert","info","Test mode: Meeting link would be available here in production."):s("show-alert","error","Meeting link not available. Please contact support.")}}catch(v){console.error("Error getting meeting link:",v),O(i)?s("show-alert","info","Test mode: Meeting access would be available here in production."):s("show-alert","error","Failed to get meeting link. Please try again.")}finally{c.value.delete(i.id)}}),loadingMeetingLinks:c,isTestModeActiveForBooking:O,isUpcomingMeeting:i=>{const v=new Date;return new Date(i.meeting_dates+" "+i.start_time)>v},isBookingConfirmed:i=>{const v=i.status||i.booking_status||i.attendee_status;return v==="confirmed"&&v!=="cancelled"&&v!=="canceled"&&v!=="completed"},onMeetingExpired:i=>{console.log("Meeting expired:",i),s("meeting-expired",i)},onMeetingUrgent:(i,v)=>{console.log("Meeting starting soon:",i,v),s("meeting-urgent",i,v)},onMeetingWarning:(i,v)=>{console.log("Meeting approaching:",i,v),s("meeting-warning",i,v)},__:f}}},Ae={class:"space-y-4"},De={key:0,class:"text-center py-12"},je={class:"mt-2 text-sm font-medium text-gray-900"},Te={class:"mt-1 text-sm text-gray-500"},Se={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ve={class:"card-body"},Ue={class:"flex items-start justify-between mb-4"},ze={class:"text-lg font-medium text-gray-900 flex-1 pr-2"},He={key:0,class:"mb-4"},Je={class:"space-y-3 text-sm text-gray-600"},Ee={class:"text-sm font-medium text-gray-700"},Pe={class:"text-sm text-gray-900 truncate"},$e={class:"text-sm font-medium text-gray-700"},qe={class:"text-sm text-gray-600 truncate"},Ne={class:"text-sm font-medium text-gray-700"},Oe={class:"text-sm text-gray-600"},Fe={class:"text-sm font-medium text-gray-700"},Ie={class:"text-sm text-gray-600"},We={class:"text-xs text-gray-500"},Ke={key:1,class:"mt-4 pt-3 border-t border-gray-200 text-sm text-gray-600"},Re={key:0,class:"mb-2"},Ge={class:"font-medium"},Qe={class:"break-words"},Xe={key:1,class:"mb-2"},Ye={class:"font-medium"},Ze={class:"break-words"},et={key:2,class:"mb-2"},tt={class:"font-medium"},st={class:"break-words"},ot={key:2,class:"mt-4 pt-3 border-t border-gray-200 space-y-2"},nt=["onClick"],at={key:0,class:"grid grid-cols-2 gap-2"},it=["onClick"],lt=["onClick"],rt={key:1,class:"grid grid-cols-2 gap-2"},dt=["onClick"],ct=["onClick"],_t=["onClick","disabled"],mt={key:3,class:"mt-4 pt-3 border-t border-gray-200 space-y-2"},ut=["onClick"],gt=["onClick","disabled"];function ft(a,s,c,t,L,_){const n=Y("CountdownTimer");return r(),d("div",Ae,[c.bookings.length?(r(),d("div",Se,[(r(!0),d(P,null,$(c.bookings,l=>(r(),d("div",{key:l.booking_id,class:"card hover:shadow-lg transition-shadow duration-200 h-fit"},[e("div",Ve,[e("div",Ue,[e("h4",ze,o(l.title||(l.host_first_name+" "+l.host_last_name).trim()||t.__("meeting")),1),e("span",{class:j([t.getStatusClass(l.status||l.booking_status),"badge whitespace-nowrap"])},o(t.getStatusText(l.status||l.booking_status)),3)]),t.isUpcomingMeeting(l)&&t.isBookingConfirmed(l)?(r(),d("div",He,[ie(n,{"meeting-date":l.meeting_dates,"start-time":l.start_time,onExpired:p=>t.onMeetingExpired(l),onUrgent:p=>t.onMeetingUrgent(l),onWarning:p=>t.onMeetingWarning(l)},null,8,["meeting-date","start-time","onExpired","onUrgent","onWarning"])])):g("",!0),e("div",Je,[e("div",null,[e("p",Ee,o(t.__("attendee")),1),e("p",Pe,o(t.getAttendeeName(l.attendees)||t.__("not_available")),1)]),e("div",null,[e("p",$e,o(t.__("email")),1),e("p",qe,o(t.getAttendeeEmail(l.attendees)||t.__("not_available")),1)]),e("div",null,[e("p",Ne,o(t.__("duration")),1),e("p",Oe,o(l.duration?l.duration+" "+t.__("min"):t.__("not_available")),1)]),e("div",null,[e("p",Fe,o(t.__("date_time")),1),e("p",Ie,o(t.formatDate(l.meeting_dates)),1),e("p",We,o(l.start_time)+" - "+o(l.end_time),1)])]),l.notes||l.internal_note||l.attendee_comment?(r(),d("div",Ke,[l.notes?(r(),d("div",Re,[e("span",Ge,o(t.__("notes"))+":",1),e("span",Qe,o(l.notes),1)])):g("",!0),l.internal_note?(r(),d("div",Xe,[e("span",Ye,o(t.__("internal_note"))+":",1),e("span",Ze,o(l.internal_note),1)])):g("",!0),l.attendee_comment?(r(),d("div",et,[e("span",tt,o(t.__("attendee_comment"))+":",1),e("span",st,o(l.attendee_comment),1)])):g("",!0)])):g("",!0),c.showActions?(r(),d("div",ot,[e("button",{onClick:p=>a.$emit("view-details",l.id),class:"btn-secondary text-xs w-full"},o(t.__("view_details")),9,nt),l.status==="pending"?(r(),d("div",at,[e("button",{onClick:p=>a.$emit("update-status",l.id,"confirmed"),class:"btn-success text-xs"},o(t.__("confirm")),9,it),e("button",{onClick:p=>a.$emit("update-status",l.id,"cancelled"),class:"btn-danger text-xs"},o(t.__("cancel")),9,lt)])):l.status==="confirmed"?(r(),d("div",rt,[e("button",{onClick:p=>a.$emit("update-status",l.id,"completed"),class:"btn-success text-xs"},o(t.__("mark_complete")),9,dt),e("button",{onClick:p=>a.$emit("update-status",l.id,"cancelled"),class:"btn-danger text-xs"}," Cancel ",8,ct)])):g("",!0),t.canShowMeetingButton(l)?(r(),d("button",{key:2,onClick:p=>t.handleMeetingAction(l),class:j([t.getMeetingButtonClass(l),"text-xs w-full"]),disabled:!t.isMeetingAvailable(l)&&!t.isTestModeActiveForBooking(l)},o(t.getMeetingButtonText(l,"host")),11,_t)):g("",!0)])):c.showAttendeeActions?(r(),d("div",mt,[e("button",{onClick:p=>a.$emit("view-details",l.id),class:"btn-secondary text-xs w-full"}," View Details ",8,ut),t.canShowMeetingButton(l)?(r(),d("button",{key:0,onClick:p=>t.handleMeetingAction(l),class:j([t.getMeetingButtonClass(l),"text-xs w-full"]),disabled:!t.isMeetingAvailable(l)&&!t.isTestModeActiveForBooking(l)},o(t.getMeetingButtonText(l,"attendee")),11,gt)):g("",!0)])):g("",!0)])]))),128))])):(r(),d("div",De,[s[0]||(s[0]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a2 2 0 012-2h4a2 2 0 012 2v4m-6 4v10m6-10v10m-6 0h6"})],-1)),e("h3",je,o(t.__("no_bookings_found")),1),e("p",Te,o(t.__("no_bookings_match")),1)]))])}const ht=oe(Be,[["render",ft]]),vt={name:"JoinLinksList",props:{joinLinks:{type:Array,default:()=>[]}},emits:["copy-link","send-link","disable-link","enable-link","delete-link","test-host-link"],setup(){return{formatDateTime:ne,getLinkStatusClass:t=>({active:"badge-success",disabled:"badge-warning",expired:"badge-danger",pending:"badge-secondary"})[t]||"badge-secondary",getLinkStatusText:t=>({active:"Active",disabled:"Disabled",expired:"Expired",pending:"Pending"})[t]||t,testHostLink:t=>{t.join_url&&window.open(t.join_url,"_blank","noopener,noreferrer")}}}},yt={class:"space-y-4"},pt={key:0,class:"text-center py-12"},bt={key:1,class:"space-y-4"},xt={class:"card-body"},kt={class:"flex items-start justify-between"},wt={class:"flex-1"},Ct={class:"flex items-center space-x-3 mb-3"},Mt={class:"text-lg font-medium text-gray-900"},Lt={key:0,class:"badge badge-secondary"},Bt={class:"space-y-2 text-sm text-gray-600"},At={class:"flex items-center"},Dt={class:"bg-gray-100 px-2 py-1 rounded text-xs font-mono"},jt={key:0,class:"flex items-center"},Tt={key:1,class:"flex items-center"},St={key:2,class:"flex items-center"},Vt={key:3,class:"flex items-center"},Ut={key:4,class:"flex items-center"},zt={key:0},Ht={key:0,class:"mt-3 text-sm text-gray-600"},Jt={class:"italic"},Et={class:"flex flex-col space-y-2 ml-4"},Pt=["onClick","disabled"],$t=["onClick","disabled"],qt=["onClick","disabled"],Nt=["onClick"],Ot=["onClick"],Ft=["onClick"],It={key:0,class:"mt-4 pt-4 border-t border-gray-200"},Wt={class:"space-y-1"};function Kt(a,s,c,t,L,_){return r(),d("div",yt,[c.joinLinks.length?(r(),d("div",bt,[(r(!0),d(P,null,$(c.joinLinks,n=>(r(),d("div",{key:n.id,class:"card hover:shadow-md transition-shadow duration-200"},[e("div",xt,[e("div",kt,[e("div",wt,[e("div",Ct,[e("h4",Mt,o(n.title||"Join Link"),1),e("span",{class:j([t.getLinkStatusClass(n.status),"badge"])},o(t.getLinkStatusText(n.status)),3),n.type?(r(),d("span",Lt,o(n.type),1)):g("",!0)]),e("div",Bt,[e("div",At,[s[1]||(s[1]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z","clip-rule":"evenodd"})],-1)),e("code",Dt,o(n.url),1)]),n.meeting_title?(r(),d("div",jt,[s[2]||(s[2]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})],-1)),z(" "+o(n.meeting_title),1)])):g("",!0),n.meeting_date?(r(),d("div",Tt,[s[3]||(s[3]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),z(" "+o(t.formatDateTime(n.meeting_date)),1)])):g("",!0),n.created_at?(r(),d("div",St,[s[4]||(s[4]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1)),z(" Created "+o(t.formatDateTime(n.created_at)),1)])):g("",!0),n.expires_at?(r(),d("div",Vt,[s[5]||(s[5]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),z(" Expires "+o(t.formatDateTime(n.expires_at)),1)])):g("",!0),n.usage_count!==void 0?(r(),d("div",Ut,[s[6]||(s[6]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),z(" Used "+o(n.usage_count)+" time"+o(n.usage_count!==1?"s":"")+" ",1),n.max_uses?(r(),d("span",zt," (max "+o(n.max_uses)+")",1)):g("",!0)])):g("",!0)]),n.description?(r(),d("div",Ht,[e("p",Jt,o(n.description),1)])):g("",!0)]),e("div",Et,[e("button",{onClick:l=>a.$emit("copy-link",n.url),class:"btn-primary text-xs",disabled:n.status==="expired"||n.status==="disabled"},s[7]||(s[7]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),e("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})],-1),z(" Copy ",-1)]),8,Pt),e("button",{onClick:l=>a.$emit("send-link",n.id),class:"btn-secondary text-xs",disabled:n.status==="expired"||n.status==="disabled"},s[8]||(s[8]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})],-1),z(" Send ",-1)]),8,$t),e("button",{onClick:l=>a.$emit("test-host-link",n),class:"btn-success text-xs",disabled:n.status==="expired"||n.status==="disabled",title:"Test host meeting link (opens in new tab)"}," Test Host ",8,qt),n.status==="active"?(r(),d("button",{key:0,onClick:l=>a.$emit("disable-link",n.id),class:"btn-warning text-xs"}," Disable ",8,Nt)):n.status==="disabled"?(r(),d("button",{key:1,onClick:l=>a.$emit("enable-link",n.id),class:"btn-success text-xs"}," Enable ",8,Ot)):g("",!0),e("button",{onClick:l=>a.$emit("delete-link",n.id),class:"btn-danger text-xs"}," Delete ",8,Ft)])]),n.usage_stats&&n.usage_stats.length?(r(),d("div",It,[s[9]||(s[9]=e("h5",{class:"text-sm font-medium text-gray-900 mb-2"},"Recent Usage",-1)),e("div",Wt,[(r(!0),d(P,null,$(n.usage_stats.slice(0,3),l=>(r(),d("div",{key:l.id,class:"flex justify-between text-xs text-gray-600"},[e("span",null,o(l.attendee_name||l.attendee_email),1),e("span",null,o(t.formatDateTime(l.used_at)),1)]))),128))])])):g("",!0)])]))),128))])):(r(),d("div",pt,s[0]||(s[0]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No join links found",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Create your first join link to get started.",-1)])))])}const Rt=oe(vt,[["render",Kt]]),Gt={name:"BookingDetailsModal",props:{booking:{type:Object,default:null}},emits:["close","send-email"],setup(a,{emit:s}){return se(()=>a.booking,(h,u)=>{},{immediate:!0,deep:!0}),{formatDateTime:ne,formatDate:h=>h?new Date(h).toLocaleDateString():f("not_available"),formatTime:h=>h?new Date(h).toLocaleTimeString():f("not_available"),formatFieldName:h=>h.replace(/_/g," ").replace(/\b\w/g,u=>u.toUpperCase()),getStatusClass:ue,getStatusText:me,copyJoinLink:h=>B(this,null,function*(){(yield ge(h))?(s("link-copied"),s("show-alert","success",f("join_link_copied"))):s("show-alert","error",f("failed_copy_link"))}),sendEmail:()=>{s("send-email",a.booking)},getAttendeeName:h=>!h||!Array.isArray(h)||h.length===0?f("not_available"):h[0].attendee_name||h[0].name||f("not_available"),getAttendeeEmail:h=>!h||!Array.isArray(h)||h.length===0?f("not_available"):h[0].email||f("not_available"),formatLocation:h=>{if(!h)return f("not_available");try{const u=JSON.parse(h),D=Object.keys(u);return D.length===0?f("not_available"):u[D[0]].location||D[0]}catch(u){return h}}}}},Qt={class:"modal-header"},Xt={class:"modal-title"},Yt={class:"modal-body"},Zt={key:0,class:"space-y-6"},es={class:"bg-gray-50 p-4 rounded-lg"},ts={class:"text-lg font-medium text-gray-900 mb-4"},ss={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},os={class:"form-label"},ns={class:"text-gray-700"},as={class:"form-label"},is={class:"text-gray-700"},ls={class:"form-label"},rs={class:"text-gray-700"},ds={class:"form-label"},cs={class:"text-gray-700"},_s={class:"form-label"},ms={class:"text-gray-700"},us={class:"form-label"},gs={key:0,class:"md:col-span-2"},fs={class:"form-label"},hs={class:"text-gray-700"},vs={class:"bg-blue-50 p-4 rounded-lg"},ys={class:"text-lg font-medium text-gray-900 mb-4"},ps={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bs={class:"form-label"},xs={class:"text-gray-700"},ks={class:"form-label"},ws={class:"text-gray-700"},Cs={class:"form-label"},Ms={class:"text-gray-700"},Ls={class:"form-label"},Bs={class:"text-gray-700"},As={class:"form-label"},Ds={class:"text-gray-700"},js={key:0,class:"md:col-span-2"},Ts={class:"form-label"},Ss={class:"text-gray-700"},Vs={class:"md:col-span-2"},Us={class:"form-label"},zs={class:"text-gray-700"},Hs={key:0,class:"bg-green-50 p-4 rounded-lg"},Js={class:"text-lg font-medium text-gray-900 mb-4"},Es={class:"space-y-3"},Ps={class:"flex-1"},$s={class:"flex items-center justify-between"},qs={class:"text-sm font-medium text-gray-900"},Ns={class:"text-xs text-gray-500"},Os={key:0,class:"text-sm text-gray-600 mt-1"},Fs={key:1,class:"bg-purple-50 p-4 rounded-lg"},Is={class:"text-lg font-medium text-gray-900 mb-4"},Ws={class:"bg-white px-3 py-2 rounded border text-sm font-mono"},Ks=["onClick"],Rs={key:2,class:"bg-yellow-50 p-4 rounded-lg"},Gs={class:"text-lg font-medium text-gray-900 mb-4"},Qs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Xs={class:"form-label"},Ys={class:"text-gray-700"},Zs={key:1,class:"text-center py-8"},eo={class:"text-gray-600"},to={class:"modal-footer"};function so(a,s,c,t,L,_){var n,l,p,T,h,u,D,S,q,F,y,J,E,I,ee,W,i,v,k,b,N,te;return r(),d("div",{class:"modal-overlay",onClick:s[4]||(s[4]=A=>a.$emit("close"))},[e("div",{class:"modal-content",onClick:s[3]||(s[3]=ce(()=>{},["stop"]))},[e("div",Qt,[e("h3",Xt,o(a.__("booking_details")),1),e("button",{onClick:s[0]||(s[0]=A=>a.$emit("close")),class:"modal-close"},s[5]||(s[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Yt,[c.booking?(r(),d("div",Zt,[e("div",es,[e("h4",ts,o(a.__("meeting_details")),1),e("div",ss,[e("div",null,[e("label",os,o(a.__("meeting_title")),1),e("p",ns,o(((n=c.booking.data)==null?void 0:n.meeting_title)||a.__("not_available")),1)]),e("div",null,[e("label",as,o(a.__("date")),1),e("p",is,o(((l=c.booking.data)==null?void 0:l.meeting_dates)||a.__("not_available")),1)]),e("div",null,[e("label",ls,o(a.__("time")),1),e("p",rs,o(((p=c.booking.data)==null?void 0:p.start_time)||a.__("not_available"))+" - "+o(((T=c.booking.data)==null?void 0:T.end_time)||a.__("not_available")),1)]),e("div",null,[e("label",ds,o(a.__("duration")),1),e("p",cs,o(((h=c.booking.data)==null?void 0:h.duration)||a.__("not_available"))+" "+o(a.__("minutes")),1)]),e("div",null,[e("label",_s,o(a.__("booking_type")),1),e("p",ms,o(((u=c.booking.data)==null?void 0:u.booking_type)||a.__("not_available")),1)]),e("div",null,[e("label",us,o(a.__("status")),1),e("span",{class:j([t.getStatusClass((D=c.booking.data)==null?void 0:D.status),"badge"])},o(t.getStatusText((S=c.booking.data)==null?void 0:S.status)||((q=c.booking.data)==null?void 0:q.status)||a.__("not_available")),3)]),(F=c.booking.data)!=null&&F.internal_note?(r(),d("div",gs,[e("label",fs,o(a.__("internal_note")),1),e("p",hs,o(c.booking.data.internal_note),1)])):g("",!0)])]),e("div",vs,[e("h4",ys,o(a.__("attendee_details")),1),e("div",ps,[e("div",null,[e("label",bs,o(a.__("name")),1),e("p",xs,o(t.getAttendeeName((y=c.booking.data)==null?void 0:y.attendees)||a.__("not_available")),1)]),e("div",null,[e("label",ks,o(a.__("email")),1),e("p",ws,o(t.getAttendeeEmail((J=c.booking.data)==null?void 0:J.attendees)||a.__("not_available")),1)]),e("div",null,[e("label",Cs,o(a.__("attendee_id")),1),e("p",Ms,o(((E=c.booking.data)==null?void 0:E.attendee_id)||a.__("not_available")),1)]),e("div",null,[e("label",Ls,o(a.__("booking_id")),1),e("p",Bs,o(((I=c.booking.data)==null?void 0:I.id)||((ee=c.booking.data)==null?void 0:ee.booking_id)||a.__("not_available")),1)]),e("div",null,[e("label",As,o(a.__("created_at")),1),e("p",Ds,o(t.formatDateTime((W=c.booking.data)==null?void 0:W.created_at)||a.__("not_available")),1)]),(i=c.booking.data)!=null&&i.attendee_comment?(r(),d("div",js,[e("label",Ts,o(a.__("comment")),1),e("p",Ss,o(c.booking.data.attendee_comment),1)])):g("",!0),e("div",Vs,[e("label",Us,o(a.__("booked_at")),1),e("p",zs,o(t.formatDateTime((v=c.booking.data)==null?void 0:v.created_at)),1)])])]),(k=c.booking.data)!=null&&k.activity&&c.booking.data.activity.length?(r(),d("div",Hs,[e("h4",Js,o(a.__("activity_details")),1),e("div",Es,[(r(!0),d(P,null,$(c.booking.data.activity,A=>(r(),d("div",{key:A.id,class:"flex items-start space-x-3 p-3 bg-white rounded border"},[s[6]||(s[6]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-2 h-2 bg-green-400 rounded-full mt-2"})],-1)),e("div",Ps,[e("div",$s,[e("p",qs,o(A.action),1),e("p",Ns,o(t.formatDateTime(A.created_at)),1)]),A.description?(r(),d("p",Os,o(A.description),1)):g("",!0)])]))),128))])])):g("",!0),(b=c.booking.data)!=null&&b.join_links&&c.booking.data.join_links.length>0?(r(),d("div",Fs,[e("h4",Is,o(a.__("join_links")),1),(r(!0),d(P,null,$(c.booking.data.join_links,(A,G)=>(r(),d("div",{key:G,class:"flex items-center justify-between mb-2"},[e("code",Ws,o(A),1),e("button",{onClick:fe=>t.copyJoinLink(A),class:"btn-primary ml-3"},[s[7]||(s[7]=e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),e("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})],-1)),z(" "+o(a.__("copy_link")),1)],8,Ks)]))),128))])):g("",!0),(N=c.booking.data)!=null&&N.custom_fields&&Object.keys(c.booking.data.custom_fields).length?(r(),d("div",Rs,[e("h4",Gs,o(a.__("additional_information")),1),e("div",Qs,[(r(!0),d(P,null,$(c.booking.data.custom_fields,(A,G)=>(r(),d("div",{key:G,class:"space-y-1"},[e("label",Xs,o(t.formatFieldName(G)),1),e("p",Ys,o(A||a.__("not_available")),1)]))),128))])])):g("",!0)])):(r(),d("div",Zs,[s[8]||(s[8]=e("div",{class:"loading-spinner mx-auto mb-4"},null,-1)),e("p",eo,o(a.__("loading_booking_details")),1)]))]),e("div",to,[e("button",{onClick:s[1]||(s[1]=A=>a.$emit("close")),class:"btn-secondary"},o(a.__("close")),1),c.booking&&t.getAttendeeEmail((te=c.booking.data)==null?void 0:te.attendees)?(r(),d("button",{key:0,onClick:s[2]||(s[2]=(...A)=>t.sendEmail&&t.sendEmail(...A)),class:"btn-primary"},o(a.__("send_email")),1)):g("",!0)])])])}const oo=oe(Gt,[["render",so]]),no={name:"JoinLinkModal",emits:["close","save"],setup(a,{emit:s}){const c=ye("toast"),t=U(!1),L=U([]),_=Z({meeting_id:"",link_type:"one-time",max_uses:1,custom_url:"",expiration_type:"after_meeting",expiration_date:"",expiration_time:"",description:"",require_password:!1,password:"",waiting_room:!1,host_approval:!1}),n=Z({}),l=Z({show:!1,type:"",message:""}),p=ve(()=>window.location.origin),T=ve(()=>new Date().toISOString().split("T")[0]),h=(y,J)=>{c?c.showAlert(y,J):(l.show=!0,l.type=`alert-${y}`,l.message=J,setTimeout(()=>{l.show=!1},5e3))},u=()=>B(this,null,function*(){try{const y=yield H.getBookings("upcoming");L.value=y.bookings||[]}catch(y){h("error",f("failed_load_meetings"))}}),D=()=>{_.custom_url=""},S=()=>{_.custom_url&&(_.custom_url=_.custom_url.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/--+/g,"-").replace(/^-|-$/g,""))},q=()=>(Object.keys(n).forEach(y=>delete n[y]),_.meeting_id||(n.meeting_id=f("please_select_meeting")),_.link_type||(n.link_type=f("please_select_link_type")),_.link_type==="limited"&&(!_.max_uses||_.max_uses<1)&&(n.max_uses=f("max_uses_at_least_one")),_.custom_url&&(_.custom_url.length<3?n.custom_url=f("custom_url_min_length"):_.custom_url.length>50&&(n.custom_url=f("custom_url_max_length"))),_.expiration_type==="custom"&&(_.expiration_date||(n.expiration_date=f("expiration_date_required")),_.expiration_time||(n.expiration_time=f("expiration_time_required")),_.expiration_date&&_.expiration_time&&new Date(`${_.expiration_date}T${_.expiration_time}`)<=new Date&&(n.expiration_date=f("expiration_future_required"))),_.require_password&&!_.password&&(n.password=f("password_required_when_enabled")),Object.keys(n).length===0),F=()=>B(this,null,function*(){if(!q()){h("error",f("fix_errors_below"));return}t.value=!0;try{const y={meeting_id:_.meeting_id,link_type:_.link_type,max_uses:_.link_type==="limited"?_.max_uses:null,custom_url:_.custom_url||null,expiration_type:_.expiration_type,expiration_date:_.expiration_type==="custom"?_.expiration_date:null,expiration_time:_.expiration_type==="custom"?_.expiration_time:null,description:_.description||null,require_password:_.require_password,password:_.require_password?_.password:null,waiting_room:_.waiting_room,host_approval:_.host_approval};s("save",y)}catch(y){h("error",f("failed_generate_join_link"))}finally{t.value=!1}});return se(()=>_.link_type,y=>{y!=="limited"&&(_.max_uses=1)}),se(()=>_.require_password,y=>{y||(_.password="")}),pe(u),{isSubmitting:t,availableMeetings:L,form:_,errors:n,alert:l,baseUrl:p,minExpirationDate:T,showAlert:h,loadAvailableMeetings:u,onMeetingChange:D,validateCustomUrl:S,validateForm:q,handleSubmit:F,formatDateTime:ne}}},ao={class:"modal-header"},io={class:"modal-title"},lo={class:"modal-body"},ro={class:"space-y-6"},co={for:"meeting_id",class:"form-label"},_o={value:""},mo=["value"],uo={key:0,class:"form-error"},go={class:"form-label"},fo={class:"space-y-2"},ho={class:"flex items-center"},vo={class:"ml-2"},yo={class:"font-medium"},po={class:"block text-sm text-gray-500"},bo={class:"flex items-center"},xo={class:"ml-2"},ko={class:"font-medium"},wo={class:"block text-sm text-gray-500"},Co={class:"flex items-center"},Mo={class:"ml-2"},Lo={class:"font-medium"},Bo={class:"block text-sm text-gray-500"},Ao={key:0,class:"form-error"},Do={key:0},jo={for:"max_uses",class:"form-label"},To={key:0,class:"form-error"},So={for:"custom_url",class:"form-label"},Vo={class:"flex"},Uo={class:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"},zo={class:"text-sm text-gray-500 mt-1"},Ho={key:0,class:"form-error"},Jo={class:"form-label"},Eo={class:"space-y-2"},Po={class:"flex items-center"},$o={class:"ml-2"},qo={class:"flex items-center"},No={class:"ml-2"},Oo={class:"flex items-center"},Fo={class:"ml-2"},Io={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Wo={for:"expiration_date",class:"form-label"},Ko=["min"],Ro={key:0,class:"form-error"},Go={for:"expiration_time",class:"form-label"},Qo={key:0,class:"form-error"},Xo={for:"description",class:"form-label"},Yo=["placeholder"],Zo={key:0,class:"form-error"},en={class:"border-t pt-4"},tn={class:"text-lg font-medium text-gray-900 mb-3"},sn={class:"space-y-2"},on={class:"flex items-center"},nn={class:"ml-2 text-sm text-gray-700"},an={class:"flex items-center"},ln={class:"ml-2 text-sm text-gray-700"},rn={class:"flex items-center"},dn={class:"ml-2 text-sm text-gray-700"},cn={key:2},_n={for:"password",class:"form-label"},mn={key:0,class:"form-error"},un={class:"modal-footer"},gn=["disabled"],fn={key:0,class:"loading-spinner-sm mr-2"};function hn(a,s,c,t,L,_){return r(),d("div",{class:"modal-overlay",onClick:s[22]||(s[22]=n=>a.$emit("close"))},[e("div",{class:"modal-content",onClick:s[21]||(s[21]=ce(()=>{},["stop"]))},[e("div",ao,[e("h3",io,o(a.__("generate_join_link")),1),e("button",{onClick:s[0]||(s[0]=n=>a.$emit("close")),class:"modal-close"},s[23]||(s[23]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:s[20]||(s[20]=ce((...n)=>t.handleSubmit&&t.handleSubmit(...n),["prevent"]))},[e("div",lo,[t.alert.show?(r(),d("div",{key:0,class:j([t.alert.type,"mb-4"])},o(t.alert.message),3)):g("",!0),e("div",ro,[e("div",null,[e("label",co,o(a.__("select_meeting"))+" *",1),M(e("select",{id:"meeting_id","onUpdate:modelValue":s[1]||(s[1]=n=>t.form.meeting_id=n),class:j(["form-input",{"border-red-500":t.errors.meeting_id}]),required:"",onChange:s[2]||(s[2]=(...n)=>t.onMeetingChange&&t.onMeetingChange(...n))},[e("option",_o,o(a.__("choose_meeting")),1),(r(!0),d(P,null,$(t.availableMeetings,n=>(r(),d("option",{key:n.id,value:n.id},o(n.title)+" - "+o(t.formatDateTime(n.date_time)),9,mo))),128))],34),[[we,t.form.meeting_id]]),t.errors.meeting_id?(r(),d("p",uo,o(t.errors.meeting_id),1)):g("",!0)]),e("div",null,[e("label",go,o(a.__("link_type"))+" *",1),e("div",fo,[e("label",ho,[M(e("input",{"onUpdate:modelValue":s[3]||(s[3]=n=>t.form.link_type=n),type:"radio",value:"one-time",class:"form-radio"},null,512),[[Q,t.form.link_type]]),e("span",vo,[e("span",yo,o(a.__("one_time_link")),1),e("span",po,o(a.__("can_only_used_once")),1)])]),e("label",bo,[M(e("input",{"onUpdate:modelValue":s[4]||(s[4]=n=>t.form.link_type=n),type:"radio",value:"reusable",class:"form-radio"},null,512),[[Q,t.form.link_type]]),e("span",xo,[e("span",ko,o(a.__("reusable_link")),1),e("span",wo,o(a.__("can_used_multiple_times")),1)])]),e("label",Co,[M(e("input",{"onUpdate:modelValue":s[5]||(s[5]=n=>t.form.link_type=n),type:"radio",value:"limited",class:"form-radio"},null,512),[[Q,t.form.link_type]]),e("span",Mo,[e("span",Lo,o(a.__("limited_use_link")),1),e("span",Bo,o(a.__("can_used_specific_times")),1)])])]),t.errors.link_type?(r(),d("p",Ao,o(t.errors.link_type),1)):g("",!0)]),t.form.link_type==="limited"?(r(),d("div",Do,[e("label",jo,o(a.__("maximum_uses"))+" *",1),M(e("input",{id:"max_uses","onUpdate:modelValue":s[6]||(s[6]=n=>t.form.max_uses=n),type:"number",min:"1",max:"100",class:j(["form-input",{"border-red-500":t.errors.max_uses}]),required:""},null,2),[[X,t.form.max_uses,void 0,{number:!0}]]),t.errors.max_uses?(r(),d("p",To,o(t.errors.max_uses),1)):g("",!0)])):g("",!0),e("div",null,[e("label",So,o(a.__("custom_url_optional")),1),e("div",Vo,[e("span",Uo,o(t.baseUrl)+"/join/ ",1),M(e("input",{id:"custom_url","onUpdate:modelValue":s[7]||(s[7]=n=>t.form.custom_url=n),type:"text",class:j(["form-input rounded-l-none",{"border-red-500":t.errors.custom_url}]),placeholder:"my-meeting-link",onInput:s[8]||(s[8]=(...n)=>t.validateCustomUrl&&t.validateCustomUrl(...n))},null,34),[[X,t.form.custom_url]])]),e("p",zo,o(a.__("leave_blank_random_url")),1),t.errors.custom_url?(r(),d("p",Ho,o(t.errors.custom_url),1)):g("",!0)]),e("div",null,[e("label",Jo,o(a.__("link_expiration")),1),e("div",Eo,[e("label",Po,[M(e("input",{"onUpdate:modelValue":s[9]||(s[9]=n=>t.form.expiration_type=n),type:"radio",value:"never",class:"form-radio"},null,512),[[Q,t.form.expiration_type]]),e("span",$o,o(a.__("never_expires")),1)]),e("label",qo,[M(e("input",{"onUpdate:modelValue":s[10]||(s[10]=n=>t.form.expiration_type=n),type:"radio",value:"after_meeting",class:"form-radio"},null,512),[[Q,t.form.expiration_type]]),e("span",No,o(a.__("expires_after_meeting")),1)]),e("label",Oo,[M(e("input",{"onUpdate:modelValue":s[11]||(s[11]=n=>t.form.expiration_type=n),type:"radio",value:"custom",class:"form-radio"},null,512),[[Q,t.form.expiration_type]]),e("span",Fo,o(a.__("custom_expiration_date")),1)])])]),t.form.expiration_type==="custom"?(r(),d("div",Io,[e("div",null,[e("label",Wo,o(a.__("expiration_date"))+" *",1),M(e("input",{id:"expiration_date","onUpdate:modelValue":s[12]||(s[12]=n=>t.form.expiration_date=n),type:"date",class:j(["form-input",{"border-red-500":t.errors.expiration_date}]),min:t.minExpirationDate,required:""},null,10,Ko),[[X,t.form.expiration_date]]),t.errors.expiration_date?(r(),d("p",Ro,o(t.errors.expiration_date),1)):g("",!0)]),e("div",null,[e("label",Go,o(a.__("expiration_time"))+" *",1),M(e("input",{id:"expiration_time","onUpdate:modelValue":s[13]||(s[13]=n=>t.form.expiration_time=n),type:"time",class:j(["form-input",{"border-red-500":t.errors.expiration_time}]),required:""},null,2),[[X,t.form.expiration_time]]),t.errors.expiration_time?(r(),d("p",Qo,o(t.errors.expiration_time),1)):g("",!0)])])):g("",!0),e("div",null,[e("label",Xo,o(a.__("description_optional")),1),M(e("textarea",{id:"description","onUpdate:modelValue":s[14]||(s[14]=n=>t.form.description=n),rows:"3",class:j(["form-input",{"border-red-500":t.errors.description}]),placeholder:a.__("add_description_join_link")},null,10,Yo),[[X,t.form.description]]),t.errors.description?(r(),d("p",Zo,o(t.errors.description),1)):g("",!0)]),e("div",en,[e("h4",tn,o(a.__("security_options")),1),e("div",sn,[e("label",on,[M(e("input",{"onUpdate:modelValue":s[15]||(s[15]=n=>t.form.require_password=n),type:"checkbox",class:"form-checkbox"},null,512),[[re,t.form.require_password]]),e("span",nn,o(a.__("require_password_join")),1)]),e("label",an,[M(e("input",{"onUpdate:modelValue":s[16]||(s[16]=n=>t.form.waiting_room=n),type:"checkbox",class:"form-checkbox"},null,512),[[re,t.form.waiting_room]]),e("span",ln,o(a.__("enable_waiting_room")),1)]),e("label",rn,[M(e("input",{"onUpdate:modelValue":s[17]||(s[17]=n=>t.form.host_approval=n),type:"checkbox",class:"form-checkbox"},null,512),[[re,t.form.host_approval]]),e("span",dn,o(a.__("require_host_approval")),1)])])]),t.form.require_password?(r(),d("div",cn,[e("label",_n,o(a.__("meeting_password"))+" *",1),M(e("input",{id:"password","onUpdate:modelValue":s[18]||(s[18]=n=>t.form.password=n),type:"password",class:j(["form-input",{"border-red-500":t.errors.password}]),required:""},null,2),[[X,t.form.password]]),t.errors.password?(r(),d("p",mn,o(t.errors.password),1)):g("",!0)])):g("",!0)])]),e("div",un,[e("button",{type:"button",onClick:s[19]||(s[19]=n=>a.$emit("close")),class:"btn-secondary"},o(a.__("cancel")),1),e("button",{type:"submit",class:"btn-primary",disabled:t.isSubmitting},[t.isSubmitting?(r(),d("div",fn)):g("",!0),z(" "+o(t.isSubmitting?a.__("generating"):a.__("generate_link")),1)],8,gn)])],32)])])}const vn=oe(no,[["render",hn]]),yn={name:"HostDashboard",components:{BookingsList:ht,JoinLinksList:Rt,BookingDetailsModal:oo,JoinLinkModal:vn,ProfileModal:Ce},setup(){var he;const a=ye("toast"),s=U(!1),c=U("bookings"),t=U([]),L=U([]),_=Z({}),n=Z({}),l=Z({show:!1,type:"",message:""}),p=U("upcoming"),T=U(((he=window.hbcHostData)==null?void 0:he.logoutUrl)||"/wp-login.php?action=logout"),h=U(!1),u=U(!1),D=U(!1),S=U(null),q=[{id:"bookings",name:f("bookings")},{id:"join-links",name:f("join_links")},{id:"profile",name:f("profile")}],F=[{id:"upcoming",name:f("upcoming_filter"),icon:"calendar"},{id:"today",name:f("today_filter"),icon:"clock"},{id:"completed",name:f("completed_filter"),icon:"check"},{id:"cancelled",name:f("cancelled_filter"),icon:"x"},{id:"history",name:f("all_history_filter"),icon:"archive"}],y=(m,x)=>{a?a.showAlert(m,x):(l.show=!0,l.type=`alert-${m}`,l.message=x,setTimeout(()=>{l.show=!1},5e3))},J=()=>{l.show=!1},E=(m="upcoming")=>B(this,null,function*(){try{s.value=!0;let x=m;(m==="history"||m==="completed"||m==="cancelled")&&(x="past");const C=yield H.getBookings(x);let w=C&&C.bookings&&Array.isArray(C.bookings)?C.bookings:[];const K=new Date().toISOString().split("T")[0],$a=new Date;m==="today"?w=w.filter(V=>V.meeting_dates===K&&(V.status==="confirmed"||V.status==="pending")):m==="upcoming"?w=w.filter(V=>{const le=V.meeting_dates,qa=new Date(le+" "+(V.start_time||"00:00:00"));return le>K&&(V.status==="confirmed"||V.status==="pending")}):m==="completed"?w=w.filter(V=>V.status==="completed"):m==="cancelled"&&(w=w.filter(V=>V.status==="cancelled"||V.status==="canceled")),t.value=w}catch(x){console.error("Bookings load error:",x),y("error",R(x))}finally{s.value=!1}}),I=()=>B(this,null,function*(){try{const m=yield H.getJoinLinks();L.value=m.join_links||(Array.isArray(m)?m:[])}catch(m){console.error("Join links load error:",m),y("error",R(m))}}),ee=()=>B(this,null,function*(){try{const m=yield H.getProfile();if(m&&m.profile){const x=m.profile,C=x.host_data||{};Object.assign(_,{first_name:x.first_name||C.first_name||"",last_name:x.last_name||C.last_name||"",email:x.email||C.email||"",display_name:x.display_name||"",phone:C.phone_number||"",bio:x.description||C.about||"",avatar:C.avatar||"",featured_image:C.featured_image||"",status:C.status||"",availability_type:C.availability_type||"",availability_id:C.availability_id||""})}}catch(m){console.error("Profile load error:",m),y("error",R(m))}}),W=()=>B(this,null,function*(){try{const m=yield H.getStats();Object.assign(n,m||{})}catch(m){console.error("Failed to load stats:",m),y("error",f("failed_load_statistics"))}}),i=(m,x)=>B(this,null,function*(){try{s.value=!0,yield H.updateBookingStatus(m,x),y("success",f("booking_status_updated").replace("{status}",x)),yield E(c.value),yield W()}catch(C){y("error",R(C))}finally{s.value=!1}}),v=m=>B(this,null,function*(){var x,C;try{const w=yield H.getBookingDetails(m);let K=null;w&&w.data?K=w.data:w&&w.booking?K=w.booking:w&&(K=w),S.value=K,h.value=!0}catch(w){console.error("Error fetching booking details:",w),y("error",f("booking_details_error")+(((C=(x=w.response)==null?void 0:x.data)==null?void 0:C.message)||w.message))}}),k=()=>{u.value=!0},b=m=>B(this,null,function*(){try{s.value=!0,yield H.generateJoinLink(m.meetingId,m.linkType,m.customUrl),u.value=!1,y("success",f("join_link_generated")),yield I(),yield W()}catch(x){y("error",R(x))}finally{s.value=!1}}),N=m=>B(this,null,function*(){try{s.value=!0,yield H.sendJoinLink(m),y("success",f("join_link_sent"))}catch(x){y("error",R(x))}finally{s.value=!1}}),te=m=>B(this,null,function*(){(yield ge(m))?y("success",f("join_link_copied")):y("error",f("failed_copy_link"))}),A=()=>{D.value=!0},G=m=>B(this,null,function*(){try{s.value=!0,yield H.updateProfile(m),Object.assign(_,m),D.value=!1,y("success",f("profile_updated"))}catch(x){y("error",R(x))}finally{s.value=!1}}),fe=()=>B(this,null,function*(){s.value=!0;try{yield Promise.all([E(p.value),I(),ee(),W()])}catch(m){y("error",f("failed_load_dashboard"))}finally{s.value=!1}});se(c,m=>{m==="bookings"?E(p.value):m==="join-links"&&I()}),se(p,m=>{c.value==="bookings"&&E(m)});const be=()=>B(this,null,function*(){if(confirm(f("logout_confirmation")))try{const x=yield(yield fetch(window.hbcHostData.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`action=hbc_logout&nonce=${window.hbcHostData.logoutNonce}`})).json();x.success?window.location.href=x.data.login_url:y("error",f("logout_failed_retry"))}catch(m){console.error("Error:",m),y("error",f("logout_failed_retry"))}});return pe(fe),{isLoading:s,activeTab:c,activeFilter:p,bookings:t,joinLinks:L,profile:_,stats:n,alert:l,showBookingModal:h,showJoinLinkModal:u,showProfileModal:D,selectedBooking:S,tabs:q,filters:F,logoutUrl:T,showAlert:y,clearAlert:J,loadBookings:E,updateBookingStatus:i,viewBookingDetails:v,openJoinLinkModal:k,generateJoinLink:b,sendJoinLink:N,copyJoinLink:te,openProfileModal:A,updateProfile:G,handleLogout:be,formatDateTime:ne,getStatusClass:ue,getStatusText:me,__:f}}},pn={class:"min-h-screen bg-gray-50 py-8"},bn={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},xn={class:"bg-white p-6 rounded-lg shadow-lg"},kn={class:"flex items-center space-x-3"},wn={class:"text-gray-700"},Cn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Mn={class:"mb-8 hbc-dashboard-header"},Ln={class:"hbc-header-content"},Bn={class:"hbc-header-text"},An={class:"text-3xl font-bold text-gray-900"},Dn={class:"mt-2 text-gray-600"},jn={class:"hbc-header-actions"},Tn={class:"flex justify-between items-center"},Sn={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Vn={class:"card"},Un={class:"card-body"},zn={class:"flex items-center"},Hn={class:"ml-4"},Jn={class:"text-2xl font-semibold text-gray-900"},En={class:"text-sm text-gray-600"},Pn={class:"card"},$n={class:"card-body"},qn={class:"flex items-center"},Nn={class:"ml-4"},On={class:"text-2xl font-semibold text-gray-900"},Fn={class:"text-sm text-gray-600"},In={class:"card"},Wn={class:"card-body"},Kn={class:"flex items-center"},Rn={class:"ml-4"},Gn={class:"text-2xl font-semibold text-gray-900"},Qn={class:"text-sm text-gray-600"},Xn={class:"card"},Yn={class:"card-body"},Zn={class:"flex items-center"},ea={class:"ml-4"},ta={class:"text-2xl font-semibold text-gray-900"},sa={class:"text-sm text-gray-600"},oa={class:"tab-nav mb-6"},na={class:"flex space-x-8"},aa=["onClick"],ia={class:"bg-white rounded-lg shadow"},la={class:"p-6"},ra={class:"flex justify-between items-center mb-6"},da={class:"text-lg font-medium text-gray-900"},ca={class:"flex flex-wrap gap-2 mb-6"},_a=["onClick"],ma={key:0,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},ua={key:1,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},ga={key:2,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},fa={key:3,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},ha={key:4,class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},va={class:"p-6"},ya={class:"flex justify-between items-center mb-6"},pa={class:"text-lg font-medium text-gray-900"},ba={class:"p-6"},xa={class:"flex justify-between items-center mb-6"},ka={class:"text-lg font-medium text-gray-900"},wa={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ca={class:"form-label"},Ma={class:"text-gray-700"},La={class:"form-label"},Ba={class:"text-gray-700"},Aa={class:"form-label"},Da={class:"text-gray-700"},ja={class:"form-label"},Ta={class:"text-gray-700"},Sa={class:"md:col-span-2"},Va={class:"form-label"},Ua={class:"text-gray-700"},za={class:"p-6"},Ha={class:"flex justify-between items-center mb-6"},Ja={class:"text-lg font-medium text-gray-900"};function Ea(a,s,c,t,L,_){const n=Y("BookingsList"),l=Y("JoinLinksList"),p=Y("BookingDetailsModal"),T=Y("JoinLinkModal"),h=Y("ProfileModal");return r(),d("div",pn,[t.isLoading?(r(),d("div",bn,[e("div",xn,[e("div",kn,[s[9]||(s[9]=e("div",{class:"loading-spinner"},null,-1)),e("span",wn,o(t.__("loading")),1)])])])):g("",!0),e("div",Cn,[e("div",Mn,[e("div",Ln,[e("div",Bn,[e("h1",An,o(t.__("host_dashboard")),1),e("p",Dn,o(t.__("manage_meetings_bookings")),1)]),e("div",jn,[e("button",{onClick:s[0]||(s[0]=(...u)=>t.handleLogout&&t.handleLogout(...u)),class:"hbc-logout-btn"},o(t.__("logout")),1)])])]),t.alert.show?(r(),d("div",{key:0,class:j([t.alert.type,"mb-6 animate-fade-in"])},[e("div",Tn,[e("span",null,o(t.alert.message),1),e("button",{onClick:s[1]||(s[1]=(...u)=>t.clearAlert&&t.clearAlert(...u)),class:"text-lg leading-none hover:opacity-75"},"Ã—")])],2)):g("",!0),e("div",Sn,[e("div",Vn,[e("div",Un,[e("div",zn,[s[10]||(s[10]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})])])],-1)),e("div",Hn,[e("p",Jn,o(t.stats.today_meetings||0),1),e("p",En,o(t.__("todays_meetings")),1)])])])]),e("div",Pn,[e("div",$n,[e("div",qn,[s[11]||(s[11]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-warning-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-warning-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})])])],-1)),e("div",Nn,[e("p",On,o(t.stats.upcoming_meetings||0),1),e("p",Fn,o(t.__("upcoming")),1)])])])]),e("div",In,[e("div",Wn,[e("div",Kn,[s[12]||(s[12]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-success-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-success-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])])],-1)),e("div",Rn,[e("p",Gn,o(t.stats.completed_meetings||0),1),e("p",Qn,o(t.__("completed")),1)])])])]),e("div",Xn,[e("div",Yn,[e("div",Zn,[s[13]||(s[13]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z","clip-rule":"evenodd"})])])],-1)),e("div",ea,[e("p",ta,o(t.stats.active_join_links||0),1),e("p",sa,o(t.__("active_links")),1)])])])])]),e("div",oa,[e("nav",na,[(r(!0),d(P,null,$(t.tabs,u=>(r(),d("button",{key:u.id,onClick:D=>t.activeTab=u.id,class:j(["py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200",t.activeTab===u.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},o(u.name),11,aa))),128))])]),e("div",ia,[M(e("div",la,[e("div",ra,[e("h3",da,o(t.__("bookings")),1),e("button",{onClick:s[2]||(s[2]=u=>t.loadBookings(t.activeFilter)),class:"btn-primary"},[s[14]||(s[14]=e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1)),z(" "+o(t.__("refresh")),1)])]),e("div",ca,[(r(!0),d(P,null,$(t.filters,u=>(r(),d("button",{key:u.id,onClick:D=>t.activeFilter=u.id,class:j(["inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",t.activeFilter===u.id?"bg-primary-100 text-primary-700 border border-primary-200":"bg-gray-100 text-gray-700 border border-gray-200 hover:bg-gray-200"])},[u.icon==="calendar"?(r(),d("svg",ma,s[15]||(s[15]=[e("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"},null,-1)]))):u.icon==="clock"?(r(),d("svg",ua,s[16]||(s[16]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"},null,-1)]))):u.icon==="check"?(r(),d("svg",ga,s[17]||(s[17]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):u.icon==="x"?(r(),d("svg",fa,s[18]||(s[18]=[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):u.icon==="archive"?(r(),d("svg",ha,s[19]||(s[19]=[e("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"},null,-1),e("path",{"fill-rule":"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z","clip-rule":"evenodd"},null,-1)]))):g("",!0),z(" "+o(u.name),1)],10,_a))),128))]),ie(n,{bookings:t.bookings,"show-actions":!0,onUpdateStatus:t.updateBookingStatus,onViewDetails:t.viewBookingDetails},null,8,["bookings","onUpdateStatus","onViewDetails"])],512),[[ae,t.activeTab==="bookings"]]),M(e("div",va,[e("div",ya,[e("h3",pa,o(t.__("join_links_management")),1),e("button",{onClick:s[3]||(s[3]=(...u)=>t.openJoinLinkModal&&t.openJoinLinkModal(...u)),class:"btn-primary"},o(t.__("generate_new_link")),1)]),ie(l,{"join-links":t.joinLinks,onSendLink:t.sendJoinLink,onCopyLink:t.copyJoinLink},null,8,["join-links","onSendLink","onCopyLink"])],512),[[ae,t.activeTab==="join-links"]]),M(e("div",ba,[e("div",xa,[e("h3",ka,o(t.__("profile_settings")),1),e("button",{onClick:s[4]||(s[4]=(...u)=>t.openProfileModal&&t.openProfileModal(...u)),class:"btn-primary"},[s[20]||(s[20]=e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)),z(" "+o(t.__("edit_profile")),1)])]),e("div",wa,[e("div",null,[e("label",Ca,o(t.__("first_name")),1),e("p",Ma,o(t.profile.first_name||t.__("not_set")),1)]),e("div",null,[e("label",La,o(t.__("last_name")),1),e("p",Ba,o(t.profile.last_name||t.__("not_set")),1)]),e("div",null,[e("label",Aa,o(t.__("email")),1),e("p",Da,o(t.profile.email||t.__("not_set")),1)]),e("div",null,[e("label",ja,o(t.__("phone")),1),e("p",Ta,o(t.profile.phone||t.__("not_set")),1)]),e("div",Sa,[e("label",Va,o(t.__("bio")),1),e("p",Ua,o(t.profile.bio||t.__("not_set")),1)])])],512),[[ae,t.activeTab==="profile"]]),M(e("div",za,[e("div",Ha,[e("h3",Ja,o(t.__("meeting_history")),1),e("button",{onClick:s[5]||(s[5]=u=>t.loadBookings("history")),class:"btn-primary"},[s[21]||(s[21]=e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1)),z(" "+o(t.__("refresh")),1)])]),ie(n,{bookings:t.bookings,"show-actions":!1},null,8,["bookings"])],512),[[ae,t.activeTab==="history"]])])]),t.showBookingModal?(r(),de(p,{key:1,booking:t.selectedBooking,onClose:s[6]||(s[6]=u=>t.showBookingModal=!1)},null,8,["booking"])):g("",!0),t.showJoinLinkModal?(r(),de(T,{key:2,onClose:s[7]||(s[7]=u=>t.showJoinLinkModal=!1),onSave:t.generateJoinLink},null,8,["onSave"])):g("",!0),t.showProfileModal?(r(),de(h,{key:3,profile:t.profile,onClose:s[8]||(s[8]=u=>t.showProfileModal=!1),onSave:t.updateProfile},null,8,["profile","onSave"])):g("",!0)])}const Pa=oe(yn,[["render",Ea]]);function _e(){const a=document.getElementById("host-dashboard-app");if(a&&!a.__vue_app__)try{const s=Me(Pa);s.use(Le),s.config.errorHandler=(t,L,_)=>{console.error("Vue Host Dashboard error:",t,_),a.innerHTML=`
          <div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px; color: #c33;">
            <h3>Dashboard Error</h3>
            <p>There was an error loading the dashboard. Please refresh the page or contact support.</p>
            <details style="margin-top: 10px;">
              <summary>Error Details</summary>
              <pre style="margin-top: 10px; font-size: 12px;">${t.message}</pre>
            </details>
          </div>
        `},s.mount(a),a.__vue_app__=s,a.style.display="block";const c=document.getElementById("hbc-loading-state");c&&(c.style.display="none")}catch(s){console.error("Failed to mount Host Dashboard:",s),a.innerHTML=`
        <div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px; color: #c33;">
          <h3>Dashboard Unavailable</h3>
          <p>The dashboard could not be loaded. Please refresh the page or contact support.</p>
          <button onclick="location.reload()" style="margin-top: 10px; padding: 8px 16px; background: #007cba; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Refresh Page
          </button>
        </div>
      `}else a&&a.__vue_app__||console.error("Host Dashboard container not found")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",_e):_e();setTimeout(_e,100);
